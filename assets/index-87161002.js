(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ae(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Tr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kn(t){let e,n,r;t.length!==2?(e=ae,n=(c,s)=>ae(t(c),s),r=(c,s)=>t(c)-s):(e=t===ae||t===Tr?t:Nr,n=t,r=t);function i(c,s,u=0,h=c.length){if(u<h){if(e(s,s)!==0)return h;do{const l=u+h>>>1;n(c[l],s)<0?u=l+1:h=l}while(u<h)}return u}function a(c,s,u=0,h=c.length){if(u<h){if(e(s,s)!==0)return h;do{const l=u+h>>>1;n(c[l],s)<=0?u=l+1:h=l}while(u<h)}return u}function o(c,s,u=0,h=c.length){const l=i(c,s,u,h-1);return l>u&&r(c[l-1],s)>-r(c[l],s)?l-1:l}return{left:i,center:o,right:a}}function Nr(){return 0}function Lr(t){return t===null?NaN:+t}const Or=Kn(ae),Ir=Or.right;Kn(Lr).center;const zr=Ir;function Dr(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class dn extends Map{constructor(e,n=qr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(pn(this,e))}has(e){return super.has(pn(this,e))}set(e,n){return super.set(Fr(this,e),n)}delete(e){return super.delete(Pr(this,e))}}function pn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Pr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function qr(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Hr=Math.sqrt(50),Vr=Math.sqrt(10),Br=Math.sqrt(2);function ce(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Hr?10:a>=Vr?5:a>=Br?2:1;let c,s,u;return i<0?(u=Math.pow(10,-i)/o,c=Math.round(t*u),s=Math.round(e*u),c/u<t&&++c,s/u>e&&--s,u=-u):(u=Math.pow(10,i)*o,c=Math.round(t/u),s=Math.round(e/u),c*u<t&&++c,s*u>e&&--s),s<c&&.5<=n&&n<2?ce(t,e,n*2):[c,s,u]}function Ur(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?ce(e,t,n):ce(t,e,n);if(!(a>=i))return[];const c=a-i+1,s=new Array(c);if(r)if(o<0)for(let u=0;u<c;++u)s[u]=(a-u)/-o;else for(let u=0;u<c;++u)s[u]=(a-u)*o;else if(o<0)for(let u=0;u<c;++u)s[u]=(i+u)/-o;else for(let u=0;u<c;++u)s[u]=(i+u)*o;return s}function Ie(t,e,n){return e=+e,t=+t,n=+n,ce(t,e,n)[2]}function Gr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ie(e,t,n):Ie(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Xr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Wr(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Yr(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function Kr(t){return t}var Ce=1,Re=2,ze=3,Bt=4,gn=1e-6;function jr(t){return"translate("+t+",0)"}function Qr(t){return"translate(0,"+t+")"}function Zr(t){return e=>+t(e)}function Jr(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ti(){return!this.__axis}function jn(t,e){var n=[],r=null,i=null,a=6,o=6,c=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Ce||t===Bt?-1:1,h=t===Bt||t===Re?"x":"y",l=t===Ce||t===ze?jr:Qr;function f(m){var d=r??(e.ticks?e.ticks.apply(e,n):e.domain()),R=i??(e.tickFormat?e.tickFormat.apply(e,n):Kr),L=Math.max(a,0)+c,H=e.range(),B=+H[0]+s,z=+H[H.length-1]+s,Y=(e.bandwidth?Jr:Zr)(e.copy(),s),I=m.selection?m.selection():m,J=I.selectAll(".domain").data([null]),N=I.selectAll(".tick").data(d,e).order(),g=N.exit(),p=N.enter().append("g").attr("class","tick"),x=N.select("line"),w=N.select("text");J=J.merge(J.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),N=N.merge(p),x=x.merge(p.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),w=w.merge(p.append("text").attr("fill","currentColor").attr(h,u*L).attr("dy",t===Ce?"0em":t===ze?"0.71em":"0.32em")),m!==I&&(J=J.transition(m),N=N.transition(m),x=x.transition(m),w=w.transition(m),g=g.transition(m).attr("opacity",gn).attr("transform",function(M){return isFinite(M=Y(M))?l(M+s):this.getAttribute("transform")}),p.attr("opacity",gn).attr("transform",function(M){var A=this.parentNode.__axis;return l((A&&isFinite(A=A(M))?A:Y(M))+s)})),g.remove(),J.attr("d",t===Bt||t===Re?o?"M"+u*o+","+B+"H"+s+"V"+z+"H"+u*o:"M"+s+","+B+"V"+z:o?"M"+B+","+u*o+"V"+s+"H"+z+"V"+u*o:"M"+B+","+s+"H"+z),N.attr("opacity",1).attr("transform",function(M){return l(Y(M)+s)}),x.attr(h+"2",u*a),w.attr(h,u*L).text(R),I.filter(ti).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Re?"start":t===Bt?"end":"middle"),I.each(function(){this.__axis=Y})}return f.scale=function(m){return arguments.length?(e=m,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),f):n.slice()},f.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),f):r&&r.slice()},f.tickFormat=function(m){return arguments.length?(i=m,f):i},f.tickSize=function(m){return arguments.length?(a=o=+m,f):a},f.tickSizeInner=function(m){return arguments.length?(a=+m,f):a},f.tickSizeOuter=function(m){return arguments.length?(o=+m,f):o},f.tickPadding=function(m){return arguments.length?(c=+m,f):c},f.offset=function(m){return arguments.length?(s=+m,f):s},f}function ei(t){return jn(ze,t)}function ni(t){return jn(Bt,t)}var ri={value:()=>{}};function Qn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new se(n)}function se(t){this._=t}function ii(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}se.prototype=Qn.prototype={constructor:se,on:function(t,e){var n=this._,r=ii(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=ai(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=mn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=mn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new se(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function ai(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function mn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ri,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var De="http://www.w3.org/1999/xhtml";const yn={svg:"http://www.w3.org/2000/svg",xhtml:De,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ke(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),yn.hasOwnProperty(e)?{space:yn[e],local:t}:t}function si(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===De&&e.documentElement.namespaceURI===De?e.createElement(t):e.createElementNS(n,t)}}function oi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Zn(t){var e=ke(t);return(e.local?oi:si)(e)}function ui(){}function Je(t){return t==null?ui:function(){return this.querySelector(t)}}function ci(t){typeof t!="function"&&(t=Je(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=new Array(o),s,u,h=0;h<o;++h)(s=a[h])&&(u=t.call(s,s.__data__,h,a))&&("__data__"in s&&(u.__data__=s.__data__),c[h]=u);return new rt(r,this._parents)}function Jn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function li(){return[]}function tr(t){return t==null?li:function(){return this.querySelectorAll(t)}}function hi(t){return function(){return Jn(t.apply(this,arguments))}}function fi(t){typeof t=="function"?t=hi(t):t=tr(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],c=o.length,s,u=0;u<c;++u)(s=o[u])&&(r.push(t.call(s,s.__data__,u,o)),i.push(s));return new rt(r,i)}function er(t){return function(){return this.matches(t)}}function nr(t){return function(e){return e.matches(t)}}var di=Array.prototype.find;function pi(t){return function(){return di.call(this.children,t)}}function gi(){return this.firstElementChild}function mi(t){return this.select(t==null?gi:pi(typeof t=="function"?t:nr(t)))}var yi=Array.prototype.filter;function _i(){return Array.from(this.children)}function vi(t){return function(){return yi.call(this.children,t)}}function wi(t){return this.selectAll(t==null?_i:vi(typeof t=="function"?t:nr(t)))}function xi(t){typeof t!="function"&&(t=er(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=[],s,u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&c.push(s);return new rt(r,this._parents)}function rr(t){return new Array(t.length)}function bi(){return new rt(this._enter||this._groups.map(rr),this._parents)}function le(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}le.prototype={constructor:le,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ki(t){return function(){return t}}function Mi(t,e,n,r,i,a){for(var o=0,c,s=e.length,u=a.length;o<u;++o)(c=e[o])?(c.__data__=a[o],r[o]=c):n[o]=new le(t,a[o]);for(;o<s;++o)(c=e[o])&&(i[o]=c)}function Si(t,e,n,r,i,a,o){var c,s,u=new Map,h=e.length,l=a.length,f=new Array(h),m;for(c=0;c<h;++c)(s=e[c])&&(f[c]=m=o.call(s,s.__data__,c,e)+"",u.has(m)?i[c]=s:u.set(m,s));for(c=0;c<l;++c)m=o.call(t,a[c],c,a)+"",(s=u.get(m))?(r[c]=s,s.__data__=a[c],u.delete(m)):n[c]=new le(t,a[c]);for(c=0;c<h;++c)(s=e[c])&&u.get(f[c])===s&&(i[c]=s)}function Ai(t){return t.__data__}function Ei(t,e){if(!arguments.length)return Array.from(this,Ai);var n=e?Si:Mi,r=this._parents,i=this._groups;typeof t!="function"&&(t=ki(t));for(var a=i.length,o=new Array(a),c=new Array(a),s=new Array(a),u=0;u<a;++u){var h=r[u],l=i[u],f=l.length,m=$i(t.call(h,h&&h.__data__,u,r)),d=m.length,R=c[u]=new Array(d),L=o[u]=new Array(d),H=s[u]=new Array(f);n(h,l,R,L,H,m,e);for(var B=0,z=0,Y,I;B<d;++B)if(Y=R[B]){for(B>=z&&(z=B+1);!(I=L[z])&&++z<d;);Y._next=I||null}}return o=new rt(o,r),o._enter=c,o._exit=s,o}function $i(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ci(){return new rt(this._exit||this._groups.map(rr),this._parents)}function Ri(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Ti(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),c=new Array(i),s=0;s<o;++s)for(var u=n[s],h=r[s],l=u.length,f=c[s]=new Array(l),m,d=0;d<l;++d)(m=u[d]||h[d])&&(f[d]=m);for(;s<i;++s)c[s]=n[s];return new rt(c,this._parents)}function Ni(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Li(t){t||(t=Oi);function e(l,f){return l&&f?t(l.__data__,f.__data__):!l-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],c=o.length,s=i[a]=new Array(c),u,h=0;h<c;++h)(u=o[h])&&(s[h]=u);s.sort(e)}return new rt(i,this._parents).order()}function Oi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ii(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function zi(){return Array.from(this)}function Di(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Fi(){let t=0;for(const e of this)++t;return t}function Pi(){return!this.node()}function qi(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,c;a<o;++a)(c=i[a])&&t.call(c,c.__data__,a,i);return this}function Hi(t){return function(){this.removeAttribute(t)}}function Vi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bi(t,e){return function(){this.setAttribute(t,e)}}function Ui(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Gi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Xi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Wi(t,e){var n=ke(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Vi:Hi:typeof e=="function"?n.local?Xi:Gi:n.local?Ui:Bi)(n,e))}function ir(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Yi(t){return function(){this.style.removeProperty(t)}}function Ki(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ji(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Qi(t,e,n){return arguments.length>1?this.each((e==null?Yi:typeof e=="function"?ji:Ki)(t,e,n??"")):Ft(this.node(),t)}function Ft(t,e){return t.style.getPropertyValue(e)||ir(t).getComputedStyle(t,null).getPropertyValue(e)}function Zi(t){return function(){delete this[t]}}function Ji(t,e){return function(){this[t]=e}}function ta(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ea(t,e){return arguments.length>1?this.each((e==null?Zi:typeof e=="function"?ta:Ji)(t,e)):this.node()[t]}function ar(t){return t.trim().split(/^|\s+/)}function tn(t){return t.classList||new sr(t)}function sr(t){this._node=t,this._names=ar(t.getAttribute("class")||"")}sr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function or(t,e){for(var n=tn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ur(t,e){for(var n=tn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function na(t){return function(){or(this,t)}}function ra(t){return function(){ur(this,t)}}function ia(t,e){return function(){(e.apply(this,arguments)?or:ur)(this,t)}}function aa(t,e){var n=ar(t+"");if(arguments.length<2){for(var r=tn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ia:e?na:ra)(n,e))}function sa(){this.textContent=""}function oa(t){return function(){this.textContent=t}}function ua(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ca(t){return arguments.length?this.each(t==null?sa:(typeof t=="function"?ua:oa)(t)):this.node().textContent}function la(){this.innerHTML=""}function ha(t){return function(){this.innerHTML=t}}function fa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function da(t){return arguments.length?this.each(t==null?la:(typeof t=="function"?fa:ha)(t)):this.node().innerHTML}function pa(){this.nextSibling&&this.parentNode.appendChild(this)}function ga(){return this.each(pa)}function ma(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ya(){return this.each(ma)}function _a(t){var e=typeof t=="function"?t:Zn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function va(){return null}function wa(t,e){var n=typeof t=="function"?t:Zn(t),r=e==null?va:typeof e=="function"?e:Je(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xa(){var t=this.parentNode;t&&t.removeChild(this)}function ba(){return this.each(xa)}function ka(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ma(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Sa(t){return this.select(t?Ma:ka)}function Aa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ea(t){return function(e){t.call(this,e,this.__data__)}}function $a(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ca(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Ra(t,e,n){return function(){var r=this.__on,i,a=Ea(e);if(r){for(var o=0,c=r.length;o<c;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ta(t,e,n){var r=$a(t+""),i,a=r.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var s=0,u=c.length,h;s<u;++s)for(i=0,h=c[s];i<a;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(c=e?Ra:Ca,i=0;i<a;++i)this.each(c(r[i],e,n));return this}function cr(t,e,n){var r=ir(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Na(t,e){return function(){return cr(this,t,e)}}function La(t,e){return function(){return cr(this,t,e.apply(this,arguments))}}function Oa(t,e){return this.each((typeof e=="function"?La:Na)(t,e))}function*Ia(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var en=[null];function rt(t,e){this._groups=t,this._parents=e}function Qt(){return new rt([[document.documentElement]],en)}function za(){return this}rt.prototype=Qt.prototype={constructor:rt,select:ci,selectAll:fi,selectChild:mi,selectChildren:wi,filter:xi,data:Ei,enter:bi,exit:Ci,join:Ri,merge:Ti,selection:za,order:Ni,sort:Li,call:Ii,nodes:zi,node:Di,size:Fi,empty:Pi,each:qi,attr:Wi,style:Qi,property:ea,classed:aa,text:ca,html:da,raise:ga,lower:ya,append:_a,insert:wa,remove:ba,clone:Sa,datum:Aa,on:Ta,dispatch:Oa,[Symbol.iterator]:Ia};function W(t){return typeof t=="string"?new rt([[document.querySelector(t)]],[document.documentElement]):new rt([[t]],en)}function Da(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Fa(t,e){if(t=Da(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function he(t){return typeof t=="string"?new rt([document.querySelectorAll(t)],[document.documentElement]):new rt([Jn(t)],en)}function nn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function lr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zt(){}var Wt=.7,fe=1/Wt,Dt="\\s*([+-]?\\d+)\\s*",Yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pa=/^#([0-9a-f]{3,8})$/,qa=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),Ha=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Va=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${Yt}\\)$`),Ba=new RegExp(`^rgba\\(${gt},${gt},${gt},${Yt}\\)$`),Ua=new RegExp(`^hsl\\(${Yt},${gt},${gt}\\)$`),Ga=new RegExp(`^hsla\\(${Yt},${gt},${gt},${Yt}\\)$`),_n={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nn(Zt,Nt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vn,formatHex:vn,formatHex8:Xa,formatHsl:Wa,formatRgb:wn,toString:wn});function vn(){return this.rgb().formatHex()}function Xa(){return this.rgb().formatHex8()}function Wa(){return hr(this).formatHsl()}function wn(){return this.rgb().formatRgb()}function Nt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Pa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?xn(e):n===3?new it(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?te(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qa.exec(t))?new it(e[1],e[2],e[3],1):(e=Ha.exec(t))?new it(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Va.exec(t))?te(e[1],e[2],e[3],e[4]):(e=Ba.exec(t))?te(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ua.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=Ga.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):_n.hasOwnProperty(t)?xn(_n[t]):t==="transparent"?new it(NaN,NaN,NaN,0):null}function xn(t){return new it(t>>16&255,t>>8&255,t&255,1)}function te(t,e,n,r){return r<=0&&(t=e=n=NaN),new it(t,e,n,r)}function Ya(t){return t instanceof Zt||(t=Nt(t)),t?(t=t.rgb(),new it(t.r,t.g,t.b,t.opacity)):new it}function de(t,e,n,r){return arguments.length===1?Ya(t):new it(t,e,n,r??1)}function it(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}nn(it,de,lr(Zt,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new it(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wt:Math.pow(Wt,t),new it(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new it(Rt(this.r),Rt(this.g),Rt(this.b),pe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bn,formatHex:bn,formatHex8:Ka,formatRgb:kn,toString:kn}));function bn(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function Ka(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function kn(){const t=pe(this.opacity);return`${t===1?"rgb(":"rgba("}${Rt(this.r)}, ${Rt(this.g)}, ${Rt(this.b)}${t===1?")":`, ${t})`}`}function pe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ct(t){return t=Rt(t),(t<16?"0":"")+t.toString(16)}function Mn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ht(t,e,n,r)}function hr(t){if(t instanceof ht)return new ht(t.h,t.s,t.l,t.opacity);if(t instanceof Zt||(t=Nt(t)),!t)return new ht;if(t instanceof ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,s=(a+i)/2;return c?(e===a?o=(n-r)/c+(n<r)*6:n===a?o=(r-e)/c+2:o=(e-n)/c+4,c/=s<.5?a+i:2-a-i,o*=60):c=s>0&&s<1?0:o,new ht(o,c,s,t.opacity)}function ja(t,e,n,r){return arguments.length===1?hr(t):new ht(t,e,n,r??1)}function ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}nn(ht,ja,lr(Zt,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wt:Math.pow(Wt,t),new ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new it(Te(t>=240?t-240:t+120,i,r),Te(t,i,r),Te(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ht(Sn(this.h),ee(this.s),ee(this.l),pe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=pe(this.opacity);return`${t===1?"hsl(":"hsla("}${Sn(this.h)}, ${ee(this.s)*100}%, ${ee(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Sn(t){return t=(t||0)%360,t<0?t+360:t}function ee(t){return Math.max(0,Math.min(1,t||0))}function Te(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Qa(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function Za(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,c=r<e-1?t[r+2]:2*a-i;return Qa((n-r/e)*e,o,i,a,c)}}const rn=t=>()=>t;function Ja(t,e){return function(n){return t+n*e}}function ts(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function es(t){return(t=+t)==1?fr:function(e,n){return n-e?ts(e,n,t):rn(isNaN(e)?n:e)}}function fr(t,e){var n=e-t;return n?Ja(t,n):rn(isNaN(t)?e:t)}const ge=function t(e){var n=es(e);function r(i,a){var o=n((i=de(i)).r,(a=de(a)).r),c=n(i.g,a.g),s=n(i.b,a.b),u=fr(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=c(h),i.b=s(h),i.opacity=u(h),i+""}}return r.gamma=t,r}(1);function ns(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,c;for(o=0;o<n;++o)c=de(e[o]),r[o]=c.r||0,i[o]=c.g||0,a[o]=c.b||0;return r=t(r),i=t(i),a=t(a),c.opacity=1,function(s){return c.r=r(s),c.g=i(s),c.b=a(s),c+""}}}var rs=ns(Za);function is(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function as(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ss(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=an(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(c){for(o=0;o<r;++o)a[o]=i[o](c);return a}}function os(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function lt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function us(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=an(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ne=new RegExp(Fe.source,"g");function cs(t){return function(){return t}}function ls(t){return function(e){return t(e)+""}}function dr(t,e){var n=Fe.lastIndex=Ne.lastIndex=0,r,i,a,o=-1,c=[],s=[];for(t=t+"",e=e+"";(r=Fe.exec(t))&&(i=Ne.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),c[o]?c[o]+=a:c[++o]=a),(r=r[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,s.push({i:o,x:lt(r,i)})),n=Ne.lastIndex;return n<e.length&&(a=e.slice(n),c[o]?c[o]+=a:c[++o]=a),c.length<2?s[0]?ls(s[0].x):cs(e):(e=s.length,function(u){for(var h=0,l;h<e;++h)c[(l=s[h]).i]=l.x(u);return c.join("")})}function an(t,e){var n=typeof e,r;return e==null||n==="boolean"?rn(e):(n==="number"?lt:n==="string"?(r=Nt(e))?(e=r,ge):dr:e instanceof Nt?ge:e instanceof Date?os:as(e)?is:Array.isArray(e)?ss:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?us:lt)(t,e)}function hs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var An=180/Math.PI,Pe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pr(t,e,n,r,i,a){var o,c,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,s/=c),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*An,skewX:Math.atan(s)*An,scaleX:o,scaleY:c}}var ne;function fs(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Pe:pr(e.a,e.b,e.c,e.d,e.e,e.f)}function ds(t){return t==null||(ne||(ne=document.createElementNS("http://www.w3.org/2000/svg","g")),ne.setAttribute("transform",t),!(t=ne.transform.baseVal.consolidate()))?Pe:(t=t.matrix,pr(t.a,t.b,t.c,t.d,t.e,t.f))}function gr(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,l,f,m,d){if(u!==l||h!==f){var R=m.push("translate(",null,e,null,n);d.push({i:R-4,x:lt(u,l)},{i:R-2,x:lt(h,f)})}else(l||f)&&m.push("translate("+l+e+f+n)}function o(u,h,l,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:l.push(i(l)+"rotate(",null,r)-2,x:lt(u,h)})):h&&l.push(i(l)+"rotate("+h+r)}function c(u,h,l,f){u!==h?f.push({i:l.push(i(l)+"skewX(",null,r)-2,x:lt(u,h)}):h&&l.push(i(l)+"skewX("+h+r)}function s(u,h,l,f,m,d){if(u!==l||h!==f){var R=m.push(i(m)+"scale(",null,",",null,")");d.push({i:R-4,x:lt(u,l)},{i:R-2,x:lt(h,f)})}else(l!==1||f!==1)&&m.push(i(m)+"scale("+l+","+f+")")}return function(u,h){var l=[],f=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,l,f),o(u.rotate,h.rotate,l,f),c(u.skewX,h.skewX,l,f),s(u.scaleX,u.scaleY,h.scaleX,h.scaleY,l,f),u=h=null,function(m){for(var d=-1,R=f.length,L;++d<R;)l[(L=f[d]).i]=L.x(m);return l.join("")}}}var ps=gr(fs,"px, ","px)","deg)"),gs=gr(ds,", ",")",")"),Pt=0,Ut=0,Vt=0,mr=1e3,me,Gt,ye=0,Lt=0,Me=0,Kt=typeof performance=="object"&&performance.now?performance:Date,yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function sn(){return Lt||(yr(ms),Lt=Kt.now()+Me)}function ms(){Lt=0}function _e(){this._call=this._time=this._next=null}_e.prototype=_r.prototype={constructor:_e,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?sn():+n)+(e==null?0:+e),!this._next&&Gt!==this&&(Gt?Gt._next=this:me=this,Gt=this),this._call=t,this._time=n,qe()},stop:function(){this._call&&(this._call=null,this._time=1/0,qe())}};function _r(t,e,n){var r=new _e;return r.restart(t,e,n),r}function ys(){sn(),++Pt;for(var t=me,e;t;)(e=Lt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Pt}function En(){Lt=(ye=Kt.now())+Me,Pt=Ut=0;try{ys()}finally{Pt=0,vs(),Lt=0}}function _s(){var t=Kt.now(),e=t-ye;e>mr&&(Me-=e,ye=t)}function vs(){for(var t,e=me,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:me=n);Gt=t,qe(r)}function qe(t){if(!Pt){Ut&&(Ut=clearTimeout(Ut));var e=t-Lt;e>24?(t<1/0&&(Ut=setTimeout(En,t-Kt.now()-Me)),Vt&&(Vt=clearInterval(Vt))):(Vt||(ye=Kt.now(),Vt=setInterval(_s,mr)),Pt=1,yr(En))}}function $n(t,e,n){var r=new _e;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ws=Qn("start","end","cancel","interrupt"),xs=[],vr=0,Cn=1,He=2,oe=3,Rn=4,Ve=5,ue=6;function Se(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;bs(t,n,{name:e,index:r,group:i,on:ws,tween:xs,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:vr})}function on(t,e){var n=ft(t,e);if(n.state>vr)throw new Error("too late; already scheduled");return n}function mt(t,e){var n=ft(t,e);if(n.state>oe)throw new Error("too late; already running");return n}function ft(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function bs(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=_r(a,0,n.time);function a(u){n.state=Cn,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var h,l,f,m;if(n.state!==Cn)return s();for(h in r)if(m=r[h],m.name===n.name){if(m.state===oe)return $n(o);m.state===Rn?(m.state=ue,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[h]):+h<e&&(m.state=ue,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[h])}if($n(function(){n.state===oe&&(n.state=Rn,n.timer.restart(c,n.delay,n.time),c(u))}),n.state=He,n.on.call("start",t,t.__data__,n.index,n.group),n.state===He){for(n.state=oe,i=new Array(f=n.tween.length),h=0,l=-1;h<f;++h)(m=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++l]=m);i.length=l+1}}function c(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ve,1),l=-1,f=i.length;++l<f;)i[l].call(t,h);n.state===Ve&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=ue,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function ks(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>He&&r.state<Ve,r.state=ue,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Ms(t){return this.each(function(){ks(this,t)})}function Ss(t,e){var n,r;return function(){var i=mt(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,c=r.length;o<c;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function As(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=mt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var c={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=c;break}s===u&&i.push(c)}a.tween=i}}function Es(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ft(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Ss:As)(n,t,e))}function un(t,e,n){var r=t._id;return t.each(function(){var i=mt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ft(i,r).value[e]}}function wr(t,e){var n;return(typeof e=="number"?lt:e instanceof Nt?ge:(n=Nt(e))?(e=n,ge):dr)(t,e)}function $s(t){return function(){this.removeAttribute(t)}}function Cs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rs(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ts(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Ns(t,e,n){var r,i,a;return function(){var o,c=n(this),s;return c==null?void this.removeAttribute(t):(o=this.getAttribute(t),s=c+"",o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,c)))}}function Ls(t,e,n){var r,i,a;return function(){var o,c=n(this),s;return c==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),s=c+"",o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,c)))}}function Os(t,e){var n=ke(t),r=n==="transform"?gs:wr;return this.attrTween(t,typeof e=="function"?(n.local?Ls:Ns)(n,r,un(this,"attr."+t,e)):e==null?(n.local?Cs:$s)(n):(n.local?Ts:Rs)(n,r,e))}function Is(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ds(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&zs(t,a)),n}return i._value=e,i}function Fs(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Is(t,a)),n}return i._value=e,i}function Ps(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=ke(t);return this.tween(n,(r.local?Ds:Fs)(r,e))}function qs(t,e){return function(){on(this,t).delay=+e.apply(this,arguments)}}function Hs(t,e){return e=+e,function(){on(this,t).delay=e}}function Vs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qs:Hs)(e,t)):ft(this.node(),e).delay}function Bs(t,e){return function(){mt(this,t).duration=+e.apply(this,arguments)}}function Us(t,e){return e=+e,function(){mt(this,t).duration=e}}function Gs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Bs:Us)(e,t)):ft(this.node(),e).duration}function Xs(t,e){if(typeof e!="function")throw new Error;return function(){mt(this,t).ease=e}}function Ws(t){var e=this._id;return arguments.length?this.each(Xs(e,t)):ft(this.node(),e).ease}function Ys(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;mt(this,t).ease=n}}function Ks(t){if(typeof t!="function")throw new Error;return this.each(Ys(this._id,t))}function js(t){typeof t!="function"&&(t=er(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=[],s,u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&c.push(s);return new wt(r,this._parents,this._name,this._id)}function Qs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var s=e[c],u=n[c],h=s.length,l=o[c]=new Array(h),f,m=0;m<h;++m)(f=s[m]||u[m])&&(l[m]=f);for(;c<r;++c)o[c]=e[c];return new wt(o,this._parents,this._name,this._id)}function Zs(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Js(t,e,n){var r,i,a=Zs(e)?on:mt;return function(){var o=a(this,t),c=o.on;c!==r&&(i=(r=c).copy()).on(e,n),o.on=i}}function to(t,e){var n=this._id;return arguments.length<2?ft(this.node(),n).on.on(t):this.each(Js(n,t,e))}function eo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function no(){return this.on("end.remove",eo(this._id))}function ro(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Je(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var c=r[o],s=c.length,u=a[o]=new Array(s),h,l,f=0;f<s;++f)(h=c[f])&&(l=t.call(h,h.__data__,f,c))&&("__data__"in h&&(l.__data__=h.__data__),u[f]=l,Se(u[f],e,n,f,u,ft(h,n)));return new wt(a,this._parents,e,n)}function io(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tr(t));for(var r=this._groups,i=r.length,a=[],o=[],c=0;c<i;++c)for(var s=r[c],u=s.length,h,l=0;l<u;++l)if(h=s[l]){for(var f=t.call(h,h.__data__,l,s),m,d=ft(h,n),R=0,L=f.length;R<L;++R)(m=f[R])&&Se(m,e,n,R,f,d);a.push(f),o.push(h)}return new wt(a,o,e,n)}var ao=Qt.prototype.constructor;function so(){return new ao(this._groups,this._parents)}function oo(t,e){var n,r,i;return function(){var a=Ft(this,t),o=(this.style.removeProperty(t),Ft(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function xr(t){return function(){this.style.removeProperty(t)}}function uo(t,e,n){var r,i=n+"",a;return function(){var o=Ft(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function co(t,e,n){var r,i,a;return function(){var o=Ft(this,t),c=n(this),s=c+"";return c==null&&(s=c=(this.style.removeProperty(t),Ft(this,t))),o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,c))}}function lo(t,e){var n,r,i,a="style."+e,o="end."+a,c;return function(){var s=mt(this,t),u=s.on,h=s.value[a]==null?c||(c=xr(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(o,i=h),s.on=r}}function ho(t,e,n){var r=(t+="")=="transform"?ps:wr;return e==null?this.styleTween(t,oo(t,r)).on("end.style."+t,xr(t)):typeof e=="function"?this.styleTween(t,co(t,r,un(this,"style."+t,e))).each(lo(this._id,t)):this.styleTween(t,uo(t,r,e),n).on("end.style."+t,null)}function fo(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function po(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&fo(t,o,n)),r}return a._value=e,a}function go(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,po(t,e,n??""))}function mo(t){return function(){this.textContent=t}}function yo(t){return function(){var e=t(this);this.textContent=e??""}}function _o(t){return this.tween("text",typeof t=="function"?yo(un(this,"text",t)):mo(t==null?"":t+""))}function vo(t){return function(e){this.textContent=t.call(this,e)}}function wo(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&vo(i)),e}return r._value=t,r}function xo(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,wo(t))}function bo(){for(var t=this._name,e=this._id,n=br(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],c=o.length,s,u=0;u<c;++u)if(s=o[u]){var h=ft(s,e);Se(s,t,n,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new wt(r,this._parents,t,n)}function ko(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var c={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var u=mt(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(s)),u.on=e}),i===0&&a()})}var Mo=0;function wt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function br(){return++Mo}var vt=Qt.prototype;wt.prototype={constructor:wt,select:ro,selectAll:io,selectChild:vt.selectChild,selectChildren:vt.selectChildren,filter:js,merge:Qs,selection:so,transition:bo,call:vt.call,nodes:vt.nodes,node:vt.node,size:vt.size,empty:vt.empty,each:vt.each,on:to,attr:Os,attrTween:Ps,style:ho,styleTween:go,text:_o,textTween:xo,remove:no,tween:Es,delay:Vs,duration:Gs,ease:Ws,easeVarying:Ks,end:ko,[Symbol.iterator]:vt[Symbol.iterator]};function So(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ao={time:null,delay:0,duration:250,ease:So};function Eo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $o(t){var e,n;t instanceof wt?(e=t._id,t=t._name):(e=br(),(n=Ao).time=sn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],c=o.length,s,u=0;u<c;++u)(s=o[u])&&Se(s,t,e,u,o,n||Eo(s,e));return new wt(r,this._parents,t,e)}Qt.prototype.interrupt=Ms;Qt.prototype.transition=$o;const Be=Math.PI,Ue=2*Be,Et=1e-6,Co=Ue-Et;function kr(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ro(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return kr;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let To=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?kr:Ro(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,s=r-e,u=i-n,h=o-e,l=c-n,f=h*h+l*l;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Et)if(!(Math.abs(l*s-u*h)>Et)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,d=i-c,R=s*s+u*u,L=m*m+d*d,H=Math.sqrt(R),B=Math.sqrt(f),z=a*Math.tan((Be-Math.acos((R+f-L)/(2*H*B)))/2),Y=z/B,I=z/H;Math.abs(Y-1)>Et&&this._append`L${e+Y*h},${n+Y*l}`,this._append`A${a},${a},0,0,${+(l*m>h*d)},${this._x1=e+I*s},${this._y1=n+I*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),s=r*Math.sin(i),u=e+c,h=n+s,l=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Et||Math.abs(this._y1-h)>Et)&&this._append`L${u},${h}`,r&&(f<0&&(f=f%Ue+Ue),f>Co?this._append`A${r},${r},0,1,${l},${e-c},${n-s}A${r},${r},0,1,${l},${this._x1=u},${this._y1=h}`:f>Et&&this._append`A${r},${r},0,${+(f>=Be)},${l},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function No(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Lo(t,e){return fetch(t,e).then(No)}function Oo(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ve(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function qt(t){return t=ve(Math.abs(t)),t?t[1]:NaN}function Io(t,e){return function(n,r){for(var i=n.length,a=[],o=0,c=t[0],s=0;i>0&&c>0&&(s+c+1>r&&(c=Math.max(1,r-s)),a.push(n.substring(i-=c,i+c)),!((s+=c+1)>r));)c=t[o=(o+1)%t.length];return a.reverse().join(e)}}function zo(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Do=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function we(t){if(!(e=Do.exec(t)))throw new Error("invalid format: "+t);var e;return new cn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}we.prototype=cn.prototype;function cn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}cn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fo(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Mr;function Po(t,e){var n=ve(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Mr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ve(t,Math.max(0,e+a-1))[0]}function Tn(t,e){var n=ve(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Nn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Oo,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Tn(t*100,e),r:Tn,s:Po,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ln(t){return t}var On=Array.prototype.map,In=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function qo(t){var e=t.grouping===void 0||t.thousands===void 0?Ln:Io(On.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Ln:zo(On.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"â":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function u(l){l=we(l);var f=l.fill,m=l.align,d=l.sign,R=l.symbol,L=l.zero,H=l.width,B=l.comma,z=l.precision,Y=l.trim,I=l.type;I==="n"?(B=!0,I="g"):Nn[I]||(z===void 0&&(z=12),Y=!0,I="g"),(L||f==="0"&&m==="=")&&(L=!0,f="0",m="=");var J=R==="$"?n:R==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",N=R==="$"?r:/[%p]/.test(I)?o:"",g=Nn[I],p=/[defgprs%]/.test(I);z=z===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,z)):Math.max(0,Math.min(20,z));function x(w){var M=J,A=N,C,v,k;if(I==="c")A=g(w)+A,w="";else{w=+w;var _=w<0||1/w<0;if(w=isNaN(w)?s:g(Math.abs(w),z),Y&&(w=Fo(w)),_&&+w==0&&d!=="+"&&(_=!1),M=(_?d==="("?d:c:d==="-"||d==="("?"":d)+M,A=(I==="s"?In[8+Mr/3]:"")+A+(_&&d==="("?")":""),p){for(C=-1,v=w.length;++C<v;)if(k=w.charCodeAt(C),48>k||k>57){A=(k===46?i+w.slice(C+1):w.slice(C))+A,w=w.slice(0,C);break}}}B&&!L&&(w=e(w,1/0));var b=M.length+w.length+A.length,y=b<H?new Array(H-b+1).join(f):"";switch(B&&L&&(w=e(y+w,y.length?H-A.length:1/0),y=""),m){case"<":w=M+w+A+y;break;case"=":w=M+y+w+A;break;case"^":w=y.slice(0,b=y.length>>1)+M+w+A+y.slice(b);break;default:w=y+M+w+A;break}return a(w)}return x.toString=function(){return l+""},x}function h(l,f){var m=u((l=we(l),l.type="f",l)),d=Math.max(-8,Math.min(8,Math.floor(qt(f)/3)))*3,R=Math.pow(10,-d),L=In[8+d/3];return function(H){return m(R*H)+L}}return{format:u,formatPrefix:h}}var re,Sr,Ar;Ho({thousands:",",grouping:[3],currency:["$",""]});function Ho(t){return re=qo(t),Sr=re.format,Ar=re.formatPrefix,re}function Vo(t){return Math.max(0,-qt(Math.abs(t)))}function Bo(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qt(e)/3)))*3-qt(Math.abs(t)))}function Uo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qt(e)-qt(t))+1}function ln(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const zn=Symbol("implicit");function Ae(){var t=new dn,e=[],n=[],r=zn;function i(a){let o=t.get(a);if(o===void 0){if(r!==zn)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new dn;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ae(e,n).unknown(r)},ln.apply(i,arguments),i}function Ge(){var t=Ae().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,c=!1,s=0,u=0,h=.5;delete t.unknown;function l(){var f=e().length,m=i<r,d=m?i:r,R=m?r:i;a=(R-d)/Math.max(1,f-s+u*2),c&&(a=Math.floor(a)),d+=(R-d-a*(f-s))*h,o=a*(1-s),c&&(d=Math.round(d),o=Math.round(o));var L=Wr(f).map(function(H){return d+a*H});return n(m?L.reverse():L)}return t.domain=function(f){return arguments.length?(e(f),l()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,l()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,c=!0,l()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(c=!!f,l()):c},t.padding=function(f){return arguments.length?(s=Math.min(1,u=+f),l()):s},t.paddingInner=function(f){return arguments.length?(s=Math.min(1,f),l()):s},t.paddingOuter=function(f){return arguments.length?(u=+f,l()):u},t.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),l()):h},t.copy=function(){return Ge(e(),[r,i]).round(c).paddingInner(s).paddingOuter(u).align(h)},ln.apply(l(),arguments)}function Go(t){return function(){return t}}function Xo(t){return+t}var Dn=[0,1];function zt(t){return t}function Xe(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Go(isNaN(e)?NaN:.5)}function Wo(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Yo(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Xe(i,r),a=n(o,a)):(r=Xe(r,i),a=n(a,o)),function(c){return a(r(c))}}function Ko(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Xe(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(c){var s=zr(t,c,1,r)-1;return a[s](i[s](c))}}function jo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qo(){var t=Dn,e=Dn,n=an,r,i,a,o=zt,c,s,u;function h(){var f=Math.min(t.length,e.length);return o!==zt&&(o=Wo(t[0],t[f-1])),c=f>2?Ko:Yo,s=u=null,l}function l(f){return f==null||isNaN(f=+f)?a:(s||(s=c(t.map(r),e,n)))(r(o(f)))}return l.invert=function(f){return o(i((u||(u=c(e,t.map(r),lt)))(f)))},l.domain=function(f){return arguments.length?(t=Array.from(f,Xo),h()):t.slice()},l.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},l.rangeRound=function(f){return e=Array.from(f),n=hs,h()},l.clamp=function(f){return arguments.length?(o=f?!0:zt,h()):o!==zt},l.interpolate=function(f){return arguments.length?(n=f,h()):n},l.unknown=function(f){return arguments.length?(a=f,l):a},function(f,m){return r=f,i=m,h()}}function Zo(){return Qo()(zt,zt)}function Jo(t,e,n,r){var i=Gr(t,e,n),a;switch(r=we(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Bo(i,o))&&(r.precision=a),Ar(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Uo(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Vo(i))&&(r.precision=a-(r.type==="%")*2);break}}return Sr(r)}function tu(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ur(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Jo(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],c=r[a],s,u,h=10;for(c<o&&(u=o,o=c,c=u,u=i,i=a,a=u);h-- >0;){if(u=Ie(o,c,n),u===s)return r[i]=o,r[a]=c,e(r);if(u>0)o=Math.floor(o/u)*u,c=Math.ceil(c/u)*u;else if(u<0)o=Math.ceil(o*u)/u,c=Math.floor(c*u)/u;else break;s=u}return t},t}function xe(){var t=Zo();return t.copy=function(){return jo(t,xe())},ln.apply(t,arguments),tu(t)}function Er(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const We=Er("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),eu=t=>rs(t[t.length-1]);var nu=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Er);const ru=eu(nu);function It(t){return function(){return t}}function iu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new To(e)}function au(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $r(t){this._context=t}$r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function su(t){return new $r(t)}function ou(t){return t[0]}function uu(t){return t[1]}function cu(t,e){var n=It(!0),r=null,i=su,a=null,o=iu(c);t=typeof t=="function"?t:t===void 0?ou:It(t),e=typeof e=="function"?e:e===void 0?uu:It(e);function c(s){var u,h=(s=au(s)).length,l,f=!1,m;for(r==null&&(a=i(m=o())),u=0;u<=h;++u)!(u<h&&n(l=s[u],u,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(l,u,s),+e(l,u,s));if(m)return a=null,m+""||null}return c.x=function(s){return arguments.length?(t=typeof s=="function"?s:It(+s),c):t},c.y=function(s){return arguments.length?(e=typeof s=="function"?s:It(+s),c):e},c.defined=function(s){return arguments.length?(n=typeof s=="function"?s:It(!!s),c):n},c.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),c):i},c.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),c):r},c}function Xt(t,e,n){this.k=t,this.x=e,this.y=n}Xt.prototype={constructor:Xt,scale:function(t){return t===1?this:new Xt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Xt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Xt.prototype;class lu{constructor(e,n=300,r=300){this.id=e,this.margin={top:20,right:10,bottom:25,left:30},this.width=n-this.margin.left-this.margin.right,this.height=r-this.margin.top-this.margin.bottom,this.kRange=[5,7,9,11,13,15],this.minSupportRange=[10,9,8,7,6]}initialize(e,n){return this.fsmResult=n,this.div=W(this.id).append("div").attr("class","d-flex justify-content-center me-2"),this.svg=this.div.append("svg"),this.container=this.svg.append("g"),this.xAxis=this.svg.append("g"),this.yAxis=this.svg.append("g"),this.xAxisLabel=this.svg.append("text"),this.yAxisLabel=this.svg.append("text"),this.cells=this.container.append("g"),this.cellsText=this.container.append("g"),this.eventHandlers=e,this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.container.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.kRange=[...new Set(this.fsmResult.map(r=>r.k))],this.k=this.kRange[4],this.ms=7,this.xScale=Ge().domain(this.kRange).range([0,this.width]).padding(.03),this.yScale=Ge().domain(this.minSupportRange).range([0,this.height]).padding(.03),this.colorScale=xe().range([0,1]),this.xAxis.attr("transform",`translate(${this.margin.left}, ${this.height+this.margin.top})`).call(ei(this.xScale)),this.yAxis.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`).call(ni(this.yScale)),this.xAxisLabel.attr("transform",`translate(${this.width+this.margin.left+5}, ${this.height+this.margin.top+13})`).attr("text-anchor","middle").attr("alignment-baseline","middle").text("k").attr("font-size","13px").attr("font-weight","bold"),this.yAxisLabel.attr("transform","translate(25, 10)").attr("text-anchor","middle").attr("alignment-baseline","middle").text("minsup").attr("font-size","13px").attr("font-weight","bold"),this.kBand=this.kRange.map(r=>this.xScale(r)),this.msBand=this.minSupportRange.map(r=>this.yScale(r)),this}update(e){return this.subgLength=this.fsmResult.map(n=>n.subgs.filter(r=>r.length>=e/500).length),this.maxSubgraphsLength=Xr(this.subgLength),this.colorScale.domain([1,Math.ceil(this.maxSubgraphsLength*1.5)]),this.cells.selectAll("rect").data(this.fsmResult).join("rect").attr("class",n=>`heatmap-cell k${n.k}ms${n.ms}`).attr("x",n=>this.xScale(n.k)).attr("y",n=>this.yScale(n.ms)).attr("width",this.xScale.bandwidth()).attr("height",this.yScale.bandwidth()).style("fill",(n,r)=>ru(this.colorScale(this.subgLength[r]))).on("click",n=>this.clickCell(n)),this.cellsText.selectAll("text").data(this.fsmResult).join("text").attr("class","heatmap-cell").attr("x",n=>this.xScale(n.k)+this.xScale.bandwidth()/2).attr("y",n=>this.yScale(n.ms)+this.yScale.bandwidth()/2).style("text-anchor","middle").style("alignment-baseline","middle").style("font-size","12px").style("font-weight","bold").style("fill","black").text((n,r)=>this.subgLength[r]).on("click",n=>this.clickCell(n)),this}clickCell(e){let[n,r]=Fa(e);this.k=this.invertX(n),this.ms=this.invertY(r),this.eventHandlers.clickCell({k:this.invertX(n),ms:this.invertY(r)})}highlightCell(){return W(".highlight-cell").classed("highlight-cell",!1),W(".k"+this.k+"ms"+this.ms).classed("highlight-cell",!0),this}invertX(e){let n=this.kRange[this.kRange.length-1];return this.kBand.forEach((r,i)=>{n==this.kRange[this.kRange.length-1]&&(n=e<r?this.kRange[i-1]:n)}),n}invertY(e){let n=this.minSupportRange[this.minSupportRange.length-1];return this.msBand.forEach((r,i)=>{n==this.minSupportRange[this.minSupportRange.length-1]&&(n=e<r?this.minSupportRange[i-1]:n)}),n}}function Fn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hu(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Le(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Cr(t,e){return t.sourceLinks.length?t.depth:e-1}function ie(t){return function(){return t}}function Pn(t,e){return be(t.source,e.source)||t.index-e.index}function qn(t,e){return be(t.target,e.target)||t.index-e.index}function be(t,e){return t.y0-e.y0}function Oe(t){return t.value}function fu(t){return t.index}function du(t){return t.nodes}function pu(t){return t.links}function Hn(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Vn({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function gu(){let t=0,e=0,n=1,r=1,i=24,a=8,o,c=fu,s=Cr,u,h,l=du,f=pu,m=6;function d(){const v={nodes:l.apply(null,arguments),links:f.apply(null,arguments)};return R(v),L(v),H(v),B(v),I(v),Vn(v),v}d.update=function(v){return Vn(v),v},d.nodeId=function(v){return arguments.length?(c=typeof v=="function"?v:ie(v),d):c},d.nodeAlign=function(v){return arguments.length?(s=typeof v=="function"?v:ie(v),d):s},d.nodeSort=function(v){return arguments.length?(u=v,d):u},d.nodeWidth=function(v){return arguments.length?(i=+v,d):i},d.nodePadding=function(v){return arguments.length?(a=o=+v,d):a},d.nodes=function(v){return arguments.length?(l=typeof v=="function"?v:ie(v),d):l},d.links=function(v){return arguments.length?(f=typeof v=="function"?v:ie(v),d):f},d.linkSort=function(v){return arguments.length?(h=v,d):h},d.size=function(v){return arguments.length?(t=e=0,n=+v[0],r=+v[1],d):[n-t,r-e]},d.extent=function(v){return arguments.length?(t=+v[0][0],n=+v[1][0],e=+v[0][1],r=+v[1][1],d):[[t,e],[n,r]]},d.iterations=function(v){return arguments.length?(m=+v,d):m};function R({nodes:v,links:k}){for(const[b,y]of v.entries())y.index=b,y.sourceLinks=[],y.targetLinks=[];const _=new Map(v.map((b,y)=>[c(b,y,v),b]));for(const[b,y]of k.entries()){y.index=b;let{source:E,target:T}=y;typeof E!="object"&&(E=y.source=Hn(_,E)),typeof T!="object"&&(T=y.target=Hn(_,T)),E.sourceLinks.push(y),T.targetLinks.push(y)}if(h!=null)for(const{sourceLinks:b,targetLinks:y}of v)b.sort(h),y.sort(h)}function L({nodes:v}){for(const k of v)k.value=k.fixedValue===void 0?Math.max(Le(k.sourceLinks,Oe),Le(k.targetLinks,Oe)):k.fixedValue}function H({nodes:v}){const k=v.length;let _=new Set(v),b=new Set,y=0;for(;_.size;){for(const E of _){E.depth=y;for(const{target:T}of E.sourceLinks)b.add(T)}if(++y>k)throw new Error("circular link");_=b,b=new Set}}function B({nodes:v}){const k=v.length;let _=new Set(v),b=new Set,y=0;for(;_.size;){for(const E of _){E.height=y;for(const{source:T}of E.targetLinks)b.add(T)}if(++y>k)throw new Error("circular link");_=b,b=new Set}}function z({nodes:v}){const k=Fn(v,y=>y.depth)+1,_=(n-t-i)/(k-1),b=new Array(k);for(const y of v){const E=Math.max(0,Math.min(k-1,Math.floor(s.call(null,y,k))));y.layer=E,y.x0=t+E*_,y.x1=y.x0+i,b[E]?b[E].push(y):b[E]=[y]}if(u)for(const y of b)y.sort(u);return b}function Y(v){const k=hu(v,_=>(r-e-(_.length-1)*o)/Le(_,Oe));for(const _ of v){let b=e;for(const y of _){y.y0=b,y.y1=b+y.value*k,b=y.y1+o;for(const E of y.sourceLinks)E.width=E.value*k}b=(r-b+o)/(_.length+1);for(let y=0;y<_.length;++y){const E=_[y];E.y0+=b*(y+1),E.y1+=b*(y+1)}M(_)}}function I(v){const k=z(v);o=Math.min(a,(r-e)/(Fn(k,_=>_.length)-1)),Y(k);for(let _=0;_<m;++_){const b=Math.pow(.99,_),y=Math.max(1-b,(_+1)/m);N(k,b,y),J(k,b,y)}}function J(v,k,_){for(let b=1,y=v.length;b<y;++b){const E=v[b];for(const T of E){let S=0,O=0;for(const{source:F,value:j}of T.targetLinks){let U=j*(T.layer-F.layer);S+=A(F,T)*U,O+=U}if(!(O>0))continue;let K=(S/O-T.y0)*k;T.y0+=K,T.y1+=K,w(T)}u===void 0&&E.sort(be),g(E,_)}}function N(v,k,_){for(let b=v.length,y=b-2;y>=0;--y){const E=v[y];for(const T of E){let S=0,O=0;for(const{target:F,value:j}of T.sourceLinks){let U=j*(F.layer-T.layer);S+=C(T,F)*U,O+=U}if(!(O>0))continue;let K=(S/O-T.y0)*k;T.y0+=K,T.y1+=K,w(T)}u===void 0&&E.sort(be),g(E,_)}}function g(v,k){const _=v.length>>1,b=v[_];x(v,b.y0-o,_-1,k),p(v,b.y1+o,_+1,k),x(v,r,v.length-1,k),p(v,e,0,k)}function p(v,k,_,b){for(;_<v.length;++_){const y=v[_],E=(k-y.y0)*b;E>1e-6&&(y.y0+=E,y.y1+=E),k=y.y1+o}}function x(v,k,_,b){for(;_>=0;--_){const y=v[_],E=(y.y1-k)*b;E>1e-6&&(y.y0-=E,y.y1-=E),k=y.y0-o}}function w({sourceLinks:v,targetLinks:k}){if(h===void 0){for(const{source:{sourceLinks:_}}of k)_.sort(qn);for(const{target:{targetLinks:_}}of v)_.sort(Pn)}}function M(v){if(h===void 0)for(const{sourceLinks:k,targetLinks:_}of v)k.sort(qn),_.sort(Pn)}function A(v,k){let _=v.y0-(v.sourceLinks.length-1)*o/2;for(const{target:b,width:y}of v.sourceLinks){if(b===k)break;_+=y+o}for(const{source:b,width:y}of k.targetLinks){if(b===v)break;_-=y}return _}function C(v,k){let _=k.y0-(k.targetLinks.length-1)*o/2;for(const{source:b,width:y}of k.targetLinks){if(b===v)break;_+=y+o}for(const{target:b,width:y}of v.sourceLinks){if(b===k)break;_-=y}return _}return d}var Ye=Math.PI,Ke=2*Ye,$t=1e-6,mu=Ke-$t;function je(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Rr(){return new je}je.prototype=Rr.prototype={constructor:je,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,c=n-t,s=r-e,u=a-t,h=o-e,l=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>$t)if(!(Math.abs(h*c-s*u)>$t)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var f=n-a,m=r-o,d=c*c+s*s,R=f*f+m*m,L=Math.sqrt(d),H=Math.sqrt(l),B=i*Math.tan((Ye-Math.acos((d+l-R)/(2*L*H)))/2),z=B/H,Y=B/L;Math.abs(z-1)>$t&&(this._+="L"+(t+z*u)+","+(e+z*h)),this._+="A"+i+","+i+",0,0,"+ +(h*f>u*m)+","+(this._x1=t+Y*c)+","+(this._y1=e+Y*s)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),c=n*Math.sin(r),s=t+o,u=e+c,h=1^a,l=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>$t||Math.abs(this._y1-u)>$t)&&(this._+="L"+s+","+u),n&&(l<0&&(l=l%Ke+Ke),l>mu?this._+="A"+n+","+n+",0,1,"+h+","+(t-o)+","+(e-c)+"A"+n+","+n+",0,1,"+h+","+(this._x1=s)+","+(this._y1=u):l>$t&&(this._+="A"+n+","+n+",0,"+ +(l>=Ye)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Bn(t){return function(){return t}}function yu(t){return t[0]}function _u(t){return t[1]}var vu=Array.prototype.slice;function wu(t){return t.source}function xu(t){return t.target}function bu(t){var e=wu,n=xu,r=yu,i=_u,a=null;function o(){var c,s=vu.call(arguments),u=e.apply(this,s),h=n.apply(this,s);if(a||(a=c=Rr()),t(a,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=h,s)),+i.apply(this,s)),c)return a=null,c+""||null}return o.source=function(c){return arguments.length?(e=c,o):e},o.target=function(c){return arguments.length?(n=c,o):n},o.x=function(c){return arguments.length?(r=typeof c=="function"?c:Bn(+c),o):r},o.y=function(c){return arguments.length?(i=typeof c=="function"?c:Bn(+c),o):i},o.context=function(c){return arguments.length?(a=c??null,o):a},o}function ku(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Mu(){return bu(ku)}function Su(t){return[t.source.x1,t.y0]}function Au(t){return[t.target.x0,t.y1]}function Eu(){return Mu().source(Su).target(Au)}class $u{constructor(e,n,r){this.id=e,this.margin={top:20,right:10,bottom:10,left:10},this.width=n-this.margin.left-this.margin.right,this.height=r-this.margin.top-this.margin.bottom}initialize(e,n,r){return this.fsmResult=e.fsmResult,this.labelSet=e.labelSet,this.labels=e.labels,this.storage=e,this.labelLength=this.labelSet.length,this.textureScale=n,this.eventHandlers=r,this.div=W(this.id).append("div"),this.svg=this.div.append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.classLabel=this.svg.append("text").attr("transform",`translate(${this.margin.left+8}, 15)`).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").text("Class"),this.fsLabel=this.svg.append("text").attr("transform",`translate(${this.margin.left+this.width-9}, 15)`).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").text("FS"),this.container=this.svg.append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),this.textureScale.callTextures(i=>{this.svg.call(i)}),this}update(){this.colorLabel=[0,7,2,3,9,5,6,1,8,4],this.labelColorScale=Ae([...new Array(this.labelLength)].map((i,a)=>a),We),this.makeGraph();let e=this.graph.nodes,n=this.graph.links;const r=Yr(e,i=>i.id);gu().nodeId((i,a)=>r[a]).nodeAlign(Cr).nodeSort(null).nodeWidth(15).nodePadding(5).extent([[0,0],[this.width,this.height-50]])({nodes:e,links:n}),this.container.selectAll("g").remove(),this.nodeG=this.container.append("g"),this.linkG=this.container.append("g"),this.classLegend=this.container.append("g"),this.legendRect=this.classLegend.append("g"),this.legendText=this.classLegend.append("g"),this.link=this.linkG.selectAll(".link").data(n).join("g").append("path").attr("d",Eu()).attr("fill","none").attr("stroke-opacity",.1).attr("stroke","#000").attr("stroke-width",({width:i})=>Math.max(2,i)).sort((i,a)=>a.dy-i.dy),this.node=this.nodeG.selectAll("rect").data(e).join("rect").attr("class","node").style("fill",i=>i.id<this.labelLength?this.labelColorScale(i.id):i.id<this.labelLength+this.textureScale.length()&&i.id<e.length-1?this.textureScale.getTexture(i.id-this.labelLength).url():i.id<e.length-1?"rgb(240,240,240)":"gray").attr("stroke",i=>i.id<this.labelLength?"none":"black").attr("x",i=>i.x0).attr("y",i=>i.y0).attr("height",i=>i.y1-i.y0).attr("width",i=>i.x1-i.x0).on("click",(i,a)=>{a.id<this.labelLength?this.eventHandlers.linkViews("class",this.nodesMask[a.id]):this.eventHandlers.linkViews("FS",this.nodesMask[a.id])}),this.drawLegend()}makeGraph(){let e,n={};this.graph={nodes:[],links:[]},e=[...new Set(this.storage.groupedData.map(r=>r.FS))],e.includes("outliers")&&this.graph.nodes.push("outliers"),e.includes(this.textureScale.length())?this.graph.nodes=[...this.labelSet,...e.slice(0,this.textureScale.length()),"remainders",...this.graph.nodes]:this.graph.nodes=[...this.labelSet,...e],this.nodesMask=[...this.graph.nodes],this.storage.groupedData.filter(r=>r.FS!=="outliers"&&r.FS>=this.textureScale.length()).forEach(r=>{n[r.label]?n[r.label]+=r.points.length:n[r.label]=r.points.length}),this.storage.groupedData.forEach(r=>{this.graph.nodes.indexOf(r.FS)<0||this.graph.links.push({source:this.graph.nodes.indexOf(r.label),target:this.graph.nodes.indexOf(r.FS),value:r.points.length})}),Object.keys(n).sort().forEach(r=>{this.graph.links.push({source:this.graph.nodes.indexOf(r),target:this.graph.nodes.indexOf("remainders"),value:n[r]})}),this.graph.nodes.forEach((r,i)=>{this.graph.nodes[i]={id:i}})}drawLegend(){this.classLegend.attr("transform",`translate(0,${this.height-35})`).attr("font-size","13px"),this.legendRect.selectAll("rect").data(this.labelSet).join("rect").attr("x",(e,n)=>n%5*Math.floor(this.width/5)).attr("y",(e,n)=>Math.floor(n/5)*20).attr("width",10).attr("height",10).attr("fill",(e,n)=>this.labelColorScale(n)),this.legendText.selectAll("text").data(this.labelSet).join("text").attr("x",(e,n)=>n%5*Math.floor(this.width/5)+15).attr("y",(e,n)=>Math.floor(n/5)*20+10).text(e=>e)}updateToggle(e){this.link.attr("stroke-opacity",n=>e.has(this.nodesMask[n.source.id])||e.has(this.nodesMask[n.target.id])?.4:.1)}}class Cu{constructor(e,n,r,i,a,o,c,s,u){this.id=e,this.div=W(n).append("div"),this.margin={top:15,right:10,bottom:10,left:10},this.width=r-this.margin.left-this.margin.right,this.height=i-this.margin.top-this.margin.bottom,this.method=a.substr(0,4)==="tsne"?"<i>t </i>-SNE":"UMAP",this.mode="dualMode",this.hyperparameters=o,this.brushedSet=c,this.textureScale=s,this.eventHandlers=u,this.handlers={}}initialize(e,n){return this.embedding=e,this.storage=n,this.fsmResult=n.fsmResult,this.labelSet=n.labelSet,this.labels=n.labels,this.div.attr("class","scatterplot bg-white p-1 my-1 me-2 rounded-3 justify-content-center border border-priamry"),this.header=this.div.append("div").attr("class","d-flex mt-1 mx-2 justify-content-between"),this.header.append("div").attr("class","fs-6 fw-bold ms-1").html(`${this.method} ${this.id+1}`),this.header.append("span").attr("class","badge rounded-pill text-bg-primary me-1").text("random"),this.svg=this.div.append("svg"),this.container=this.svg.append("g"),this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.container.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.pointGroup=this.container.append("g"),this.contourGroup=this.container.append("g"),this.createScales(),this}createScales(){let[e,n]=Dr([...this.embedding.map(r=>Number(r.x)),...this.embedding.map(r=>Number(r.y))]);return this.xScale=xe().domain([e*1.05,n*1.05]).range([0,this.width]),this.yScale=xe().domain([e*1.05,n*1.05]).range([this.height,0]),this.colorLabel=["0","7","2","1","4","5","9","6","8","3"],this.labelColorScale=Ae().domain(this.labelSet).range(We),this.textureScale.callTextures(r=>{this.svg.call(r)}),this}embedGroupedData(){return console.log(this.storage.groupedData),this.circleGroup=this.pointGroup.selectAll("g").data(this.storage.groupedData).join("g"),this.circles=this.circleGroup.selectAll("circle").data(e=>e.points).join("circle").attr("transform",e=>`translate(${this.xScale(this.embedding[e].x)}, ${this.yScale(this.embedding[e].y)})`),this.circles.attr("fill",e=>this.labelColorScale(this.embedding[e].l)).attr("id",e=>`point-${e}`).attr("opacity",.7).attr("r",1),this}drawContour(){this.contourCoords=this.storage.contourData[this.id].length>this.textureScale.length()?this.storage.contourData[this.id].slice(0,this.textureScale.length()):this.storage.contourData[this.id];const e=cu().x(n=>this.xScale(n[0])).y(n=>this.yScale(n[1]));this.contours=this.contourGroup.selectAll("path").data(this.contourCoords.slice(0,15)).join("path"),this.contours.attr("d",n=>e(n)).attr("class","contour").attr("fill",(n,r)=>r<this.textureScale.length()?this.textureScale.getTexture(r).url():"rgb(240,240,240)").attr("id",(n,r)=>`FS${r}`).attr("fill-opacity",.4).attr("stroke","black").attr("stroke-opacity",.8).on("click",n=>{let r=+W(n.target).attr("id").slice(2);this.eventHandlers.linkViews("FS",r)})}updateView(){return this.embedGroupedData(),this.drawContour(),this}changeMode(e){this.mode=e||this.mode,this.mode=="dualMode"?(this.drawContour(),this.circles.attr("fill",n=>this.labelColorScale(this.embedding[n].l))):this.mode=="fsMode"?(this.drawContour(),this.circles.attr("fill",We[9])):(this.contourGroup.selectAll("path").remove(),this.circles.attr("fill",n=>this.labelColorScale(this.embedding[n].l)))}updateToggle(e){this.circleGroup.filter(n=>n.change==="off").selectAll("circle").attr("opacity",.1),this.circleGroup.filter(n=>n.change==="on").selectAll("circle").attr("opacity",.7),this.circleGroup.filter(n=>n.change==="default").selectAll("circle").attr("opacity",.7),e.size?this.contours.attr("fill-opacity",(n,r)=>e.has(r)?.5:0).attr("stroke-opacity",(n,r)=>e.has(r)?1:0):this.contours.attr("fill-opacity",.4).attr("stroke-opacity",.8)}}function hn(){return"".concat(Math.random().toString(36),"00000000000000000").replace(/[^a-z]+/g,"").slice(0,5)}function Ru(){var t=20,e="",n=2,r=!1,i="#343434",a="#343434",o=0,c=hn(),s=function(h){var l=h.append("defs").append("pattern").attr("id",c).attr("patternUnits","userSpaceOnUse").attr("width",t).attr("height",t);if(e&&l.append("rect").attr("width",t).attr("height",t).attr("fill",e),l.append("circle").attr("cx",t/2).attr("cy",t/2).attr("r",n).attr("fill",i).attr("stroke",a).attr("stroke-width",o),r)for(var f=0,m=[[0,0],[0,t],[t,0],[t,t]];f<m.length;f++){var d=m[f];l.append("circle").attr("cx",d[0]).attr("cy",d[1]).attr("r",n).attr("fill",i).attr("stroke",a).attr("stroke-width",o)}};return s.heavier=function(u){return n*=arguments.length===0?2:2*u,s},s.lighter=function(u){return n/=arguments.length===0?2:2*u,s},s.thinner=function(u){return t*=arguments.length===0?2:2*u,s},s.thicker=function(u){return t/=arguments.length===0?2:2*u,s},s.background=function(u){return e=u,s},s.size=function(u){return t=u,s},s.complement=function(u){return r=arguments.length===0?!0:u,s},s.radius=function(u){return n=u,s},s.fill=function(u){return i=u,s},s.stroke=function(u){return a=u,s},s.strokeWidth=function(u){return o=u,s},s.id=function(u){return arguments.length===0?c:(c=u,s)},s.url=function(){return"url(#".concat(c,")")},s}function Tu(t,e){if(t){if(typeof t=="string")return Un(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(t,e)}}function Un(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nu(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=Tu(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,c;return{s:function(){n=t[Symbol.iterator]()},n:function(){var s=n.next();return a=s.done,s},e:function(s){o=!0,c=s},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw c}}}}function Lu(){var t=20,e="#343434",n=2,r="",i=hn(),a=["diagonal"],o="auto",c=function(h){var l=t;switch(h){case"0/8":case"vertical":return"M ".concat(l/2,", 0 l 0, ").concat(l);case"1/8":return"M ".concat(-l/4,",").concat(l," l ").concat(l/2,",").concat(-l," M ").concat(l/4,",").concat(l," l ").concat(l/2,",").concat(-l," M ").concat(l*3/4,",").concat(l," l ").concat(l/2,",").concat(-l);case"2/8":case"diagonal":return"M 0,".concat(l," l ").concat(l,",").concat(-l," M ").concat(-l/4,",").concat(l/4," l ").concat(l/2,",").concat(-l/2," M ").concat(3/4*l,",").concat(5/4*l," l ").concat(l/2,",").concat(-l/2);case"3/8":return"M 0,".concat(3/4*l," l ").concat(l,",").concat(-l/2," M 0,").concat(l/4," l ").concat(l,",").concat(-l/2," M 0,").concat(l*5/4," l ").concat(l,",").concat(-l/2);case"4/8":case"horizontal":return"M 0,".concat(l/2," l ").concat(l,",0");case"5/8":return"M 0,".concat(-l/4," l ").concat(l,",").concat(l/2,"M 0,").concat(l/4," l ").concat(l,",").concat(l/2," M 0,").concat(l*3/4," l ").concat(l,",").concat(l/2);case"6/8":return"M 0,0 l ".concat(l,",").concat(l," M ").concat(-l/4,",").concat(3/4*l," l ").concat(l/2,",").concat(l/2," M ").concat(l*3/4,",").concat(-l/4," l ").concat(l/2,",").concat(l/2);case"7/8":return"M ".concat(-l/4,",0 l ").concat(l/2,",").concat(l," M ").concat(l/4,",0 l ").concat(l/2,",").concat(l," M ").concat(l*3/4,",0 l ").concat(l/2,",").concat(l);default:return"M ".concat(l/2,", 0 l 0, ").concat(l)}},s=function(h){var l=h.append("defs").append("pattern").attr("id",i).attr("patternUnits","userSpaceOnUse").attr("width",t).attr("height",t);r&&l.append("rect").attr("width",t).attr("height",t).attr("fill",r);var f=Nu(a),m;try{for(f.s();!(m=f.n()).done;){var d=m.value;l.append("path").attr("d",c(d)).attr("stroke-width",n).attr("shape-rendering",o).attr("stroke",e).attr("stroke-linecap","square")}}catch(R){f.e(R)}finally{f.f()}};return s.heavier=function(u){return n*=arguments.length===0?2:2*u,s},s.lighter=function(u){return n/=arguments.length===0?2:2*u,s},s.thinner=function(u){return t*=arguments.length===0?2:2*u,s},s.thicker=function(u){return t/=arguments.length===0?2:2*u,s},s.background=function(u){return r=u,s},s.size=function(u){return t=u,s},s.orientation=function(){for(var u=arguments.length,h=new Array(u),l=0;l<u;l++)h[l]=arguments[l];return arguments.length===0||(a=h),s},s.shapeRendering=function(u){return o=u,s},s.stroke=function(u){return e=u,s},s.strokeWidth=function(u){return n=u,s},s.id=function(u){return arguments.length===0?i:(i=u,s)},s.url=function(){return"url(#".concat(i,")")},s}function Ou(){var t=1,e=1,n=20,r="#343434",i=2,a="",o=function(m){return"M ".concat(m/4,",").concat(m*3/4,"l").concat(m/4,",").concat(-m/2,"l").concat(m/4,",").concat(m/2)},c=hn(),s="transparent",u="auto",h=function(m){var d=n;switch(m){case"squares":return"M ".concat(d/4," ").concat(d/4," l ").concat(d/2," 0 l 0 ").concat(d/2," l ").concat(-d/2," 0 Z");case"nylon":return"M 0 ".concat(d/4," l ").concat(d/4," 0 l 0 ").concat(-d/4," M ").concat(d*3/4," ").concat(d," l 0 ").concat(-d/4," l ").concat(d/4," 0 M ").concat(d/4," ").concat(d/2," l 0 ").concat(d/4," l ").concat(d/4," 0 M ").concat(d/2," ").concat(d/4," l ").concat(d/4," 0 l 0 ").concat(d/4);case"waves":return"M 0 ".concat(d/2," c ").concat(d/8," ").concat(-d/4," , ").concat(d*3/8," ").concat(-d/4," , ").concat(d/2," 0 c ").concat(d/8," ").concat(d/4," , ").concat(d*3/8," ").concat(d/4," , ").concat(d/2," 0 M ").concat(-d/2," ").concat(d/2," c ").concat(d/8," ").concat(d/4," , ").concat(d*3/8," ").concat(d/4," , ").concat(d/2," 0 M ").concat(d," ").concat(d/2," c ").concat(d/8," ").concat(-d/4," , ").concat(d*3/8," ").concat(-d/4," , ").concat(d/2," 0");case"woven":return"M ".concat(d/4,",").concat(d/4,"l").concat(d/2,",").concat(d/2,"M").concat(d*3/4,",").concat(d/4,"l").concat(d/2,",").concat(-d/2," M").concat(d/4,",").concat(d*3/4,"l").concat(-d/2,",").concat(d/2,"M").concat(d*3/4,",").concat(d*5/4,"l").concat(d/2,",").concat(-d/2," M").concat(-d/4,",").concat(d/4,"l").concat(d/2,",").concat(-d/2);case"crosses":return"M ".concat(d/4,",").concat(d/4,"l").concat(d/2,",").concat(d/2,"M").concat(d/4,",").concat(d*3/4,"l").concat(d/2,",").concat(-d/2);case"caps":return"M ".concat(d/4,",").concat(d*3/4,"l").concat(d/4,",").concat(-d/2,"l").concat(d/4,",").concat(d/2);case"hexagons":return t=3,e=Math.sqrt(3),"M ".concat(d,",0 l ").concat(d,",0 l ").concat(d/2,",").concat(d*Math.sqrt(3)/2," l ").concat(-d/2,",").concat(d*Math.sqrt(3)/2," l ").concat(-d,",0 l ").concat(-d/2,",").concat(-d*Math.sqrt(3)/2," Z M 0,").concat(d*Math.sqrt(3)/2," l ").concat(d/2,",0 M ").concat(3*d,",").concat(d*Math.sqrt(3)/2," l ").concat(-d/2,",0");default:return m(d)}},l=function(m){var d=h(o),R=m.append("defs").append("pattern").attr("id",c).attr("patternUnits","userSpaceOnUse").attr("width",n*t).attr("height",n*e);a&&R.append("rect").attr("width",n*t).attr("height",n*e).attr("fill",a),R.append("path").attr("d",d).attr("fill",s).attr("stroke",r).attr("stroke-width",i).attr("stroke-linecap","square").attr("shape-rendering",u)};return l.heavier=function(f){return i*=arguments.length===0?2:2*f,l},l.lighter=function(f){return i/=arguments.length===0?2:2*f,l},l.thinner=function(f){return n*=arguments.length===0?2:2*f,l},l.thicker=function(f){return n/=arguments.length===0?2:2*f,l},l.background=function(f){return a=f,l},l.shapeRendering=function(f){return u=f,l},l.size=function(f){return n=f,l},l.d=function(f){return o=f,l},l.fill=function(f){return s=f,l},l.stroke=function(f){return r=f,l},l.strokeWidth=function(f){return i=f,l},l.id=function(f){return arguments.length===0?c:(c=f,l)},l.url=function(){return"url(#".concat(c,")")},l}var pt={circles:Ru,lines:Lu,paths:Ou},Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qe={},zu={get exports(){return Qe},set exports(t){Qe=t}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(Iu,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},c=0,s={parse:function(g,p){var x=(p=p||{}).dynamicTyping||!1;if(N(x)&&(p.dynamicTypingFunction=x,x={}),p.dynamicTyping=x,p.transform=!!N(p.transform)&&p.transform,p.worker&&s.WORKERS_SUPPORTED){var w=function(){if(!s.WORKERS_SUPPORTED)return!1;var A=(v=r.URL||r.webkitURL||null,k=n.toString(),s.BLOB_URL||(s.BLOB_URL=v.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",k,")();"],{type:"text/javascript"})))),C=new r.Worker(A),v,k;return C.onmessage=B,C.id=c++,o[C.id]=C}();return w.userStep=p.step,w.userChunk=p.chunk,w.userComplete=p.complete,w.userError=p.error,p.step=N(p.step),p.chunk=N(p.chunk),p.complete=N(p.complete),p.error=N(p.error),delete p.worker,void w.postMessage({input:g,config:p,workerId:w.id})}var M=null;return s.NODE_STREAM_INPUT,typeof g=="string"?(g=function(A){return A.charCodeAt(0)===65279?A.slice(1):A}(g),M=p.download?new l(p):new m(p)):g.readable===!0&&N(g.read)&&N(g.on)?M=new d(p):(r.File&&g instanceof File||g instanceof Object)&&(M=new f(p)),M.stream(g)},unparse:function(g,p){var x=!1,w=!0,M=",",A=`\r
`,C='"',v=C+C,k=!1,_=null,b=!1;(function(){if(typeof p=="object"){if(typeof p.delimiter!="string"||s.BAD_DELIMITERS.filter(function(S){return p.delimiter.indexOf(S)!==-1}).length||(M=p.delimiter),(typeof p.quotes=="boolean"||typeof p.quotes=="function"||Array.isArray(p.quotes))&&(x=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(k=p.skipEmptyLines),typeof p.newline=="string"&&(A=p.newline),typeof p.quoteChar=="string"&&(C=p.quoteChar),typeof p.header=="boolean"&&(w=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");_=p.columns}p.escapeChar!==void 0&&(v=p.escapeChar+C),(typeof p.escapeFormulae=="boolean"||p.escapeFormulae instanceof RegExp)&&(b=p.escapeFormulae instanceof RegExp?p.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var y=new RegExp(L(C),"g");if(typeof g=="string"&&(g=JSON.parse(g)),Array.isArray(g)){if(!g.length||Array.isArray(g[0]))return E(null,g,k);if(typeof g[0]=="object")return E(_||Object.keys(g[0]),g,k)}else if(typeof g=="object")return typeof g.data=="string"&&(g.data=JSON.parse(g.data)),Array.isArray(g.data)&&(g.fields||(g.fields=g.meta&&g.meta.fields||_),g.fields||(g.fields=Array.isArray(g.data[0])?g.fields:typeof g.data[0]=="object"?Object.keys(g.data[0]):[]),Array.isArray(g.data[0])||typeof g.data[0]=="object"||(g.data=[g.data])),E(g.fields||[],g.data||[],k);throw new Error("Unable to serialize unrecognized input");function E(S,O,K){var F="";typeof S=="string"&&(S=JSON.parse(S)),typeof O=="string"&&(O=JSON.parse(O));var j=Array.isArray(S)&&0<S.length,U=!Array.isArray(O[0]);if(j&&w){for(var et=0;et<S.length;et++)0<et&&(F+=M),F+=T(S[et],et);0<O.length&&(F+=A)}for(var $=0;$<O.length;$++){var D=j?S.length:O[$].length,G=!1,tt=j?Object.keys(O[$]).length===0:O[$].length===0;if(K&&!j&&(G=K==="greedy"?O[$].join("").trim()==="":O[$].length===1&&O[$][0].length===0),K==="greedy"&&j){for(var q=[],nt=0;nt<D;nt++){var Q=U?S[nt]:nt;q.push(O[$][Q])}G=q.join("").trim()===""}if(!G){for(var V=0;V<D;V++){0<V&&!tt&&(F+=M);var ct=j&&U?S[V]:V;F+=T(O[$][ct],V)}$<O.length-1&&(!K||0<D&&!tt)&&(F+=A)}}return F}function T(S,O){if(S==null)return"";if(S.constructor===Date)return JSON.stringify(S).slice(1,25);var K=!1;b&&typeof S=="string"&&b.test(S)&&(S="'"+S,K=!0);var F=S.toString().replace(y,v);return(K=K||x===!0||typeof x=="function"&&x(S,O)||Array.isArray(x)&&x[O]||function(j,U){for(var et=0;et<U.length;et++)if(-1<j.indexOf(U[et]))return!0;return!1}(F,s.BAD_DELIMITERS)||-1<F.indexOf(M)||F.charAt(0)===" "||F.charAt(F.length-1)===" ")?C+F+C:F}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!i&&!!r.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=H,s.ParserHandle=R,s.NetworkStreamer=l,s.FileStreamer=f,s.StringStreamer=m,s.ReadableStreamStreamer=d,r.jQuery){var u=r.jQuery;u.fn.parse=function(g){var p=g.config||{},x=[];return this.each(function(A){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var C=0;C<this.files.length;C++)x.push({file:this.files[C],inputElem:this,instanceConfig:u.extend({},p)})}),w(),this;function w(){if(x.length!==0){var A,C,v,k,_=x[0];if(N(g.before)){var b=g.before(_.file,_.inputElem);if(typeof b=="object"){if(b.action==="abort")return A="AbortError",C=_.file,v=_.inputElem,k=b.reason,void(N(g.error)&&g.error({name:A},C,v,k));if(b.action==="skip")return void M();typeof b.config=="object"&&(_.instanceConfig=u.extend(_.instanceConfig,b.config))}else if(b==="skip")return void M()}var y=_.instanceConfig.complete;_.instanceConfig.complete=function(E){N(y)&&y(E,_.file,_.inputElem),M()},s.parse(_.file,_.instanceConfig)}else N(g.complete)&&g.complete()}function M(){x.splice(0,1),w()}}}function h(g){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(p){var x=I(p);x.chunkSize=parseInt(x.chunkSize),p.step||p.chunk||(x.chunkSize=null),this._handle=new R(x),(this._handle.streamer=this)._config=x}.call(this,g),this.parseChunk=function(p,x){if(this.isFirstChunk&&N(this._config.beforeFirstChunk)){var w=this._config.beforeFirstChunk(p);w!==void 0&&(p=w)}this.isFirstChunk=!1,this._halted=!1;var M=this._partialLine+p;this._partialLine="";var A=this._handle.parse(M,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var C=A.meta.cursor;this._finished||(this._partialLine=M.substring(C-this._baseIndex),this._baseIndex=C),A&&A.data&&(this._rowCount+=A.data.length);var v=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)r.postMessage({results:A,workerId:s.WORKER_ID,finished:v});else if(N(this._config.chunk)&&!x){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);A=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!v||!N(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(p){N(this._config.error)?this._config.error(p):a&&this._config.error&&r.postMessage({workerId:s.WORKER_ID,error:p,finished:!1})}}function l(g){var p;(g=g||{}).chunkSize||(g.chunkSize=s.RemoteChunkSize),h.call(this,g),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),i||(p.onload=J(this._chunkLoaded,this),p.onerror=J(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x=this._config.downloadRequestHeaders;for(var w in x)p.setRequestHeader(w,x[w])}if(this._config.chunkSize){var M=this._start+this._config.chunkSize-1;p.setRequestHeader("Range","bytes="+this._start+"-"+M)}try{p.send(this._config.downloadRequestBody)}catch(A){this._chunkError(A.message)}i&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:p.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(x){var w=x.getResponseHeader("Content-Range");return w===null?-1:parseInt(w.substring(w.lastIndexOf("/")+1))}(p),this.parseChunk(p.responseText)))},this._chunkError=function(x){var w=p.statusText||x;this._sendError(new Error(w))}}function f(g){var p,x;(g=g||{}).chunkSize||(g.chunkSize=s.LocalChunkSize),h.call(this,g);var w=typeof FileReader<"u";this.stream=function(M){this._input=M,x=M.slice||M.webkitSlice||M.mozSlice,w?((p=new FileReader).onload=J(this._chunkLoaded,this),p.onerror=J(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input;if(this._config.chunkSize){var A=Math.min(this._start+this._config.chunkSize,this._input.size);M=x.call(M,this._start,A)}var C=p.readAsText(M,this._config.encoding);w||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(p.error)}}function m(g){var p;h.call(this,g=g||{}),this.stream=function(x){return p=x,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var x,w=this._config.chunkSize;return w?(x=p.substring(0,w),p=p.substring(w)):(x=p,p=""),this._finished=!p,this.parseChunk(x)}}}function d(g){h.call(this,g=g||{});var p=[],x=!0,w=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):x=!0},this._streamData=J(function(M){try{p.push(typeof M=="string"?M:M.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(A){this._streamError(A)}},this),this._streamError=J(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=J(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function R(g){var p,x,w,M=Math.pow(2,53),A=-M,C=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,v=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,k=this,_=0,b=0,y=!1,E=!1,T=[],S={data:[],errors:[],meta:{}};if(N(g.step)){var O=g.step;g.step=function($){if(S=$,j())F();else{if(F(),S.data.length===0)return;_+=$.data.length,g.preview&&_>g.preview?x.abort():(S.data=S.data[0],O(S,k))}}}function K($){return g.skipEmptyLines==="greedy"?$.join("").trim()==="":$.length===1&&$[0].length===0}function F(){return S&&w&&(et("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),w=!1),g.skipEmptyLines&&(S.data=S.data.filter(function($){return!K($)})),j()&&function(){if(!S)return;function $(G,tt){N(g.transformHeader)&&(G=g.transformHeader(G,tt)),T.push(G)}if(Array.isArray(S.data[0])){for(var D=0;j()&&D<S.data.length;D++)S.data[D].forEach($);S.data.splice(0,1)}else S.data.forEach($)}(),function(){if(!S||!g.header&&!g.dynamicTyping&&!g.transform)return S;function $(G,tt){var q,nt=g.header?{}:[];for(q=0;q<G.length;q++){var Q=q,V=G[q];g.header&&(Q=q>=T.length?"__parsed_extra":T[q]),g.transform&&(V=g.transform(V,Q)),V=U(Q,V),Q==="__parsed_extra"?(nt[Q]=nt[Q]||[],nt[Q].push(V)):nt[Q]=V}return g.header&&(q>T.length?et("FieldMismatch","TooManyFields","Too many fields: expected "+T.length+" fields but parsed "+q,b+tt):q<T.length&&et("FieldMismatch","TooFewFields","Too few fields: expected "+T.length+" fields but parsed "+q,b+tt)),nt}var D=1;return!S.data.length||Array.isArray(S.data[0])?(S.data=S.data.map($),D=S.data.length):S.data=$(S.data,0),g.header&&S.meta&&(S.meta.fields=T),b+=D,S}()}function j(){return g.header&&T.length===0}function U($,D){return G=$,g.dynamicTypingFunction&&g.dynamicTyping[G]===void 0&&(g.dynamicTyping[G]=g.dynamicTypingFunction(G)),(g.dynamicTyping[G]||g.dynamicTyping)===!0?D==="true"||D==="TRUE"||D!=="false"&&D!=="FALSE"&&(function(tt){if(C.test(tt)){var q=parseFloat(tt);if(A<q&&q<M)return!0}return!1}(D)?parseFloat(D):v.test(D)?new Date(D):D===""?null:D):D;var G}function et($,D,G,tt){var q={type:$,code:D,message:G};tt!==void 0&&(q.row=tt),S.errors.push(q)}this.parse=function($,D,G){var tt=g.quoteChar||'"';if(g.newline||(g.newline=function(Q,V){Q=Q.substring(0,1048576);var ct=new RegExp(L(V)+"([^]*?)"+L(V),"gm"),at=(Q=Q.replace(ct,"")).split("\r"),dt=Q.split(`
`),yt=1<dt.length&&dt[0].length<at[0].length;if(at.length===1||yt)return`
`;for(var st=0,X=0;X<at.length;X++)at[X][0]===`
`&&st++;return st>=at.length/2?`\r
`:"\r"}($,tt)),w=!1,g.delimiter)N(g.delimiter)&&(g.delimiter=g.delimiter($),S.meta.delimiter=g.delimiter);else{var q=function(Q,V,ct,at,dt){var yt,st,X,Z;dt=dt||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var St=0;St<dt.length;St++){var P=dt[St],Ot=0,_t=0,At=0;X=void 0;for(var xt=new H({comments:at,delimiter:P,newline:V,preview:10}).parse(Q),bt=0;bt<xt.data.length;bt++)if(ct&&K(xt.data[bt]))At++;else{var kt=xt.data[bt].length;_t+=kt,X!==void 0?0<kt&&(Ot+=Math.abs(kt-X),X=kt):X=kt}0<xt.data.length&&(_t/=xt.data.length-At),(st===void 0||Ot<=st)&&(Z===void 0||Z<_t)&&1.99<_t&&(st=Ot,yt=P,Z=_t)}return{successful:!!(g.delimiter=yt),bestDelimiter:yt}}($,g.newline,g.skipEmptyLines,g.comments,g.delimitersToGuess);q.successful?g.delimiter=q.bestDelimiter:(w=!0,g.delimiter=s.DefaultDelimiter),S.meta.delimiter=g.delimiter}var nt=I(g);return g.preview&&g.header&&nt.preview++,p=$,x=new H(nt),S=x.parse(p,D,G),F(),y?{meta:{paused:!0}}:S||{meta:{paused:!1}}},this.paused=function(){return y},this.pause=function(){y=!0,x.abort(),p=N(g.chunk)?"":p.substring(x.getCharIndex())},this.resume=function(){k.streamer._halted?(y=!1,k.streamer.parseChunk(p,!0)):setTimeout(k.resume,3)},this.aborted=function(){return E},this.abort=function(){E=!0,x.abort(),S.meta.aborted=!0,N(g.complete)&&g.complete(S),p=""}}function L(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(g){var p,x=(g=g||{}).delimiter,w=g.newline,M=g.comments,A=g.step,C=g.preview,v=g.fastMode,k=p=g.quoteChar===void 0||g.quoteChar===null?'"':g.quoteChar;if(g.escapeChar!==void 0&&(k=g.escapeChar),(typeof x!="string"||-1<s.BAD_DELIMITERS.indexOf(x))&&(x=","),M===x)throw new Error("Comment character same as delimiter");M===!0?M="#":(typeof M!="string"||-1<s.BAD_DELIMITERS.indexOf(M))&&(M=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var _=0,b=!1;this.parse=function(y,E,T){if(typeof y!="string")throw new Error("Input must be a string");var S=y.length,O=x.length,K=w.length,F=M.length,j=N(A),U=[],et=[],$=[],D=_=0;if(!y)return ot();if(g.header&&!E){var G=y.split(w)[0].split(x),tt=[],q={},nt=!1;for(var Q in G){var V=G[Q];N(g.transformHeader)&&(V=g.transformHeader(V,Q));var ct=V,at=q[V]||0;for(0<at&&(nt=!0,ct=V+"_"+at),q[V]=at+1;tt.includes(ct);)ct=ct+"_"+at;tt.push(ct)}if(nt){var dt=y.split(w);dt[0]=tt.join(x),y=dt.join(w)}}if(v||v!==!1&&y.indexOf(p)===-1){for(var yt=y.split(w),st=0;st<yt.length;st++){if($=yt[st],_+=$.length,st!==yt.length-1)_+=w.length;else if(T)return ot();if(!M||$.substring(0,F)!==M){if(j){if(U=[],At($.split(x)),Jt(),b)return ot()}else At($.split(x));if(C&&C<=st)return U=U.slice(0,C),ot(!0)}}return ot()}for(var X=y.indexOf(x,_),Z=y.indexOf(w,_),St=new RegExp(L(k)+L(p),"g"),P=y.indexOf(p,_);;)if(y[_]!==p)if(M&&$.length===0&&y.substring(_,_+F)===M){if(Z===-1)return ot();_=Z+K,Z=y.indexOf(w,_),X=y.indexOf(x,_)}else if(X!==-1&&(X<Z||Z===-1))$.push(y.substring(_,X)),_=X+O,X=y.indexOf(x,_);else{if(Z===-1)break;if($.push(y.substring(_,Z)),kt(Z+K),j&&(Jt(),b))return ot();if(C&&U.length>=C)return ot(!0)}else for(P=_,_++;;){if((P=y.indexOf(p,P+1))===-1)return T||et.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:U.length,index:_}),bt();if(P===S-1)return bt(y.substring(_,P).replace(St,p));if(p!==k||y[P+1]!==k){if(p===k||P===0||y[P-1]!==k){X!==-1&&X<P+1&&(X=y.indexOf(x,P+1)),Z!==-1&&Z<P+1&&(Z=y.indexOf(w,P+1));var Ot=xt(Z===-1?X:Math.min(X,Z));if(y.substr(P+1+Ot,O)===x){$.push(y.substring(_,P).replace(St,p)),y[_=P+1+Ot+O]!==p&&(P=y.indexOf(p,_)),X=y.indexOf(x,_),Z=y.indexOf(w,_);break}var _t=xt(Z);if(y.substring(P+1+_t,P+1+_t+K)===w){if($.push(y.substring(_,P).replace(St,p)),kt(P+1+_t+K),X=y.indexOf(x,_),P=y.indexOf(p,_),j&&(Jt(),b))return ot();if(C&&U.length>=C)return ot(!0);break}et.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:U.length,index:_}),P++}}else P++}return bt();function At(ut){U.push(ut),D=_}function xt(ut){var fn=0;if(ut!==-1){var $e=y.substring(P+1,ut);$e&&$e.trim()===""&&(fn=$e.length)}return fn}function bt(ut){return T||(ut===void 0&&(ut=y.substring(_)),$.push(ut),_=S,At($),j&&Jt()),ot()}function kt(ut){_=ut,At($),$=[],Z=y.indexOf(w,_)}function ot(ut){return{data:U,errors:et,meta:{delimiter:x,linebreak:w,aborted:b,truncated:!!ut,cursor:D+(E||0)}}}function Jt(){A(ot()),U=[],et=[]}},this.abort=function(){b=!0},this.getCharIndex=function(){return _}}function B(g){var p=g.data,x=o[p.workerId],w=!1;if(p.error)x.userError(p.error,p.file);else if(p.results&&p.results.data){var M={abort:function(){w=!0,z(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(N(x.userStep)){for(var A=0;A<p.results.data.length&&(x.userStep({data:p.results.data[A],errors:p.results.errors,meta:p.results.meta},M),!w);A++);delete p.results}else N(x.userChunk)&&(x.userChunk(p.results,M,p.file),delete p.results)}p.finished&&!w&&z(p.workerId,p.results)}function z(g,p){var x=o[g];N(x.userComplete)&&x.userComplete(p),x.terminate(),delete o[g]}function Y(){throw new Error("Not implemented.")}function I(g){if(typeof g!="object"||g===null)return g;var p=Array.isArray(g)?[]:{};for(var x in g)p[x]=I(g[x]);return p}function J(g,p){return function(){g.apply(p,arguments)}}function N(g){return typeof g=="function"}return a&&(r.onmessage=function(g){var p=g.data;if(s.WORKER_ID===void 0&&p&&(s.WORKER_ID=p.workerId),typeof p.input=="string")r.postMessage({workerId:s.WORKER_ID,results:s.parse(p.input,p.config),finished:!0});else if(r.File&&p.input instanceof File||p.input instanceof Object){var x=s.parse(p.input,p.config);x&&r.postMessage({workerId:s.WORKER_ID,results:x,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(f.prototype=Object.create(h.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(d.prototype=Object.create(h.prototype)).constructor=d,s})})(zu);const Du=Qe,Fu={base:"/ProjectionEnsemble/"};let Tt,jt,Ee,Ht,Mt,Ze;Tt={scatterplots:[],brushedSet:new Set,add(t,e,n,r,i){let a=new Cu(this.scatterplots.length,".scatterplot-section",288,288,t,e,this.brushedSet,i,Ht);return a.initialize(n,r).updateView().changeMode("dualMode"),this.scatterplots.push(a),a},updateView(){this.scatterplots.forEach(t=>{t.updateView()})},changeMode(t){this.scatterplots.forEach(e=>{e.changeMode(t)})},updateToggle(t){this.scatterplots.forEach(e=>{e.updateToggle(t)})},mouseOut(t,e){this.scatterplots.forEach(n=>{n.mouseOut(t,e)})},length(){return this.scatterplots.length},reset(){this.scatterplots.forEach(t=>{t.div.remove()}),this.scatterplots=[],this.brushedSet.clear()}};jt={sankey:new $u("#fsView",280,380),add(t,e){this.sankey.initialize(t,e,Ht).update()},updateView(){this.sankey.update()},hover(t,e){this.sankey.hover(t,e)},updateToggle(t){this.sankey.updateToggle(t)},mouseOut(){this.sankey.mouseOut()},reset(){this.sankey.div.remove()}};Ee={heatmap:new lu("#hpramView",260,190),add(t,e){this.heatmap.initialize(Ht,t).update(e).highlightCell()},updateView(){this.heatmap.highlightCell()},reset(){this.heatmap.div.remove()}};Mt={labels:[],labelSet:[],fsmResult:[],subgraphs:[],contourData:[],groupedData:[],add(t){this.labels=t.dr_results[0].embedding.map(e=>e.l),this.labelSet=[...new Set(this.labels)].sort(),this.fsmResult=t.fsm_results,this.kRange=[...new Set(this.fsmResult.map(e=>e.k))],this.k=this.kRange[4],this.minSupport=7,this.updateHyperparams()},updateHyperparams(t,e){return this.k=t||this.k,this.minSupport=e||this.minSupport,this.fsmResult.forEach(n=>{n.ms==this.minSupport&&n.k==this.k&&(this.contourData=n.coords,this.subgraphs=n.subgs)}),this.updatePointGroup(),this},updatePointGroup(){let t={},e=[...new Array(this.labels.length)].map((n,r)=>r);return this.groupedData=[],this.subgraphs.forEach((n,r)=>{e=e.filter(i=>!n.includes(i)),t={},n.forEach(i=>{t[this.labels[i]]?t[this.labels[i]].push(i):t[this.labels[i]]=[i]}),Object.keys(t).forEach(i=>{this.groupedData.push({FS:r,label:i,points:t[i],state:"default",change:""})})}),t={},e.forEach(n=>{t[this.labels[n]]?t[this.labels[n]].push(n):t[this.labels[n]]=[n]}),Object.keys(t).forEach(n=>{this.groupedData.push({FS:"outliers",label:n,points:t[n],state:"default",change:""})}),this},toggleFS(t,e){e.has(t)?(e.size===1?this.groupedData.forEach(n=>{n.change="default"}):this.groupedData.forEach(n=>{n.FS===t&&!e.has(n.label)?n.change="off":n.change=""}),e.delete(t)):(e.size?t==="remainders"?this.groupedData.forEach(n=>{n.FS!=="outliers"&n.FS>=10?n.change="off":n.change=""}):this.groupedData.forEach(n=>{n.FS===t?n.change="on":n.change=""}):t==="remainders"?this.groupedData.forEach(n=>{n.FS!=="outliers"&n.FS>=10?n.change="on":n.change="off"}):this.groupedData.forEach(n=>{n.FS===t?n.change="on":n.change="off"}),e.add(t))},toggleClass(t,e){e.has(t)?(e.size===1?this.groupedData.forEach(n=>{n.change="default"}):this.groupedData.forEach(n=>{n.label===t&&!e.has(n.FS)?n.change="off":n.change=""}),e.delete(t)):(e.size?this.groupedData.forEach(n=>{n.label===t?n.change="on":n.change=""}):this.groupedData.forEach(n=>{n.label===t?n.change="on":n.change="off"}),e.add(t))},completeChange(){this.groupedData.forEach(t=>{t.state=t.change,t.change=""})}};Ht={onSet:new Set,clickCell:function(t){return this.updateViews(t.k,t.ms),this},updateViews:function(t,e){return Mt.updateHyperparams(t,e),Tt.updateView(),jt.updateView(),Ee.updateView(),this.onSet.clear(),this},changeMode:function(t){return Tt.changeMode(t),this},linkViews:function(t,e){return t==="FS"?Mt.toggleFS(e,this.onSet):Mt.toggleClass(e,this.onSet),Tt.updateToggle(this.onSet),jt.updateToggle(this.onSet),Mt.completeChange(),this}};Ze={textures:[pt.lines().orientation("horizontal").size(7).strokeWidth(2),pt.lines().orientation("vertical").size(6).strokeWidth(1.5),pt.lines().thicker(),pt.lines().orientation("6/8").size(8).strokeWidth(3),pt.paths().d("squares").thicker(),pt.paths().d("crosses").thicker(),pt.paths().d("caps").thicker(),pt.paths().d("waves").thicker(),pt.lines().orientation("horizontal").stroke("white").size(8).strokeWidth(2).background("rgb(100,100,100)"),pt.lines().orientation("vertical").stroke("white").size(8).strokeWidth(2).background("rgb(100,100,100)")],getTexture(t){return this.textures[t]},length(){return this.textures.length},callTextures(t){this.textures.forEach(e=>t(e))}};async function Pu(t,e){let n,r;qu(),await Lo(`${Fu.base}/data/${t}/${e}.json`).then(i=>{n=i.dr_results,r=i.fsm_results,n.forEach(a=>{a.embedding=Du.parse(a.embedding,{header:!0}).data}),Mt.add(i),n.forEach(a=>{Tt.add(e,a.hprams,a.embedding,Mt,Ze)}),jt.add(Mt,Ze),Ee.add(r,n[0].embedding.length)})}function qu(){Tt.length()&&(Tt.reset(),jt.reset(),Ee.reset())}let Gn,Xn;async function Wn(){Yn(!0),Gn=W("#dataTitle").property("value"),Xn=W("#method").property("value"),await Pu(Gn,Xn),Yn(!1)}function Hu(t){he("#modeBtns").each(function(){W(this).classed("disabled",!0),W(this).property("value")===t?W(this).classed("btn-primary",!0).classed("btn-outline-primary",!1):W(this).classed("btn-primary",!1).classed("btn-outline-primary",!0)}),Ht.changeMode(t),he("#modeBtns").each(function(){W(this).classed("disabled",!1)})}function Vu(){W(`#${W(this).property("id")}Value`).text(W(this).property("value")),Ht.updateViews()}function Yn(t){W("#generateBtn").classed("disabled",t).selectAll("span").remove(),t?W("#generateBtn").append("span").attr("class","spinner-border spinner-border-sm").attr("role","status").attr("aria-hidden","true"):W("#generateBtn").append("span").text("Generate")}function Bu(){W("#generateBtn").on("click",Wn),he("#modeBtns").each(function(){W(this).on("click",()=>{Hu(W(this).property("value"))})}),he(".hpramRange").each(function(){W(this).on("change",Vu)}),Wn()}Bu();
