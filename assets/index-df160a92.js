(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function he(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mr(t){let e,n,r;t.length!==2?(e=he,n=(u,o)=>he(t(u),o),r=(u,o)=>t(u)-o):(e=t===he||t===Jr?t:jr,n=t,r=t);function i(u,o,l=0,h=u.length){if(l<h){if(e(o,o)!==0)return h;do{const c=l+h>>>1;n(u[c],o)<0?l=c+1:h=c}while(l<h)}return l}function s(u,o,l=0,h=u.length){if(l<h){if(e(o,o)!==0)return h;do{const c=l+h>>>1;n(u[c],o)<=0?l=c+1:h=c}while(l<h)}return l}function a(u,o,l=0,h=u.length){const c=i(u,o,l,h-1);return c>l&&r(u[c-1],o)>-r(u[c],o)?c-1:c}return{left:i,center:a,right:s}}function jr(){return 0}function ti(t){return t===null?NaN:+t}const ei=mr(he),ni=ei.right;mr(ti).center;const ri=ni;class Cn extends Map{constructor(e,n=ai){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Nn(this,e))}has(e){return super.has(Nn(this,e))}set(e,n){return super.set(ii(this,e),n)}delete(e){return super.delete(si(this,e))}}function Nn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ii({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function si({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ai(t){return t!==null&&typeof t=="object"?t.valueOf():t}const oi=Math.sqrt(50),ui=Math.sqrt(10),li=Math.sqrt(2);function ye(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=oi?10:s>=ui?5:s>=li?2:1;let u,o,l;return i<0?(l=Math.pow(10,-i)/a,u=Math.round(t*l),o=Math.round(e*l),u/l<t&&++u,o/l>e&&--o,l=-l):(l=Math.pow(10,i)*a,u=Math.round(t/l),o=Math.round(e/l),u*l<t&&++u,o*l>e&&--o),o<u&&.5<=n&&n<2?ye(t,e,n*2):[u,o,l]}function ci(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?ye(e,t,n):ye(t,e,n);if(!(s>=i))return[];const u=s-i+1,o=new Array(u);if(r)if(a<0)for(let l=0;l<u;++l)o[l]=(s-l)/-a;else for(let l=0;l<u;++l)o[l]=(s-l)*a;else if(a<0)for(let l=0;l<u;++l)o[l]=(i+l)/-a;else for(let l=0;l<u;++l)o[l]=(i+l)*a;return o}function Ge(t,e,n){return e=+e,t=+t,n=+n,ye(t,e,n)[2]}function hi(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ge(e,t,n):Ge(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function fi(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function di(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function pi(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function gi(t){return t}var Ie=1,Fe=2,Ke=3,Gt=4,Tn=1e-6;function mi(t){return"translate("+t+",0)"}function yi(t){return"translate(0,"+t+")"}function _i(t){return e=>+t(e)}function vi(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function wi(){return!this.__axis}function yr(t,e){var n=[],r=null,i=null,s=6,a=6,u=3,o=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Ie||t===Gt?-1:1,h=t===Gt||t===Fe?"x":"y",c=t===Ie||t===Ke?mi:yi;function f(_){var g=r??(e.ticks?e.ticks.apply(e,n):e.domain()),P=i??(e.tickFormat?e.tickFormat.apply(e,n):gi),b=Math.max(s,0)+u,C=e.range(),T=+C[0]+o,$=+C[C.length-1]+o,z=(e.bandwidth?vi:_i)(e.copy(),o),O=_.selection?_.selection():_,B=O.selectAll(".domain").data([null]),D=O.selectAll(".tick").data(g,e).order(),p=D.exit(),d=D.enter().append("g").attr("class","tick"),x=D.select("line"),w=D.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(d),x=x.merge(d.append("line").attr("stroke","currentColor").attr(h+"2",l*s)),w=w.merge(d.append("text").attr("fill","currentColor").attr(h,l*b).attr("dy",t===Ie?"0em":t===Ke?"0.71em":"0.32em")),_!==O&&(B=B.transition(_),D=D.transition(_),x=x.transition(_),w=w.transition(_),p=p.transition(_).attr("opacity",Tn).attr("transform",function(A){return isFinite(A=z(A))?c(A+o):this.getAttribute("transform")}),d.attr("opacity",Tn).attr("transform",function(A){var E=this.parentNode.__axis;return c((E&&isFinite(E=E(A))?E:z(A))+o)})),p.remove(),B.attr("d",t===Gt||t===Fe?a?"M"+l*a+","+T+"H"+o+"V"+$+"H"+l*a:"M"+o+","+T+"V"+$:a?"M"+T+","+l*a+"V"+o+"H"+$+"V"+l*a:"M"+T+","+o+"H"+$),D.attr("opacity",1).attr("transform",function(A){return c(z(A)+o)}),x.attr(h+"2",l*s),w.attr(h,l*b).text(P),O.filter(wi).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Fe?"start":t===Gt?"end":"middle"),O.each(function(){this.__axis=z})}return f.scale=function(_){return arguments.length?(e=_,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),f):n.slice()},f.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),f):r&&r.slice()},f.tickFormat=function(_){return arguments.length?(i=_,f):i},f.tickSize=function(_){return arguments.length?(s=a=+_,f):s},f.tickSizeInner=function(_){return arguments.length?(s=+_,f):s},f.tickSizeOuter=function(_){return arguments.length?(a=+_,f):a},f.tickPadding=function(_){return arguments.length?(u=+_,f):u},f.offset=function(_){return arguments.length?(o=+_,f):o},f}function xi(t){return yr(Ke,t)}function bi(t){return yr(Gt,t)}var ki={value:()=>{}};function mn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fe(n)}function fe(t){this._=t}function Mi(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fe.prototype=mn.prototype={constructor:fe,on:function(t,e){var n=this._,r=Mi(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=Si(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=Rn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Rn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new fe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Si(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Rn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ki,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Qe="http://www.w3.org/1999/xhtml";const Ln={svg:"http://www.w3.org/2000/svg",xhtml:Qe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ne(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ln.hasOwnProperty(e)?{space:Ln[e],local:t}:t}function Ai(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Qe&&e.documentElement.namespaceURI===Qe?e.createElement(t):e.createElementNS(n,t)}}function Ei(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function _r(t){var e=Ne(t);return(e.local?Ei:Ai)(e)}function $i(){}function yn(t){return t==null?$i:function(){return this.querySelector(t)}}function Ci(t){typeof t!="function"&&(t=yn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=new Array(a),o,l,h=0;h<a;++h)(o=s[h])&&(l=t.call(o,o.__data__,h,s))&&("__data__"in o&&(l.__data__=o.__data__),u[h]=l);return new lt(r,this._parents)}function vr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ni(){return[]}function wr(t){return t==null?Ni:function(){return this.querySelectorAll(t)}}function Ti(t){return function(){return vr(t.apply(this,arguments))}}function Ri(t){typeof t=="function"?t=Ti(t):t=wr(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],u=a.length,o,l=0;l<u;++l)(o=a[l])&&(r.push(t.call(o,o.__data__,l,a)),i.push(o));return new lt(r,i)}function xr(t){return function(){return this.matches(t)}}function br(t){return function(e){return e.matches(t)}}var Li=Array.prototype.find;function Oi(t){return function(){return Li.call(this.children,t)}}function zi(){return this.firstElementChild}function Ii(t){return this.select(t==null?zi:Oi(typeof t=="function"?t:br(t)))}var Fi=Array.prototype.filter;function Di(){return Array.from(this.children)}function Pi(t){return function(){return Fi.call(this.children,t)}}function Hi(t){return this.selectAll(t==null?Di:Pi(typeof t=="function"?t:br(t)))}function qi(t){typeof t!="function"&&(t=xr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=[],o,l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new lt(r,this._parents)}function kr(t){return new Array(t.length)}function Vi(){return new lt(this._enter||this._groups.map(kr),this._parents)}function _e(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_e.prototype={constructor:_e,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Bi(t){return function(){return t}}function Ui(t,e,n,r,i,s){for(var a=0,u,o=e.length,l=s.length;a<l;++a)(u=e[a])?(u.__data__=s[a],r[a]=u):n[a]=new _e(t,s[a]);for(;a<o;++a)(u=e[a])&&(i[a]=u)}function Xi(t,e,n,r,i,s,a){var u,o,l=new Map,h=e.length,c=s.length,f=new Array(h),_;for(u=0;u<h;++u)(o=e[u])&&(f[u]=_=a.call(o,o.__data__,u,e)+"",l.has(_)?i[u]=o:l.set(_,o));for(u=0;u<c;++u)_=a.call(t,s[u],u,s)+"",(o=l.get(_))?(r[u]=o,o.__data__=s[u],l.delete(_)):n[u]=new _e(t,s[u]);for(u=0;u<h;++u)(o=e[u])&&l.get(f[u])===o&&(i[u]=o)}function Wi(t){return t.__data__}function Yi(t,e){if(!arguments.length)return Array.from(this,Wi);var n=e?Xi:Ui,r=this._parents,i=this._groups;typeof t!="function"&&(t=Bi(t));for(var s=i.length,a=new Array(s),u=new Array(s),o=new Array(s),l=0;l<s;++l){var h=r[l],c=i[l],f=c.length,_=Gi(t.call(h,h&&h.__data__,l,r)),g=_.length,P=u[l]=new Array(g),b=a[l]=new Array(g),C=o[l]=new Array(f);n(h,c,P,b,C,_,e);for(var T=0,$=0,z,O;T<g;++T)if(z=P[T]){for(T>=$&&($=T+1);!(O=b[$])&&++$<g;);z._next=O||null}}return a=new lt(a,r),a._enter=u,a._exit=o,a}function Gi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ki(){return new lt(this._exit||this._groups.map(kr),this._parents)}function Qi(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Zi(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),u=new Array(i),o=0;o<a;++o)for(var l=n[o],h=r[o],c=l.length,f=u[o]=new Array(c),_,g=0;g<c;++g)(_=l[g]||h[g])&&(f[g]=_);for(;o<i;++o)u[o]=n[o];return new lt(u,this._parents)}function Ji(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function ji(t){t||(t=ts);function e(c,f){return c&&f?t(c.__data__,f.__data__):!c-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],u=a.length,o=i[s]=new Array(u),l,h=0;h<u;++h)(l=a[h])&&(o[h]=l);o.sort(e)}return new lt(i,this._parents).order()}function ts(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function es(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ns(){return Array.from(this)}function rs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function is(){let t=0;for(const e of this)++t;return t}function ss(){return!this.node()}function as(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,u;s<a;++s)(u=i[s])&&t.call(u,u.__data__,s,i);return this}function os(t){return function(){this.removeAttribute(t)}}function us(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ls(t,e){return function(){this.setAttribute(t,e)}}function cs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function hs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ds(t,e){var n=Ne(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?us:os:typeof e=="function"?n.local?fs:hs:n.local?cs:ls)(n,e))}function Mr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ps(t){return function(){this.style.removeProperty(t)}}function gs(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ms(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ys(t,e,n){return arguments.length>1?this.each((e==null?ps:typeof e=="function"?ms:gs)(t,e,n??"")):Bt(this.node(),t)}function Bt(t,e){return t.style.getPropertyValue(e)||Mr(t).getComputedStyle(t,null).getPropertyValue(e)}function _s(t){return function(){delete this[t]}}function vs(t,e){return function(){this[t]=e}}function ws(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function xs(t,e){return arguments.length>1?this.each((e==null?_s:typeof e=="function"?ws:vs)(t,e)):this.node()[t]}function Sr(t){return t.trim().split(/^|\s+/)}function _n(t){return t.classList||new Ar(t)}function Ar(t){this._node=t,this._names=Sr(t.getAttribute("class")||"")}Ar.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Er(t,e){for(var n=_n(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function $r(t,e){for(var n=_n(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function bs(t){return function(){Er(this,t)}}function ks(t){return function(){$r(this,t)}}function Ms(t,e){return function(){(e.apply(this,arguments)?Er:$r)(this,t)}}function Ss(t,e){var n=Sr(t+"");if(arguments.length<2){for(var r=_n(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ms:e?bs:ks)(n,e))}function As(){this.textContent=""}function Es(t){return function(){this.textContent=t}}function $s(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Cs(t){return arguments.length?this.each(t==null?As:(typeof t=="function"?$s:Es)(t)):this.node().textContent}function Ns(){this.innerHTML=""}function Ts(t){return function(){this.innerHTML=t}}function Rs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ls(t){return arguments.length?this.each(t==null?Ns:(typeof t=="function"?Rs:Ts)(t)):this.node().innerHTML}function Os(){this.nextSibling&&this.parentNode.appendChild(this)}function zs(){return this.each(Os)}function Is(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fs(){return this.each(Is)}function Ds(t){var e=typeof t=="function"?t:_r(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ps(){return null}function Hs(t,e){var n=typeof t=="function"?t:_r(t),r=e==null?Ps:typeof e=="function"?e:yn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function qs(){var t=this.parentNode;t&&t.removeChild(this)}function Vs(){return this.each(qs)}function Bs(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Us(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xs(t){return this.select(t?Us:Bs)}function Ws(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ys(t){return function(e){t.call(this,e,this.__data__)}}function Gs(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ks(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Qs(t,e,n){return function(){var r=this.__on,i,s=Ys(e);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Zs(t,e,n){var r=Gs(t+""),i,s=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var o=0,l=u.length,h;o<l;++o)for(i=0,h=u[o];i<s;++i)if((a=r[i]).type===h.type&&a.name===h.name)return h.value}return}for(u=e?Qs:Ks,i=0;i<s;++i)this.each(u(r[i],e,n));return this}function Cr(t,e,n){var r=Mr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Js(t,e){return function(){return Cr(this,t,e)}}function js(t,e){return function(){return Cr(this,t,e.apply(this,arguments))}}function ta(t,e){return this.each((typeof e=="function"?js:Js)(t,e))}function*ea(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var vn=[null];function lt(t,e){this._groups=t,this._parents=e}function re(){return new lt([[document.documentElement]],vn)}function na(){return this}lt.prototype=re.prototype={constructor:lt,select:Ci,selectAll:Ri,selectChild:Ii,selectChildren:Hi,filter:qi,data:Yi,enter:Vi,exit:Ki,join:Qi,merge:Zi,selection:na,order:Ji,sort:ji,call:es,nodes:ns,node:rs,size:is,empty:ss,each:as,attr:ds,style:ys,property:xs,classed:Ss,text:Cs,html:Ls,raise:zs,lower:Fs,append:Ds,insert:Hs,remove:Vs,clone:Xs,datum:Ws,on:Zs,dispatch:ta,[Symbol.iterator]:ea};function q(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],vn)}function ra(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ze(t,e){if(t=ra(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Nr(t){return typeof t=="string"?new lt([document.querySelectorAll(t)],[document.documentElement]):new lt([vr(t)],vn)}const Je={capture:!0,passive:!1};function je(t){t.preventDefault(),t.stopImmediatePropagation()}function ia(t){var e=t.document.documentElement,n=q(t).on("dragstart.drag",je,Je);"onselectstart"in e?n.on("selectstart.drag",je,Je):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function sa(t,e){var n=t.document.documentElement,r=q(t).on("dragstart.drag",null);e&&(r.on("click.drag",je,Je),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Tr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ie(){}var Jt=.7,ve=1/Jt,Vt="\\s*([+-]?\\d+)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aa=/^#([0-9a-f]{3,8})$/,oa=new RegExp(`^rgb\\(${Vt},${Vt},${Vt}\\)$`),ua=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),la=new RegExp(`^rgba\\(${Vt},${Vt},${Vt},${jt}\\)$`),ca=new RegExp(`^rgba\\(${_t},${_t},${_t},${jt}\\)$`),ha=new RegExp(`^hsl\\(${jt},${_t},${_t}\\)$`),fa=new RegExp(`^hsla\\(${jt},${_t},${_t},${jt}\\)$`),On={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wn(ie,zt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zn,formatHex:zn,formatHex8:da,formatHsl:pa,formatRgb:In,toString:In});function zn(){return this.rgb().formatHex()}function da(){return this.rgb().formatHex8()}function pa(){return Rr(this).formatHsl()}function In(){return this.rgb().formatRgb()}function zt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=aa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Fn(e):n===3?new ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ae(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ae(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oa.exec(t))?new ct(e[1],e[2],e[3],1):(e=ua.exec(t))?new ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=la.exec(t))?ae(e[1],e[2],e[3],e[4]):(e=ca.exec(t))?ae(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ha.exec(t))?Hn(e[1],e[2]/100,e[3]/100,1):(e=fa.exec(t))?Hn(e[1],e[2]/100,e[3]/100,e[4]):On.hasOwnProperty(t)?Fn(On[t]):t==="transparent"?new ct(NaN,NaN,NaN,0):null}function Fn(t){return new ct(t>>16&255,t>>8&255,t&255,1)}function ae(t,e,n,r){return r<=0&&(t=e=n=NaN),new ct(t,e,n,r)}function ga(t){return t instanceof ie||(t=zt(t)),t?(t=t.rgb(),new ct(t.r,t.g,t.b,t.opacity)):new ct}function we(t,e,n,r){return arguments.length===1?ga(t):new ct(t,e,n,r??1)}function ct(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wn(ct,we,Tr(ie,{brighter(t){return t=t==null?ve:Math.pow(ve,t),new ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jt:Math.pow(Jt,t),new ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ct(Ot(this.r),Ot(this.g),Ot(this.b),xe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dn,formatHex:Dn,formatHex8:ma,formatRgb:Pn,toString:Pn}));function Dn(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}`}function ma(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}${Rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pn(){const t=xe(this.opacity);return`${t===1?"rgb(":"rgba("}${Ot(this.r)}, ${Ot(this.g)}, ${Ot(this.b)}${t===1?")":`, ${t})`}`}function xe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ot(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Rt(t){return t=Ot(t),(t<16?"0":"")+t.toString(16)}function Hn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mt(t,e,n,r)}function Rr(t){if(t instanceof mt)return new mt(t.h,t.s,t.l,t.opacity);if(t instanceof ie||(t=zt(t)),!t)return new mt;if(t instanceof mt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,u=s-i,o=(s+i)/2;return u?(e===s?a=(n-r)/u+(n<r)*6:n===s?a=(r-e)/u+2:a=(e-n)/u+4,u/=o<.5?s+i:2-s-i,a*=60):u=o>0&&o<1?0:a,new mt(a,u,o,t.opacity)}function ya(t,e,n,r){return arguments.length===1?Rr(t):new mt(t,e,n,r??1)}function mt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wn(mt,ya,Tr(ie,{brighter(t){return t=t==null?ve:Math.pow(ve,t),new mt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jt:Math.pow(Jt,t),new mt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ct(De(t>=240?t-240:t+120,i,r),De(t,i,r),De(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new mt(qn(this.h),oe(this.s),oe(this.l),xe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xe(this.opacity);return`${t===1?"hsl(":"hsla("}${qn(this.h)}, ${oe(this.s)*100}%, ${oe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function qn(t){return t=(t||0)%360,t<0?t+360:t}function oe(t){return Math.max(0,Math.min(1,t||0))}function De(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function _a(t,e,n,r,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*r+a*i)/6}function va(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],a=r>0?t[r-1]:2*i-s,u=r<e-1?t[r+2]:2*s-i;return _a((n-r/e)*e,a,i,s,u)}}const xn=t=>()=>t;function wa(t,e){return function(n){return t+n*e}}function xa(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ba(t){return(t=+t)==1?Lr:function(e,n){return n-e?xa(e,n,t):xn(isNaN(e)?n:e)}}function Lr(t,e){var n=e-t;return n?wa(t,n):xn(isNaN(t)?e:t)}const be=function t(e){var n=ba(e);function r(i,s){var a=n((i=we(i)).r,(s=we(s)).r),u=n(i.g,s.g),o=n(i.b,s.b),l=Lr(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=u(h),i.b=o(h),i.opacity=l(h),i+""}}return r.gamma=t,r}(1);function ka(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),a,u;for(a=0;a<n;++a)u=we(e[a]),r[a]=u.r||0,i[a]=u.g||0,s[a]=u.b||0;return r=t(r),i=t(i),s=t(s),u.opacity=1,function(o){return u.r=r(o),u.g=i(o),u.b=s(o),u+""}}}var Ma=ka(va);function Sa(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Aa(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ea(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Te(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(u){for(a=0;a<r;++a)s[a]=i[a](u);return s}}function $a(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function gt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ca(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Te(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var tn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pe=new RegExp(tn.source,"g");function Na(t){return function(){return t}}function Ta(t){return function(e){return t(e)+""}}function Or(t,e){var n=tn.lastIndex=Pe.lastIndex=0,r,i,s,a=-1,u=[],o=[];for(t=t+"",e=e+"";(r=tn.exec(t))&&(i=Pe.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,o.push({i:a,x:gt(r,i)})),n=Pe.lastIndex;return n<e.length&&(s=e.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?o[0]?Ta(o[0].x):Na(e):(e=o.length,function(l){for(var h=0,c;h<e;++h)u[(c=o[h]).i]=c.x(l);return u.join("")})}function Te(t,e){var n=typeof e,r;return e==null||n==="boolean"?xn(e):(n==="number"?gt:n==="string"?(r=zt(e))?(e=r,be):Or:e instanceof zt?be:e instanceof Date?$a:Aa(e)?Sa:Array.isArray(e)?Ea:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ca:gt)(t,e)}function Ra(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Vn=180/Math.PI,en={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zr(t,e,n,r,i,s){var a,u,o;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(o=t*n+e*r)&&(n-=t*o,r-=e*o),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,o/=u),t*r<e*n&&(t=-t,e=-e,o=-o,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Vn,skewX:Math.atan(o)*Vn,scaleX:a,scaleY:u}}var ue;function La(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?en:zr(e.a,e.b,e.c,e.d,e.e,e.f)}function Oa(t){return t==null||(ue||(ue=document.createElementNS("http://www.w3.org/2000/svg","g")),ue.setAttribute("transform",t),!(t=ue.transform.baseVal.consolidate()))?en:(t=t.matrix,zr(t.a,t.b,t.c,t.d,t.e,t.f))}function Ir(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,h,c,f,_,g){if(l!==c||h!==f){var P=_.push("translate(",null,e,null,n);g.push({i:P-4,x:gt(l,c)},{i:P-2,x:gt(h,f)})}else(c||f)&&_.push("translate("+c+e+f+n)}function a(l,h,c,f){l!==h?(l-h>180?h+=360:h-l>180&&(l+=360),f.push({i:c.push(i(c)+"rotate(",null,r)-2,x:gt(l,h)})):h&&c.push(i(c)+"rotate("+h+r)}function u(l,h,c,f){l!==h?f.push({i:c.push(i(c)+"skewX(",null,r)-2,x:gt(l,h)}):h&&c.push(i(c)+"skewX("+h+r)}function o(l,h,c,f,_,g){if(l!==c||h!==f){var P=_.push(i(_)+"scale(",null,",",null,")");g.push({i:P-4,x:gt(l,c)},{i:P-2,x:gt(h,f)})}else(c!==1||f!==1)&&_.push(i(_)+"scale("+c+","+f+")")}return function(l,h){var c=[],f=[];return l=t(l),h=t(h),s(l.translateX,l.translateY,h.translateX,h.translateY,c,f),a(l.rotate,h.rotate,c,f),u(l.skewX,h.skewX,c,f),o(l.scaleX,l.scaleY,h.scaleX,h.scaleY,c,f),l=h=null,function(_){for(var g=-1,P=f.length,b;++g<P;)c[(b=f[g]).i]=b.x(_);return c.join("")}}}var za=Ir(La,"px, ","px)","deg)"),Ia=Ir(Oa,", ",")",")"),Ut=0,Kt=0,Yt=0,Fr=1e3,ke,Qt,Me=0,It=0,Re=0,te=typeof performance=="object"&&performance.now?performance:Date,Dr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bn(){return It||(Dr(Fa),It=te.now()+Re)}function Fa(){It=0}function Se(){this._call=this._time=this._next=null}Se.prototype=Pr.prototype={constructor:Se,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?bn():+n)+(e==null?0:+e),!this._next&&Qt!==this&&(Qt?Qt._next=this:ke=this,Qt=this),this._call=t,this._time=n,nn()},stop:function(){this._call&&(this._call=null,this._time=1/0,nn())}};function Pr(t,e,n){var r=new Se;return r.restart(t,e,n),r}function Da(){bn(),++Ut;for(var t=ke,e;t;)(e=It-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ut}function Bn(){It=(Me=te.now())+Re,Ut=Kt=0;try{Da()}finally{Ut=0,Ha(),It=0}}function Pa(){var t=te.now(),e=t-Me;e>Fr&&(Re-=e,Me=t)}function Ha(){for(var t,e=ke,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ke=n);Qt=t,nn(r)}function nn(t){if(!Ut){Kt&&(Kt=clearTimeout(Kt));var e=t-It;e>24?(t<1/0&&(Kt=setTimeout(Bn,t-te.now()-Re)),Yt&&(Yt=clearInterval(Yt))):(Yt||(Me=te.now(),Yt=setInterval(Pa,Fr)),Ut=1,Dr(Bn))}}function Un(t,e,n){var r=new Se;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var qa=mn("start","end","cancel","interrupt"),Va=[],Hr=0,Xn=1,rn=2,de=3,Wn=4,sn=5,pe=6;function Le(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Ba(t,n,{name:e,index:r,group:i,on:qa,tween:Va,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Hr})}function kn(t,e){var n=yt(t,e);if(n.state>Hr)throw new Error("too late; already scheduled");return n}function vt(t,e){var n=yt(t,e);if(n.state>de)throw new Error("too late; already running");return n}function yt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ba(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Pr(s,0,n.time);function s(l){n.state=Xn,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var h,c,f,_;if(n.state!==Xn)return o();for(h in r)if(_=r[h],_.name===n.name){if(_.state===de)return Un(a);_.state===Wn?(_.state=pe,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete r[h]):+h<e&&(_.state=pe,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete r[h])}if(Un(function(){n.state===de&&(n.state=Wn,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=rn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===rn){for(n.state=de,i=new Array(f=n.tween.length),h=0,c=-1;h<f;++h)(_=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=_);i.length=c+1}}function u(l){for(var h=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(o),n.state=sn,1),c=-1,f=i.length;++c<f;)i[c].call(t,h);n.state===sn&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=pe,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function an(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>rn&&r.state<sn,r.state=pe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Ua(t){return this.each(function(){an(this,t)})}function Xa(t,e){var n,r;return function(){var i=vt(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,u=r.length;a<u;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Wa(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=vt(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},o=0,l=i.length;o<l;++o)if(i[o].name===e){i[o]=u;break}o===l&&i.push(u)}s.tween=i}}function Ya(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=yt(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Xa:Wa)(n,t,e))}function Mn(t,e,n){var r=t._id;return t.each(function(){var i=vt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return yt(i,r).value[e]}}function qr(t,e){var n;return(typeof e=="number"?gt:e instanceof zt?be:(n=zt(e))?(e=n,be):Or)(t,e)}function Ga(t){return function(){this.removeAttribute(t)}}function Ka(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qa(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function Za(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Ja(t,e,n){var r,i,s;return function(){var a,u=n(this),o;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),o=u+"",a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u)))}}function ja(t,e,n){var r,i,s;return function(){var a,u=n(this),o;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),o=u+"",a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u)))}}function to(t,e){var n=Ne(t),r=n==="transform"?Ia:qr;return this.attrTween(t,typeof e=="function"?(n.local?ja:Ja)(n,r,Mn(this,"attr."+t,e)):e==null?(n.local?Ka:Ga)(n):(n.local?Za:Qa)(n,r,e))}function eo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function no(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ro(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&no(t,s)),n}return i._value=e,i}function io(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&eo(t,s)),n}return i._value=e,i}function so(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ne(t);return this.tween(n,(r.local?ro:io)(r,e))}function ao(t,e){return function(){kn(this,t).delay=+e.apply(this,arguments)}}function oo(t,e){return e=+e,function(){kn(this,t).delay=e}}function uo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ao:oo)(e,t)):yt(this.node(),e).delay}function lo(t,e){return function(){vt(this,t).duration=+e.apply(this,arguments)}}function co(t,e){return e=+e,function(){vt(this,t).duration=e}}function ho(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lo:co)(e,t)):yt(this.node(),e).duration}function fo(t,e){if(typeof e!="function")throw new Error;return function(){vt(this,t).ease=e}}function po(t){var e=this._id;return arguments.length?this.each(fo(e,t)):yt(this.node(),e).ease}function go(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;vt(this,t).ease=n}}function mo(t){if(typeof t!="function")throw new Error;return this.each(go(this._id,t))}function yo(t){typeof t!="function"&&(t=xr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=[],o,l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new kt(r,this._parents,this._name,this._id)}function _o(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),u=0;u<s;++u)for(var o=e[u],l=n[u],h=o.length,c=a[u]=new Array(h),f,_=0;_<h;++_)(f=o[_]||l[_])&&(c[_]=f);for(;u<r;++u)a[u]=e[u];return new kt(a,this._parents,this._name,this._id)}function vo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function wo(t,e,n){var r,i,s=vo(e)?kn:vt;return function(){var a=s(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function xo(t,e){var n=this._id;return arguments.length<2?yt(this.node(),n).on.on(t):this.each(wo(n,t,e))}function bo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ko(){return this.on("end.remove",bo(this._id))}function Mo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=yn(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var u=r[a],o=u.length,l=s[a]=new Array(o),h,c,f=0;f<o;++f)(h=u[f])&&(c=t.call(h,h.__data__,f,u))&&("__data__"in h&&(c.__data__=h.__data__),l[f]=c,Le(l[f],e,n,f,l,yt(h,n)));return new kt(s,this._parents,e,n)}function So(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wr(t));for(var r=this._groups,i=r.length,s=[],a=[],u=0;u<i;++u)for(var o=r[u],l=o.length,h,c=0;c<l;++c)if(h=o[c]){for(var f=t.call(h,h.__data__,c,o),_,g=yt(h,n),P=0,b=f.length;P<b;++P)(_=f[P])&&Le(_,e,n,P,f,g);s.push(f),a.push(h)}return new kt(s,a,e,n)}var Ao=re.prototype.constructor;function Eo(){return new Ao(this._groups,this._parents)}function $o(t,e){var n,r,i;return function(){var s=Bt(this,t),a=(this.style.removeProperty(t),Bt(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function Vr(t){return function(){this.style.removeProperty(t)}}function Co(t,e,n){var r,i=n+"",s;return function(){var a=Bt(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function No(t,e,n){var r,i,s;return function(){var a=Bt(this,t),u=n(this),o=u+"";return u==null&&(o=u=(this.style.removeProperty(t),Bt(this,t))),a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u))}}function To(t,e){var n,r,i,s="style."+e,a="end."+s,u;return function(){var o=vt(this,t),l=o.on,h=o.value[s]==null?u||(u=Vr(e)):void 0;(l!==n||i!==h)&&(r=(n=l).copy()).on(a,i=h),o.on=r}}function Ro(t,e,n){var r=(t+="")=="transform"?za:qr;return e==null?this.styleTween(t,$o(t,r)).on("end.style."+t,Vr(t)):typeof e=="function"?this.styleTween(t,No(t,r,Mn(this,"style."+t,e))).each(To(this._id,t)):this.styleTween(t,Co(t,r,e),n).on("end.style."+t,null)}function Lo(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Oo(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Lo(t,a,n)),r}return s._value=e,s}function zo(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Oo(t,e,n??""))}function Io(t){return function(){this.textContent=t}}function Fo(t){return function(){var e=t(this);this.textContent=e??""}}function Do(t){return this.tween("text",typeof t=="function"?Fo(Mn(this,"text",t)):Io(t==null?"":t+""))}function Po(t){return function(e){this.textContent=t.call(this,e)}}function Ho(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Po(i)),e}return r._value=t,r}function qo(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ho(t))}function Vo(){for(var t=this._name,e=this._id,n=Br(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,o,l=0;l<u;++l)if(o=a[l]){var h=yt(o,e);Le(o,t,n,l,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new kt(r,this._parents,t,n)}function Bo(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var u={value:a},o={value:function(){--i===0&&s()}};n.each(function(){var l=vt(this,r),h=l.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(o)),l.on=e}),i===0&&s()})}var Uo=0;function kt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Br(){return++Uo}var xt=re.prototype;kt.prototype={constructor:kt,select:Mo,selectAll:So,selectChild:xt.selectChild,selectChildren:xt.selectChildren,filter:yo,merge:_o,selection:Eo,transition:Vo,call:xt.call,nodes:xt.nodes,node:xt.node,size:xt.size,empty:xt.empty,each:xt.each,on:xo,attr:to,attrTween:so,style:Ro,styleTween:zo,text:Do,textTween:qo,remove:ko,tween:Ya,delay:uo,duration:ho,ease:po,easeVarying:mo,end:Bo,[Symbol.iterator]:xt[Symbol.iterator]};function Xo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Wo={time:null,delay:0,duration:250,ease:Xo};function Yo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Go(t){var e,n;t instanceof kt?(e=t._id,t=t._name):(e=Br(),(n=Wo).time=bn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,o,l=0;l<u;++l)(o=a[l])&&Le(o,t,e,l,a,n||Yo(o,e));return new kt(r,this._parents,t,e)}re.prototype.interrupt=Ua;re.prototype.transition=Go;const He=t=>()=>t;function Ko(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Qo(t){t.stopImmediatePropagation()}function qe(t){t.preventDefault(),t.stopImmediatePropagation()}var Yn={name:"drag"},Ve={name:"space"},Dt={name:"handle"},Pt={name:"center"};const{abs:Gn,max:ot,min:ut}=Math;function Kn(t){return[+t[0],+t[1]]}function on(t){return[Kn(t[0]),Kn(t[1])]}var Be={name:"x",handles:["w","e"].map(ee),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ue={name:"y",handles:["n","s"].map(ee),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Zo={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ee),input:function(t){return t==null?null:on(t)},output:function(t){return t}},bt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qn={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Zn={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Jo={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},jo={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ee(t){return{type:t}}function tu(t){return!t.ctrlKey&&!t.button}function eu(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function nu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xe(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ru(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function iu(){return su(Zo)}function su(t){var e=eu,n=tu,r=nu,i=!0,s=mn("start","brush","end"),a=6,u;function o(b){var C=b.property("__brush",P).selectAll(".overlay").data([ee("overlay")]);C.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bt.overlay).merge(C).each(function(){var $=Xe(this).extent;q(this).attr("x",$[0][0]).attr("y",$[0][1]).attr("width",$[1][0]-$[0][0]).attr("height",$[1][1]-$[0][1])}),b.selectAll(".selection").data([ee("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var T=b.selectAll(".handle").data(t.handles,function($){return $.type});T.exit().remove(),T.enter().append("rect").attr("class",function($){return"handle handle--"+$.type}).attr("cursor",function($){return bt[$.type]}),b.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}o.move=function(b,C,T){b.tween?b.on("start.brush",function($){h(this,arguments).beforestart().start($)}).on("interrupt.brush end.brush",function($){h(this,arguments).end($)}).tween("brush",function(){var $=this,z=$.__brush,O=h($,arguments),B=z.selection,D=t.input(typeof C=="function"?C.apply(this,arguments):C,z.extent),p=Te(B,D);function d(x){z.selection=x===1&&D===null?null:p(x),l.call($),O.brush()}return B!==null&&D!==null?d:d(1)}):b.each(function(){var $=this,z=arguments,O=$.__brush,B=t.input(typeof C=="function"?C.apply($,z):C,O.extent),D=h($,z).beforestart();an($),O.selection=B===null?null:B,l.call($),D.start(T).brush(T).end(T)})},o.clear=function(b,C){o.move(b,null,C)};function l(){var b=q(this),C=Xe(this).selection;C?(b.selectAll(".selection").style("display",null).attr("x",C[0][0]).attr("y",C[0][1]).attr("width",C[1][0]-C[0][0]).attr("height",C[1][1]-C[0][1]),b.selectAll(".handle").style("display",null).attr("x",function(T){return T.type[T.type.length-1]==="e"?C[1][0]-a/2:C[0][0]-a/2}).attr("y",function(T){return T.type[0]==="s"?C[1][1]-a/2:C[0][1]-a/2}).attr("width",function(T){return T.type==="n"||T.type==="s"?C[1][0]-C[0][0]+a:a}).attr("height",function(T){return T.type==="e"||T.type==="w"?C[1][1]-C[0][1]+a:a})):b.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(b,C,T){var $=b.__brush.emitter;return $&&(!T||!$.clean)?$:new c(b,C,T)}function c(b,C,T){this.that=b,this.args=C,this.state=b.__brush,this.active=0,this.clean=T}c.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(b,C){return this.starting?(this.starting=!1,this.emit("start",b,C)):this.emit("brush",b),this},brush:function(b,C){return this.emit("brush",b,C),this},end:function(b,C){return--this.active===0&&(delete this.state.emitter,this.emit("end",b,C)),this},emit:function(b,C,T){var $=q(this.that).datum();s.call(b,this.that,new Ko(b,{sourceEvent:C,target:o,selection:t.output(this.state.selection),mode:T,dispatch:s}),$)}};function f(b){if(u&&!b.touches||!n.apply(this,arguments))return;var C=this,T=b.target.__data__.type,$=(i&&b.metaKey?T="overlay":T)==="selection"?Yn:i&&b.altKey?Pt:Dt,z=t===Ue?null:Jo[T],O=t===Be?null:jo[T],B=Xe(C),D=B.extent,p=B.selection,d=D[0][0],x,w,A=D[0][1],E,R,v=D[1][0],k,y,M=D[1][1],m,N,L=0,S=0,V,G=z&&O&&i&&b.shiftKey,W,Z,H=Array.from(b.touches||[b],F=>{const Y=F.identifier;return F=Ze(F,C),F.point0=F.slice(),F.identifier=Y,F});an(C);var j=h(C,arguments,!0).beforestart();if(T==="overlay"){p&&(V=!0);const F=[H[0],H[1]||H[0]];B.selection=p=[[x=t===Ue?d:ut(F[0][0],F[1][0]),E=t===Be?A:ut(F[0][1],F[1][1])],[k=t===Ue?v:ot(F[0][0],F[1][0]),m=t===Be?M:ot(F[0][1],F[1][1])]],H.length>1&&X(b)}else x=p[0][0],E=p[0][1],k=p[1][0],m=p[1][1];w=x,R=E,y=k,N=m;var I=q(C).attr("pointer-events","none"),U=I.selectAll(".overlay").attr("cursor",bt[T]);if(b.touches)j.moved=nt,j.ended=it;else{var J=q(b.view).on("mousemove.brush",nt,!0).on("mouseup.brush",it,!0);i&&J.on("keydown.brush",tt,!0).on("keyup.brush",K,!0),ia(b.view)}l.call(C),j.start(b,$.name);function nt(F){for(const Y of F.changedTouches||[F])for(const at of H)at.identifier===Y.identifier&&(at.cur=Ze(Y,C));if(G&&!W&&!Z&&H.length===1){const Y=H[0];Gn(Y.cur[0]-Y[0])>Gn(Y.cur[1]-Y[1])?Z=!0:W=!0}for(const Y of H)Y.cur&&(Y[0]=Y.cur[0],Y[1]=Y.cur[1]);V=!0,qe(F),X(F)}function X(F){const Y=H[0],at=Y.point0;var st;switch(L=Y[0]-at[0],S=Y[1]-at[1],$){case Ve:case Yn:{z&&(L=ot(d-x,ut(v-k,L)),w=x+L,y=k+L),O&&(S=ot(A-E,ut(M-m,S)),R=E+S,N=m+S);break}case Dt:{H[1]?(z&&(w=ot(d,ut(v,H[0][0])),y=ot(d,ut(v,H[1][0])),z=1),O&&(R=ot(A,ut(M,H[0][1])),N=ot(A,ut(M,H[1][1])),O=1)):(z<0?(L=ot(d-x,ut(v-x,L)),w=x+L,y=k):z>0&&(L=ot(d-k,ut(v-k,L)),w=x,y=k+L),O<0?(S=ot(A-E,ut(M-E,S)),R=E+S,N=m):O>0&&(S=ot(A-m,ut(M-m,S)),R=E,N=m+S));break}case Pt:{z&&(w=ot(d,ut(v,x-L*z)),y=ot(d,ut(v,k+L*z))),O&&(R=ot(A,ut(M,E-S*O)),N=ot(A,ut(M,m+S*O)));break}}y<w&&(z*=-1,st=x,x=k,k=st,st=w,w=y,y=st,T in Qn&&U.attr("cursor",bt[T=Qn[T]])),N<R&&(O*=-1,st=E,E=m,m=st,st=R,R=N,N=st,T in Zn&&U.attr("cursor",bt[T=Zn[T]])),B.selection&&(p=B.selection),W&&(w=p[0][0],y=p[1][0]),Z&&(R=p[0][1],N=p[1][1]),(p[0][0]!==w||p[0][1]!==R||p[1][0]!==y||p[1][1]!==N)&&(B.selection=[[w,R],[y,N]],l.call(C),j.brush(F,$.name))}function it(F){if(Qo(F),F.touches){if(F.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else sa(F.view,V),J.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);I.attr("pointer-events","all"),U.attr("cursor",bt.overlay),B.selection&&(p=B.selection),ru(p)&&(B.selection=null,l.call(C)),j.end(F,$.name)}function tt(F){switch(F.keyCode){case 16:{G=z&&O;break}case 18:{$===Dt&&(z&&(k=y-L*z,x=w+L*z),O&&(m=N-S*O,E=R+S*O),$=Pt,X(F));break}case 32:{($===Dt||$===Pt)&&(z<0?k=y-L:z>0&&(x=w-L),O<0?m=N-S:O>0&&(E=R-S),$=Ve,U.attr("cursor",bt.selection),X(F));break}default:return}qe(F)}function K(F){switch(F.keyCode){case 16:{G&&(W=Z=G=!1,X(F));break}case 18:{$===Pt&&(z<0?k=y:z>0&&(x=w),O<0?m=N:O>0&&(E=R),$=Dt,X(F));break}case 32:{$===Ve&&(F.altKey?(z&&(k=y-L*z,x=w+L*z),O&&(m=N-S*O,E=R+S*O),$=Pt):(z<0?k=y:z>0&&(x=w),O<0?m=N:O>0&&(E=R),$=Dt),U.attr("cursor",bt[T]),X(F));break}default:return}qe(F)}}function _(b){h(this,arguments).moved(b)}function g(b){h(this,arguments).ended(b)}function P(){var b=this.__brush||{selection:null};return b.extent=on(e.apply(this,arguments)),b.dim=t,b}return o.extent=function(b){return arguments.length?(e=typeof b=="function"?b:He(on(b)),o):e},o.filter=function(b){return arguments.length?(n=typeof b=="function"?b:He(!!b),o):n},o.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:He(!!b),o):r},o.handleSize=function(b){return arguments.length?(a=+b,o):a},o.keyModifiers=function(b){return arguments.length?(i=!!b,o):i},o.on=function(){var b=s.on.apply(s,arguments);return b===s?o:b},o}const un=Math.PI,ln=2*un,Nt=1e-6,au=ln-Nt;function Ur(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ou(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ur;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let uu=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ur:ou(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,o=r-e,l=i-n,h=a-e,c=u-n,f=h*h+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Nt)if(!(Math.abs(c*o-l*h)>Nt)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let _=r-a,g=i-u,P=o*o+l*l,b=_*_+g*g,C=Math.sqrt(P),T=Math.sqrt(f),$=s*Math.tan((un-Math.acos((P+f-b)/(2*C*T)))/2),z=$/T,O=$/C;Math.abs(z-1)>Nt&&this._append`L${e+z*h},${n+z*c}`,this._append`A${s},${s},0,0,${+(c*_>h*g)},${this._x1=e+O*o},${this._y1=n+O*l}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),o=r*Math.sin(i),l=e+u,h=n+o,c=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${l},${h}`:(Math.abs(this._x1-l)>Nt||Math.abs(this._y1-h)>Nt)&&this._append`L${l},${h}`,r&&(f<0&&(f=f%ln+ln),f>au?this._append`A${r},${r},0,1,${c},${e-u},${n-o}A${r},${r},0,1,${c},${this._x1=l},${this._y1=h}`:f>Nt&&this._append`A${r},${r},0,${+(f>=un)},${c},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function lu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function cu(t,e){return fetch(t,e).then(lu)}function hu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ae(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xt(t){return t=Ae(Math.abs(t)),t?t[1]:NaN}function fu(t,e){return function(n,r){for(var i=n.length,s=[],a=0,u=t[0],o=0;i>0&&u>0&&(o+u+1>r&&(u=Math.max(1,r-o)),s.push(n.substring(i-=u,i+u)),!((o+=u+1)>r));)u=t[a=(a+1)%t.length];return s.reverse().join(e)}}function du(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var pu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ee(t){if(!(e=pu.exec(t)))throw new Error("invalid format: "+t);var e;return new Sn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ee.prototype=Sn.prototype;function Sn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Sn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gu(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Xr;function mu(t,e){var n=Ae(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Xr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ae(t,Math.max(0,e+s-1))[0]}function Jn(t,e){var n=Ae(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const jn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:hu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Jn(t*100,e),r:Jn,s:mu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tr(t){return t}var er=Array.prototype.map,nr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function yu(t){var e=t.grouping===void 0||t.thousands===void 0?tr:fu(er.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?tr:du(er.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",o=t.nan===void 0?"NaN":t.nan+"";function l(c){c=Ee(c);var f=c.fill,_=c.align,g=c.sign,P=c.symbol,b=c.zero,C=c.width,T=c.comma,$=c.precision,z=c.trim,O=c.type;O==="n"?(T=!0,O="g"):jn[O]||($===void 0&&($=12),z=!0,O="g"),(b||f==="0"&&_==="=")&&(b=!0,f="0",_="=");var B=P==="$"?n:P==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",D=P==="$"?r:/[%p]/.test(O)?a:"",p=jn[O],d=/[defgprs%]/.test(O);$=$===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function x(w){var A=B,E=D,R,v,k;if(O==="c")E=p(w)+E,w="";else{w=+w;var y=w<0||1/w<0;if(w=isNaN(w)?o:p(Math.abs(w),$),z&&(w=gu(w)),y&&+w==0&&g!=="+"&&(y=!1),A=(y?g==="("?g:u:g==="-"||g==="("?"":g)+A,E=(O==="s"?nr[8+Xr/3]:"")+E+(y&&g==="("?")":""),d){for(R=-1,v=w.length;++R<v;)if(k=w.charCodeAt(R),48>k||k>57){E=(k===46?i+w.slice(R+1):w.slice(R))+E,w=w.slice(0,R);break}}}T&&!b&&(w=e(w,1/0));var M=A.length+w.length+E.length,m=M<C?new Array(C-M+1).join(f):"";switch(T&&b&&(w=e(m+w,m.length?C-E.length:1/0),m=""),_){case"<":w=A+w+E+m;break;case"=":w=A+m+w+E;break;case"^":w=m.slice(0,M=m.length>>1)+A+w+E+m.slice(M);break;default:w=m+A+w+E;break}return s(w)}return x.toString=function(){return c+""},x}function h(c,f){var _=l((c=Ee(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor(Xt(f)/3)))*3,P=Math.pow(10,-g),b=nr[8+g/3];return function(C){return _(P*C)+b}}return{format:l,formatPrefix:h}}var le,Wr,Yr;_u({thousands:",",grouping:[3],currency:["$",""]});function _u(t){return le=yu(t),Wr=le.format,Yr=le.formatPrefix,le}function vu(t){return Math.max(0,-Xt(Math.abs(t)))}function wu(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xt(e)/3)))*3-Xt(Math.abs(t)))}function xu(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xt(e)-Xt(t))+1}function An(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const rr=Symbol("implicit");function ne(){var t=new Cn,e=[],n=[],r=rr;function i(s){let a=t.get(s);if(a===void 0){if(r!==rr)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Cn;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ne(e,n).unknown(r)},An.apply(i,arguments),i}function cn(){var t=ne().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,u=!1,o=0,l=0,h=.5;delete t.unknown;function c(){var f=e().length,_=i<r,g=_?i:r,P=_?r:i;s=(P-g)/Math.max(1,f-o+l*2),u&&(s=Math.floor(s)),g+=(P-g-s*(f-o))*h,a=s*(1-o),u&&(g=Math.round(g),a=Math.round(a));var b=di(f).map(function(C){return g+s*C});return n(_?b.reverse():b)}return t.domain=function(f){return arguments.length?(e(f),c()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,c()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,u=!0,c()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(f){return arguments.length?(u=!!f,c()):u},t.padding=function(f){return arguments.length?(o=Math.min(1,l=+f),c()):o},t.paddingInner=function(f){return arguments.length?(o=Math.min(1,f),c()):o},t.paddingOuter=function(f){return arguments.length?(l=+f,c()):l},t.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),c()):h},t.copy=function(){return cn(e(),[r,i]).round(u).paddingInner(o).paddingOuter(l).align(h)},An.apply(c(),arguments)}function bu(t){return function(){return t}}function ku(t){return+t}var ir=[0,1];function qt(t){return t}function hn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bu(isNaN(e)?NaN:.5)}function Mu(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Su(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=hn(i,r),s=n(a,s)):(r=hn(r,i),s=n(s,a)),function(u){return s(r(u))}}function Au(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=hn(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(u){var o=ri(t,u,1,r)-1;return s[o](i[o](u))}}function Eu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $u(){var t=ir,e=ir,n=Te,r,i,s,a=qt,u,o,l;function h(){var f=Math.min(t.length,e.length);return a!==qt&&(a=Mu(t[0],t[f-1])),u=f>2?Au:Su,o=l=null,c}function c(f){return f==null||isNaN(f=+f)?s:(o||(o=u(t.map(r),e,n)))(r(a(f)))}return c.invert=function(f){return a(i((l||(l=u(e,t.map(r),gt)))(f)))},c.domain=function(f){return arguments.length?(t=Array.from(f,ku),h()):t.slice()},c.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},c.rangeRound=function(f){return e=Array.from(f),n=Ra,h()},c.clamp=function(f){return arguments.length?(a=f?!0:qt,h()):a!==qt},c.interpolate=function(f){return arguments.length?(n=f,h()):n},c.unknown=function(f){return arguments.length?(s=f,c):s},function(f,_){return r=f,i=_,h()}}function Cu(){return $u()(qt,qt)}function Nu(t,e,n,r){var i=hi(t,e,n),s;switch(r=Ee(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=wu(i,a))&&(r.precision=s),Yr(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=xu(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=vu(i))&&(r.precision=s-(r.type==="%")*2);break}}return Wr(r)}function Tu(t){var e=t.domain;return t.ticks=function(n){var r=e();return ci(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Nu(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],u=r[s],o,l,h=10;for(u<a&&(l=a,a=u,u=l,l=i,i=s,s=l);h-- >0;){if(l=Ge(a,u,n),l===o)return r[i]=a,r[s]=u,e(r);if(l>0)a=Math.floor(a/l)*l,u=Math.ceil(u/l)*l;else if(l<0)a=Math.ceil(a*l)/l,u=Math.floor(u*l)/l;else break;o=l}return t},t}function $e(){var t=Cu();return t.copy=function(){return Eu(t,$e())},An.apply(t,arguments),Tu(t)}function Gr(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const ge=Gr("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ru=t=>Ma(t[t.length-1]);var Lu=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Gr);const Ou=Ru(Lu);function Ht(t){return function(){return t}}function zu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new uu(e)}function Iu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Kr(t){this._context=t}Kr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Fu(t){return new Kr(t)}function Du(t){return t[0]}function Pu(t){return t[1]}function Hu(t,e){var n=Ht(!0),r=null,i=Fu,s=null,a=zu(u);t=typeof t=="function"?t:t===void 0?Du:Ht(t),e=typeof e=="function"?e:e===void 0?Pu:Ht(e);function u(o){var l,h=(o=Iu(o)).length,c,f=!1,_;for(r==null&&(s=i(_=a())),l=0;l<=h;++l)!(l<h&&n(c=o[l],l,o))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(c,l,o),+e(c,l,o));if(_)return s=null,_+""||null}return u.x=function(o){return arguments.length?(t=typeof o=="function"?o:Ht(+o),u):t},u.y=function(o){return arguments.length?(e=typeof o=="function"?o:Ht(+o),u):e},u.defined=function(o){return arguments.length?(n=typeof o=="function"?o:Ht(!!o),u):n},u.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),u):i},u.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),u):r},u}function Zt(t,e,n){this.k=t,this.x=e,this.y=n}Zt.prototype={constructor:Zt,scale:function(t){return t===1?this:new Zt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Zt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zt.prototype;class qu{constructor(e,n=300,r=300){this.id=e,this.margin={top:20,right:10,bottom:25,left:30},this.width=n-this.margin.left-this.margin.right,this.height=r-this.margin.top-this.margin.bottom,this.k=[5,6,7,8,9,10],this.minSupport=[10,9,8,7,6]}initialize(e){return this.div=q(this.id).append("div").attr("class","d-flex justify-content-center me-3"),this.svg=this.div.append("svg"),this.container=this.svg.append("g"),this.xAxis=this.svg.append("g"),this.yAxis=this.svg.append("g"),this.xAxisLabel=this.svg.append("text"),this.yAxisLabel=this.svg.append("text"),this.cells=this.container.append("g"),this.cellsText=this.container.append("g"),this.eventHandlers=e,this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.container.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.xScale=cn().domain(this.k).range([0,this.width]).padding(.03),this.yScale=cn().domain(this.minSupport).range([0,this.height]).padding(.03),this.colorScale=$e().range([0,1]),this.xAxis.attr("transform",`translate(${this.margin.left}, ${this.height+this.margin.top})`).call(xi(this.xScale)),this.yAxis.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`).call(bi(this.yScale)),this.xAxisLabel.attr("transform",`translate(${this.width+this.margin.left+5}, ${this.height+this.margin.top+13})`).attr("text-anchor","middle").attr("alignment-baseline","middle").text("k").attr("font-size","13px").attr("font-weight","bold"),this.yAxisLabel.attr("transform","translate(25, 10)").attr("text-anchor","middle").attr("alignment-baseline","middle").text("min sup").attr("font-size","13px").attr("font-weight","bold"),this.kBand=this.k.map(n=>this.xScale(n)),this.msBand=this.minSupport.map(n=>this.yScale(n)),this}update(e){return this.maxSubgraphsLength=fi(e,n=>n.subgs.length),this.colorScale.domain([1,Math.ceil(this.maxSubgraphsLength*1.5)]),console.log(this.eventHandlers),this.cells.selectAll("rect").data(e).join("rect").attr("class",n=>`heatmap-cell k${n.k}ms${n.ms}`).attr("x",n=>this.xScale(n.k)).attr("y",n=>this.yScale(n.ms)).attr("width",this.xScale.bandwidth()).attr("height",this.yScale.bandwidth()).style("fill",n=>Ou(this.colorScale(n.subgs.length))).on("click",n=>this.clickCell(n)),this.cellsText.selectAll("text").data(e).join("text").attr("class","heatmap-cell").attr("x",n=>this.xScale(n.k)+this.xScale.bandwidth()/2).attr("y",n=>this.yScale(n.ms)+this.yScale.bandwidth()/2).style("text-anchor","middle").style("alignment-baseline","middle").style("font-size","12px").style("font-weight","bold").style("fill","black").text(n=>n.subgs.length).on("click",n=>this.clickCell(n)),this}clickCell(e){let[n,r]=Ze(e);this.eventHandlers.clickCell({k:this.invertX(n),ms:this.invertY(r)})}highlightCell(){return q(".highlight-cell").classed("highlight-cell",!1),q(".k"+q("#kRange").property("value")+"ms"+q("#msRange").property("value")).classed("highlight-cell",!0),this}invertX(e){let n=this.k[this.k.length-1];return this.kBand.forEach((r,i)=>{n==this.k[this.k.length-1]&&(n=e<r?this.k[i-1]:n)}),n}invertY(e){let n=this.minSupport[this.minSupport.length-1];return this.msBand.forEach((r,i)=>{n==this.minSupport[this.minSupport.length-1]&&(n=e<r?this.minSupport[i-1]:n)}),n}}function sr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Vu(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function We(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Qr(t,e){return t.sourceLinks.length?t.depth:e-1}function ce(t){return function(){return t}}function ar(t,e){return Ce(t.source,e.source)||t.index-e.index}function or(t,e){return Ce(t.target,e.target)||t.index-e.index}function Ce(t,e){return t.y0-e.y0}function Ye(t){return t.value}function Bu(t){return t.index}function Uu(t){return t.nodes}function Xu(t){return t.links}function ur(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function lr({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function Wu(){let t=0,e=0,n=1,r=1,i=24,s=8,a,u=Bu,o=Qr,l,h,c=Uu,f=Xu,_=6;function g(){const v={nodes:c.apply(null,arguments),links:f.apply(null,arguments)};return P(v),b(v),C(v),T(v),O(v),lr(v),v}g.update=function(v){return lr(v),v},g.nodeId=function(v){return arguments.length?(u=typeof v=="function"?v:ce(v),g):u},g.nodeAlign=function(v){return arguments.length?(o=typeof v=="function"?v:ce(v),g):o},g.nodeSort=function(v){return arguments.length?(l=v,g):l},g.nodeWidth=function(v){return arguments.length?(i=+v,g):i},g.nodePadding=function(v){return arguments.length?(s=a=+v,g):s},g.nodes=function(v){return arguments.length?(c=typeof v=="function"?v:ce(v),g):c},g.links=function(v){return arguments.length?(f=typeof v=="function"?v:ce(v),g):f},g.linkSort=function(v){return arguments.length?(h=v,g):h},g.size=function(v){return arguments.length?(t=e=0,n=+v[0],r=+v[1],g):[n-t,r-e]},g.extent=function(v){return arguments.length?(t=+v[0][0],n=+v[1][0],e=+v[0][1],r=+v[1][1],g):[[t,e],[n,r]]},g.iterations=function(v){return arguments.length?(_=+v,g):_};function P({nodes:v,links:k}){for(const[M,m]of v.entries())m.index=M,m.sourceLinks=[],m.targetLinks=[];const y=new Map(v.map((M,m)=>[u(M,m,v),M]));for(const[M,m]of k.entries()){m.index=M;let{source:N,target:L}=m;typeof N!="object"&&(N=m.source=ur(y,N)),typeof L!="object"&&(L=m.target=ur(y,L)),N.sourceLinks.push(m),L.targetLinks.push(m)}if(h!=null)for(const{sourceLinks:M,targetLinks:m}of v)M.sort(h),m.sort(h)}function b({nodes:v}){for(const k of v)k.value=k.fixedValue===void 0?Math.max(We(k.sourceLinks,Ye),We(k.targetLinks,Ye)):k.fixedValue}function C({nodes:v}){const k=v.length;let y=new Set(v),M=new Set,m=0;for(;y.size;){for(const N of y){N.depth=m;for(const{target:L}of N.sourceLinks)M.add(L)}if(++m>k)throw new Error("circular link");y=M,M=new Set}}function T({nodes:v}){const k=v.length;let y=new Set(v),M=new Set,m=0;for(;y.size;){for(const N of y){N.height=m;for(const{source:L}of N.targetLinks)M.add(L)}if(++m>k)throw new Error("circular link");y=M,M=new Set}}function $({nodes:v}){const k=sr(v,m=>m.depth)+1,y=(n-t-i)/(k-1),M=new Array(k);for(const m of v){const N=Math.max(0,Math.min(k-1,Math.floor(o.call(null,m,k))));m.layer=N,m.x0=t+N*y,m.x1=m.x0+i,M[N]?M[N].push(m):M[N]=[m]}if(l)for(const m of M)m.sort(l);return M}function z(v){const k=Vu(v,y=>(r-e-(y.length-1)*a)/We(y,Ye));for(const y of v){let M=e;for(const m of y){m.y0=M,m.y1=M+m.value*k,M=m.y1+a;for(const N of m.sourceLinks)N.width=N.value*k}M=(r-M+a)/(y.length+1);for(let m=0;m<y.length;++m){const N=y[m];N.y0+=M*(m+1),N.y1+=M*(m+1)}A(y)}}function O(v){const k=$(v);a=Math.min(s,(r-e)/(sr(k,y=>y.length)-1)),z(k);for(let y=0;y<_;++y){const M=Math.pow(.99,y),m=Math.max(1-M,(y+1)/_);D(k,M,m),B(k,M,m)}}function B(v,k,y){for(let M=1,m=v.length;M<m;++M){const N=v[M];for(const L of N){let S=0,V=0;for(const{source:W,value:Z}of L.targetLinks){let H=Z*(L.layer-W.layer);S+=E(W,L)*H,V+=H}if(!(V>0))continue;let G=(S/V-L.y0)*k;L.y0+=G,L.y1+=G,w(L)}l===void 0&&N.sort(Ce),p(N,y)}}function D(v,k,y){for(let M=v.length,m=M-2;m>=0;--m){const N=v[m];for(const L of N){let S=0,V=0;for(const{target:W,value:Z}of L.sourceLinks){let H=Z*(W.layer-L.layer);S+=R(L,W)*H,V+=H}if(!(V>0))continue;let G=(S/V-L.y0)*k;L.y0+=G,L.y1+=G,w(L)}l===void 0&&N.sort(Ce),p(N,y)}}function p(v,k){const y=v.length>>1,M=v[y];x(v,M.y0-a,y-1,k),d(v,M.y1+a,y+1,k),x(v,r,v.length-1,k),d(v,e,0,k)}function d(v,k,y,M){for(;y<v.length;++y){const m=v[y],N=(k-m.y0)*M;N>1e-6&&(m.y0+=N,m.y1+=N),k=m.y1+a}}function x(v,k,y,M){for(;y>=0;--y){const m=v[y],N=(m.y1-k)*M;N>1e-6&&(m.y0-=N,m.y1-=N),k=m.y0-a}}function w({sourceLinks:v,targetLinks:k}){if(h===void 0){for(const{source:{sourceLinks:y}}of k)y.sort(or);for(const{target:{targetLinks:y}}of v)y.sort(ar)}}function A(v){if(h===void 0)for(const{sourceLinks:k,targetLinks:y}of v)k.sort(or),y.sort(ar)}function E(v,k){let y=v.y0-(v.sourceLinks.length-1)*a/2;for(const{target:M,width:m}of v.sourceLinks){if(M===k)break;y+=m+a}for(const{source:M,width:m}of k.targetLinks){if(M===v)break;y-=m}return y}function R(v,k){let y=k.y0-(k.targetLinks.length-1)*a/2;for(const{source:M,width:m}of k.targetLinks){if(M===v)break;y+=m+a}for(const{target:M,width:m}of v.sourceLinks){if(M===k)break;y-=m}return y}return g}var fn=Math.PI,dn=2*fn,Tt=1e-6,Yu=dn-Tt;function pn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zr(){return new pn}pn.prototype=Zr.prototype={constructor:pn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,u=n-t,o=r-e,l=s-t,h=a-e,c=l*l+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>Tt)if(!(Math.abs(h*u-o*l)>Tt)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var f=n-s,_=r-a,g=u*u+o*o,P=f*f+_*_,b=Math.sqrt(g),C=Math.sqrt(c),T=i*Math.tan((fn-Math.acos((g+c-P)/(2*b*C)))/2),$=T/C,z=T/b;Math.abs($-1)>Tt&&(this._+="L"+(t+$*l)+","+(e+$*h)),this._+="A"+i+","+i+",0,0,"+ +(h*f>l*_)+","+(this._x1=t+z*u)+","+(this._y1=e+z*o)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var a=n*Math.cos(r),u=n*Math.sin(r),o=t+a,l=e+u,h=1^s,c=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+o+","+l:(Math.abs(this._x1-o)>Tt||Math.abs(this._y1-l)>Tt)&&(this._+="L"+o+","+l),n&&(c<0&&(c=c%dn+dn),c>Yu?this._+="A"+n+","+n+",0,1,"+h+","+(t-a)+","+(e-u)+"A"+n+","+n+",0,1,"+h+","+(this._x1=o)+","+(this._y1=l):c>Tt&&(this._+="A"+n+","+n+",0,"+ +(c>=fn)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function cr(t){return function(){return t}}function Gu(t){return t[0]}function Ku(t){return t[1]}var Qu=Array.prototype.slice;function Zu(t){return t.source}function Ju(t){return t.target}function ju(t){var e=Zu,n=Ju,r=Gu,i=Ku,s=null;function a(){var u,o=Qu.call(arguments),l=e.apply(this,o),h=n.apply(this,o);if(s||(s=u=Zr()),t(s,+r.apply(this,(o[0]=l,o)),+i.apply(this,o),+r.apply(this,(o[0]=h,o)),+i.apply(this,o)),u)return s=null,u+""||null}return a.source=function(u){return arguments.length?(e=u,a):e},a.target=function(u){return arguments.length?(n=u,a):n},a.x=function(u){return arguments.length?(r=typeof u=="function"?u:cr(+u),a):r},a.y=function(u){return arguments.length?(i=typeof u=="function"?u:cr(+u),a):i},a.context=function(u){return arguments.length?(s=u??null,a):s},a}function tl(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function el(){return ju(tl)}function nl(t){return[t.source.x1,t.y0]}function rl(t){return[t.target.x0,t.y1]}function il(){return el().source(nl).target(rl)}class sl{constructor(e,n,r){this.id=e,this.margin={top:20,right:10,bottom:10,left:10},this.width=n-this.margin.left-this.margin.right,this.height=r-this.margin.top-this.margin.bottom}initialize(e,n,r,i){return this.fsmResult=e,this.labelSet=n.labelSet,this.labels=n.labels,this.labelLength=this.labelSet.length,this.textureScale=r,this.eventHandlers=i,this.div=q(this.id).append("div"),this.svg=this.div.append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.fsLabel=this.svg.append("text").attr("transform",`translate(${this.margin.left+8}, 15)`).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").text("FS"),this.classLabel=this.svg.append("text").attr("transform",`translate(${this.margin.left+this.width-9}, 15)`).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").text("Class"),this.container=this.svg.append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),this.textureScale.callTextures(s=>{this.svg.call(s)}),this}update(){this.k=q("#kRange").property("value"),this.minSupport=q("#msRange").property("value"),this.labelColorScale=ne([],ge),this.fsmResult.forEach(i=>{i.k==this.k&&i.ms==this.minSupport&&(this.subgraphs=i.subgs)}),this.makeGraph();let e=this.graph.nodes,n=this.graph.links;const r=pi(e,i=>i.id);Wu().nodeId((i,s)=>r[s]).nodeAlign(Qr).nodeSort(null).nodeWidth(15).nodePadding(5).extent([[0,0],[this.width,this.height-50]])({nodes:e,links:n}),this.container.selectAll("g").remove(),this.nodeG=this.container.append("g"),this.linkG=this.container.append("g"),this.classLegend=this.container.append("g"),this.legendRect=this.classLegend.append("g"),this.legendText=this.classLegend.append("g"),this.link=this.linkG.selectAll(".link").data(n).join("g").append("path").attr("d",il()).attr("fill","none").attr("stroke-opacity",.1).attr("stroke","#000").attr("stroke-width",({width:i})=>Math.max(2,i)).sort((i,s)=>s.dy-i.dy),this.node=this.nodeG.selectAll("rect").data(e).join("rect").style("fill",i=>i.id<this.labelLength?this.labelColorScale(i.id):i.id<this.labelLength+this.textureScale.length()&&i.id<e.length-1?this.textureScale.getTexture(i.id-this.labelLength):i.id<e.length-1?this.textureScale.getTexture(-1):"gray").attr("stroke",i=>i.id<this.labelLength?"none":"black").attr("x",i=>i.x0).attr("y",i=>i.y0).attr("height",i=>i.y1-i.y0).attr("width",i=>i.x1-i.x0).on("mouseover",(i,s)=>{s.id>=this.labelLength?this.eventHandlers.linkViews("fsHover",s.id-this.labelLength):this.eventHandlers.linkViews("classHover",s.id)}).on("mouseout",()=>{this.eventHandlers.linkViews("mouseOut"),this.link.style("stroke-opacity",.1)}),this.drawLegend()}makeGraph(){this.graph={nodes:[],links:[]},this.graph.nodes=[...this.labelSet];let e=[...new Array(this.labels.length)].map((r,i)=>i);this.subgraphs.forEach((r,i)=>{this.graph.nodes.push("FS"+i),e=e.filter(a=>!r.includes(a)),[...new Set(this.subgraphs[i].map(a=>this.labels[a]))].forEach(a=>{this.graph.links.push({source:this.graph.nodes.indexOf("FS"+i),target:this.graph.nodes.indexOf(a),value:this.subgraphs[i].map(u=>this.labels[u]).filter(u=>u==a).length})})}),this.graph.nodes.push("Outliers"),[...new Set(e.map(r=>this.labels[r]))].forEach(r=>{this.graph.links.push({source:this.graph.nodes.indexOf("Outliers"),target:this.graph.nodes.indexOf(r),value:e.map(i=>this.labels[i]).filter(i=>i==r).length})}),this.graph.nodes.forEach((r,i)=>{this.graph.nodes[i]={id:i}})}drawLegend(){this.classLegend.attr("transform",`translate(0,${this.height-35})`).attr("font-size","13px"),this.legendRect.selectAll("rect").data(this.labelSet).join("rect").attr("x",(e,n)=>n%5*Math.floor(this.width/5)).attr("y",(e,n)=>Math.floor(n/5)*20).attr("width",10).attr("height",10).attr("fill",(e,n)=>this.labelColorScale(n)),this.legendText.selectAll("text").data(this.labelSet).join("text").attr("x",(e,n)=>n%5*Math.floor(this.width/5)+15).attr("y",(e,n)=>Math.floor(n/5)*20+10).text(e=>e)}highlightFS(e){this.link.style("stroke-opacity",n=>n.source.id===e+this.labelLength||n.target.id===e+this.labelLength?.4:.1)}highlightClass(e){this.link.style("stroke-opacity",n=>n.source.id===e||n.target.id===e?.4:.1)}mouseOut(){this.link.style("stroke-opacity",.1)}}class al{constructor(e,n,r,i,s,a,u,o,l){this.id=e,this.div=q(n).append("div"),this.margin={top:15,right:10,bottom:10,left:10},this.width=r-this.margin.left-this.margin.right,this.height=i-this.margin.top-this.margin.bottom,this.method=s.substr(0,4)==="tsne"?"t-SNE":"UMAP",this.mode="dualMode",this.hyperparameters=a,this.brushedSet=u,this.textureScale=o,this.eventHandlers=l,this.handlers={}}initialize(){return this.div.attr("class","scatterplot bg-white p-1 mb-2 mx-1 rounded-3 justify-content-center"),this.header=this.div.append("div").attr("class","d-flex my-1"),this.header.append("div").attr("class","fs-6 fw-bold mx-2").text(`${this.method} ${this.id+1}`),this.method=="t-SNE"&&this.header.append("div").attr("class","badge rounded-pill text-bg-primary ms-2 py-1").style("font-size","12px").text(`${this.hyperparameters.initialization}`),this.svg=this.div.append("svg"),this.container=this.svg.append("g"),this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.container.attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.brush=iu().extent([[0,0],[this.width,this.height]]).on("end",e=>{e.sourceEvent&&this.brushCircles(e)}),this.textureScale.callTextures(e=>{this.svg.call(e)}),this}embedData(e,n,r){this.embedding=e,this.labelInfo=n,this.fsmResult=r,console.log(this.fsmResult);let i=this.embedding[0].x,s=this.embedding[0].x;return this.embedding.forEach(a=>{i=i<a.x?a.x:i,s=s>a.x?a.x:s,i=i<a.y?a.y:i,s=s>a.y?a.y:s}),this.xScale=$e().domain([s*1.05,i*1.05]).range([0,this.width]),this.yScale=$e().domain([s*1.05,i*1.05]).range([this.height,0]),this.labelColorScale=ne().domain(this.labelInfo.labelSet).range(ge),this.fsColorScale=[...ge],this.fsColorScale=ne().domain(new Set([...new Array(9)].map((a,u)=>u))).range(this.fsColorScale),this.circles=this.container.selectAll("circle").data(this.embedding).join("circle"),this.circles.attr("transform",a=>"translate("+this.xScale(a.x)+","+this.yScale(a.y)+")").attr("fill",a=>"gray").attr("opacity",.8).attr("r",1.5),this}on(e,n){return this.handlers[e]=n,this}isBrushed(e,n){if(!n)return;let[[r,i],[s,a]]=n,u=this.xScale(e.x),o=this.yScale(e.y);return r<=u&&u<=s&&i<=o&&o<=a}hideBrush(){this.container.call(this.brush.clear)}brushCircles(e){let n=e.selection,r=n?new Set(this.embedding.filter(i=>this.isBrushed(i,n)).map(i=>i.id)):new Set;this.handlers.brush&&this.handlers.brush(r)}highlightBrushed(){this.circles.classed("brushed",e=>this.brushedSet.has(e.id)).attr("opacity",.8)}highlightFS(e){this.contours.attr("stroke-opacity",(n,r)=>r===e?1:.1).attr("fill-opacity",(n,r)=>r===e?.5:.1)}highlightClass(e){this.circles.attr("r",n=>n.l===this.labelInfo.labelSet[e]?3:1.5)}mouseOut(){this.contours.attr("stroke-opacity",.8).attr("fill-opacity",.5),this.circles.attr("r",1.5)}drawContour(){var n;(n=this.contourG)==null||n.remove(),this.contourG=this.container.append("g");const e=Hu().x(r=>this.xScale(r[0])).y(r=>this.yScale(r[1]));this.contours=this.contourG.selectAll("path").data(this.contourData.slice(0,10)).join("path"),this.contours.attr("d",r=>e(r)).attr("fill",(r,i)=>i<this.textureScale.length()?this.textureScale.getTexture(i).url():"none").attr("id",(r,i)=>`FS${i}`).attr("fill-opacity",.5).attr("stroke","black").attr("stroke-opacity",.8).on("mouseover",r=>{let i=+q(r.target).attr("id").slice(2);this.eventHandlers.linkViews("fsHover",i)}).on("mouseout",r=>{let i=+q(r.target).attr("id").slice(2);this.eventHandlers.linkViews("mouseOut",i)})}updateView(e){var n;this.updateHyperparams(),e==="dualMode"?(this.mode==="fsMode"&&this.circles.attr("fill",r=>this.labelColorScale(r.l)),this.drawContour()):e==="fsMode"?(this.drawContour(),this.circles.attr("fill",ge[9])):((n=this.contourG)==null||n.remove(),this.circles.attr("fill",r=>this.labelColorScale(r.l)))}updateHyperparams(){this.k=q("#kRange").property("value"),this.minSupport=q("#msRange").property("value"),this.fsmResult.forEach(e=>{e.ms==this.minSupport&&e.k==this.k&&(this.contourData=e.coords[this.id],this.subgraphs=e.subgs)})}}function En(){return"".concat(Math.random().toString(36),"00000000000000000").replace(/[^a-z]+/g,"").slice(0,5)}function ol(){var t=20,e="",n=2,r=!1,i="#343434",s="#343434",a=0,u=En(),o=function(h){var c=h.append("defs").append("pattern").attr("id",u).attr("patternUnits","userSpaceOnUse").attr("width",t).attr("height",t);if(e&&c.append("rect").attr("width",t).attr("height",t).attr("fill",e),c.append("circle").attr("cx",t/2).attr("cy",t/2).attr("r",n).attr("fill",i).attr("stroke",s).attr("stroke-width",a),r)for(var f=0,_=[[0,0],[0,t],[t,0],[t,t]];f<_.length;f++){var g=_[f];c.append("circle").attr("cx",g[0]).attr("cy",g[1]).attr("r",n).attr("fill",i).attr("stroke",s).attr("stroke-width",a)}};return o.heavier=function(l){return n*=arguments.length===0?2:2*l,o},o.lighter=function(l){return n/=arguments.length===0?2:2*l,o},o.thinner=function(l){return t*=arguments.length===0?2:2*l,o},o.thicker=function(l){return t/=arguments.length===0?2:2*l,o},o.background=function(l){return e=l,o},o.size=function(l){return t=l,o},o.complement=function(l){return r=arguments.length===0?!0:l,o},o.radius=function(l){return n=l,o},o.fill=function(l){return i=l,o},o.stroke=function(l){return s=l,o},o.strokeWidth=function(l){return a=l,o},o.id=function(l){return arguments.length===0?u:(u=l,o)},o.url=function(){return"url(#".concat(u,")")},o}function ul(t,e){if(t){if(typeof t=="string")return hr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(t,e)}}function hr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ll(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=ul(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,u;return{s:function(){n=t[Symbol.iterator]()},n:function(){var o=n.next();return s=o.done,o},e:function(o){a=!0,u=o},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw u}}}}function cl(){var t=20,e="#343434",n=2,r="",i=En(),s=["diagonal"],a="auto",u=function(h){var c=t;switch(h){case"0/8":case"vertical":return"M ".concat(c/2,", 0 l 0, ").concat(c);case"1/8":return"M ".concat(-c/4,",").concat(c," l ").concat(c/2,",").concat(-c," M ").concat(c/4,",").concat(c," l ").concat(c/2,",").concat(-c," M ").concat(c*3/4,",").concat(c," l ").concat(c/2,",").concat(-c);case"2/8":case"diagonal":return"M 0,".concat(c," l ").concat(c,",").concat(-c," M ").concat(-c/4,",").concat(c/4," l ").concat(c/2,",").concat(-c/2," M ").concat(3/4*c,",").concat(5/4*c," l ").concat(c/2,",").concat(-c/2);case"3/8":return"M 0,".concat(3/4*c," l ").concat(c,",").concat(-c/2," M 0,").concat(c/4," l ").concat(c,",").concat(-c/2," M 0,").concat(c*5/4," l ").concat(c,",").concat(-c/2);case"4/8":case"horizontal":return"M 0,".concat(c/2," l ").concat(c,",0");case"5/8":return"M 0,".concat(-c/4," l ").concat(c,",").concat(c/2,"M 0,").concat(c/4," l ").concat(c,",").concat(c/2," M 0,").concat(c*3/4," l ").concat(c,",").concat(c/2);case"6/8":return"M 0,0 l ".concat(c,",").concat(c," M ").concat(-c/4,",").concat(3/4*c," l ").concat(c/2,",").concat(c/2," M ").concat(c*3/4,",").concat(-c/4," l ").concat(c/2,",").concat(c/2);case"7/8":return"M ".concat(-c/4,",0 l ").concat(c/2,",").concat(c," M ").concat(c/4,",0 l ").concat(c/2,",").concat(c," M ").concat(c*3/4,",0 l ").concat(c/2,",").concat(c);default:return"M ".concat(c/2,", 0 l 0, ").concat(c)}},o=function(h){var c=h.append("defs").append("pattern").attr("id",i).attr("patternUnits","userSpaceOnUse").attr("width",t).attr("height",t);r&&c.append("rect").attr("width",t).attr("height",t).attr("fill",r);var f=ll(s),_;try{for(f.s();!(_=f.n()).done;){var g=_.value;c.append("path").attr("d",u(g)).attr("stroke-width",n).attr("shape-rendering",a).attr("stroke",e).attr("stroke-linecap","square")}}catch(P){f.e(P)}finally{f.f()}};return o.heavier=function(l){return n*=arguments.length===0?2:2*l,o},o.lighter=function(l){return n/=arguments.length===0?2:2*l,o},o.thinner=function(l){return t*=arguments.length===0?2:2*l,o},o.thicker=function(l){return t/=arguments.length===0?2:2*l,o},o.background=function(l){return r=l,o},o.size=function(l){return t=l,o},o.orientation=function(){for(var l=arguments.length,h=new Array(l),c=0;c<l;c++)h[c]=arguments[c];return arguments.length===0||(s=h),o},o.shapeRendering=function(l){return a=l,o},o.stroke=function(l){return e=l,o},o.strokeWidth=function(l){return n=l,o},o.id=function(l){return arguments.length===0?i:(i=l,o)},o.url=function(){return"url(#".concat(i,")")},o}function hl(){var t=1,e=1,n=20,r="#343434",i=2,s="",a=function(_){return"M ".concat(_/4,",").concat(_*3/4,"l").concat(_/4,",").concat(-_/2,"l").concat(_/4,",").concat(_/2)},u=En(),o="transparent",l="auto",h=function(_){var g=n;switch(_){case"squares":return"M ".concat(g/4," ").concat(g/4," l ").concat(g/2," 0 l 0 ").concat(g/2," l ").concat(-g/2," 0 Z");case"nylon":return"M 0 ".concat(g/4," l ").concat(g/4," 0 l 0 ").concat(-g/4," M ").concat(g*3/4," ").concat(g," l 0 ").concat(-g/4," l ").concat(g/4," 0 M ").concat(g/4," ").concat(g/2," l 0 ").concat(g/4," l ").concat(g/4," 0 M ").concat(g/2," ").concat(g/4," l ").concat(g/4," 0 l 0 ").concat(g/4);case"waves":return"M 0 ".concat(g/2," c ").concat(g/8," ").concat(-g/4," , ").concat(g*3/8," ").concat(-g/4," , ").concat(g/2," 0 c ").concat(g/8," ").concat(g/4," , ").concat(g*3/8," ").concat(g/4," , ").concat(g/2," 0 M ").concat(-g/2," ").concat(g/2," c ").concat(g/8," ").concat(g/4," , ").concat(g*3/8," ").concat(g/4," , ").concat(g/2," 0 M ").concat(g," ").concat(g/2," c ").concat(g/8," ").concat(-g/4," , ").concat(g*3/8," ").concat(-g/4," , ").concat(g/2," 0");case"woven":return"M ".concat(g/4,",").concat(g/4,"l").concat(g/2,",").concat(g/2,"M").concat(g*3/4,",").concat(g/4,"l").concat(g/2,",").concat(-g/2," M").concat(g/4,",").concat(g*3/4,"l").concat(-g/2,",").concat(g/2,"M").concat(g*3/4,",").concat(g*5/4,"l").concat(g/2,",").concat(-g/2," M").concat(-g/4,",").concat(g/4,"l").concat(g/2,",").concat(-g/2);case"crosses":return"M ".concat(g/4,",").concat(g/4,"l").concat(g/2,",").concat(g/2,"M").concat(g/4,",").concat(g*3/4,"l").concat(g/2,",").concat(-g/2);case"caps":return"M ".concat(g/4,",").concat(g*3/4,"l").concat(g/4,",").concat(-g/2,"l").concat(g/4,",").concat(g/2);case"hexagons":return t=3,e=Math.sqrt(3),"M ".concat(g,",0 l ").concat(g,",0 l ").concat(g/2,",").concat(g*Math.sqrt(3)/2," l ").concat(-g/2,",").concat(g*Math.sqrt(3)/2," l ").concat(-g,",0 l ").concat(-g/2,",").concat(-g*Math.sqrt(3)/2," Z M 0,").concat(g*Math.sqrt(3)/2," l ").concat(g/2,",0 M ").concat(3*g,",").concat(g*Math.sqrt(3)/2," l ").concat(-g/2,",0");default:return _(g)}},c=function(_){var g=h(a),P=_.append("defs").append("pattern").attr("id",u).attr("patternUnits","userSpaceOnUse").attr("width",n*t).attr("height",n*e);s&&P.append("rect").attr("width",n*t).attr("height",n*e).attr("fill",s),P.append("path").attr("d",g).attr("fill",o).attr("stroke",r).attr("stroke-width",i).attr("stroke-linecap","square").attr("shape-rendering",l)};return c.heavier=function(f){return i*=arguments.length===0?2:2*f,c},c.lighter=function(f){return i/=arguments.length===0?2:2*f,c},c.thinner=function(f){return n*=arguments.length===0?2:2*f,c},c.thicker=function(f){return n/=arguments.length===0?2:2*f,c},c.background=function(f){return s=f,c},c.shapeRendering=function(f){return l=f,c},c.size=function(f){return n=f,c},c.d=function(f){return a=f,c},c.fill=function(f){return o=f,c},c.stroke=function(f){return r=f,c},c.strokeWidth=function(f){return i=f,c},c.id=function(f){return arguments.length===0?u:(u=f,c)},c.url=function(){return"url(#".concat(u,")")},c}var pt={circles:ol,lines:cl,paths:hl},fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={},dl={get exports(){return fr},set exports(t){fr=t}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(fl,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,a={},u=0,o={parse:function(p,d){var x=(d=d||{}).dynamicTyping||!1;if(D(x)&&(d.dynamicTypingFunction=x,x={}),d.dynamicTyping=x,d.transform=!!D(d.transform)&&d.transform,d.worker&&o.WORKERS_SUPPORTED){var w=function(){if(!o.WORKERS_SUPPORTED)return!1;var E=(v=r.URL||r.webkitURL||null,k=n.toString(),o.BLOB_URL||(o.BLOB_URL=v.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",k,")();"],{type:"text/javascript"})))),R=new r.Worker(E),v,k;return R.onmessage=T,R.id=u++,a[R.id]=R}();return w.userStep=d.step,w.userChunk=d.chunk,w.userComplete=d.complete,w.userError=d.error,d.step=D(d.step),d.chunk=D(d.chunk),d.complete=D(d.complete),d.error=D(d.error),delete d.worker,void w.postMessage({input:p,config:d,workerId:w.id})}var A=null;return o.NODE_STREAM_INPUT,typeof p=="string"?(p=function(E){return E.charCodeAt(0)===65279?E.slice(1):E}(p),A=d.download?new c(d):new _(d)):p.readable===!0&&D(p.read)&&D(p.on)?A=new g(d):(r.File&&p instanceof File||p instanceof Object)&&(A=new f(d)),A.stream(p)},unparse:function(p,d){var x=!1,w=!0,A=",",E=`\r
`,R='"',v=R+R,k=!1,y=null,M=!1;(function(){if(typeof d=="object"){if(typeof d.delimiter!="string"||o.BAD_DELIMITERS.filter(function(S){return d.delimiter.indexOf(S)!==-1}).length||(A=d.delimiter),(typeof d.quotes=="boolean"||typeof d.quotes=="function"||Array.isArray(d.quotes))&&(x=d.quotes),typeof d.skipEmptyLines!="boolean"&&typeof d.skipEmptyLines!="string"||(k=d.skipEmptyLines),typeof d.newline=="string"&&(E=d.newline),typeof d.quoteChar=="string"&&(R=d.quoteChar),typeof d.header=="boolean"&&(w=d.header),Array.isArray(d.columns)){if(d.columns.length===0)throw new Error("Option columns is empty");y=d.columns}d.escapeChar!==void 0&&(v=d.escapeChar+R),(typeof d.escapeFormulae=="boolean"||d.escapeFormulae instanceof RegExp)&&(M=d.escapeFormulae instanceof RegExp?d.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var m=new RegExp(b(R),"g");if(typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(p)){if(!p.length||Array.isArray(p[0]))return N(null,p,k);if(typeof p[0]=="object")return N(y||Object.keys(p[0]),p,k)}else if(typeof p=="object")return typeof p.data=="string"&&(p.data=JSON.parse(p.data)),Array.isArray(p.data)&&(p.fields||(p.fields=p.meta&&p.meta.fields||y),p.fields||(p.fields=Array.isArray(p.data[0])?p.fields:typeof p.data[0]=="object"?Object.keys(p.data[0]):[]),Array.isArray(p.data[0])||typeof p.data[0]=="object"||(p.data=[p.data])),N(p.fields||[],p.data||[],k);throw new Error("Unable to serialize unrecognized input");function N(S,V,G){var W="";typeof S=="string"&&(S=JSON.parse(S)),typeof V=="string"&&(V=JSON.parse(V));var Z=Array.isArray(S)&&0<S.length,H=!Array.isArray(V[0]);if(Z&&w){for(var j=0;j<S.length;j++)0<j&&(W+=A),W+=L(S[j],j);0<V.length&&(W+=E)}for(var I=0;I<V.length;I++){var U=Z?S.length:V[I].length,J=!1,nt=Z?Object.keys(V[I]).length===0:V[I].length===0;if(G&&!Z&&(J=G==="greedy"?V[I].join("").trim()==="":V[I].length===1&&V[I][0].length===0),G==="greedy"&&Z){for(var X=[],it=0;it<U;it++){var tt=H?S[it]:it;X.push(V[I][tt])}J=X.join("").trim()===""}if(!J){for(var K=0;K<U;K++){0<K&&!nt&&(W+=A);var F=Z&&H?S[K]:K;W+=L(V[I][F],K)}I<V.length-1&&(!G||0<U&&!nt)&&(W+=E)}}return W}function L(S,V){if(S==null)return"";if(S.constructor===Date)return JSON.stringify(S).slice(1,25);var G=!1;M&&typeof S=="string"&&M.test(S)&&(S="'"+S,G=!0);var W=S.toString().replace(m,v);return(G=G||x===!0||typeof x=="function"&&x(S,V)||Array.isArray(x)&&x[V]||function(Z,H){for(var j=0;j<H.length;j++)if(-1<Z.indexOf(H[j]))return!0;return!1}(W,o.BAD_DELIMITERS)||-1<W.indexOf(A)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?R+W+R:W}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!i&&!!r.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=C,o.ParserHandle=P,o.NetworkStreamer=c,o.FileStreamer=f,o.StringStreamer=_,o.ReadableStreamStreamer=g,r.jQuery){var l=r.jQuery;l.fn.parse=function(p){var d=p.config||{},x=[];return this.each(function(E){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var R=0;R<this.files.length;R++)x.push({file:this.files[R],inputElem:this,instanceConfig:l.extend({},d)})}),w(),this;function w(){if(x.length!==0){var E,R,v,k,y=x[0];if(D(p.before)){var M=p.before(y.file,y.inputElem);if(typeof M=="object"){if(M.action==="abort")return E="AbortError",R=y.file,v=y.inputElem,k=M.reason,void(D(p.error)&&p.error({name:E},R,v,k));if(M.action==="skip")return void A();typeof M.config=="object"&&(y.instanceConfig=l.extend(y.instanceConfig,M.config))}else if(M==="skip")return void A()}var m=y.instanceConfig.complete;y.instanceConfig.complete=function(N){D(m)&&m(N,y.file,y.inputElem),A()},o.parse(y.file,y.instanceConfig)}else D(p.complete)&&p.complete()}function A(){x.splice(0,1),w()}}}function h(p){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(d){var x=O(d);x.chunkSize=parseInt(x.chunkSize),d.step||d.chunk||(x.chunkSize=null),this._handle=new P(x),(this._handle.streamer=this)._config=x}.call(this,p),this.parseChunk=function(d,x){if(this.isFirstChunk&&D(this._config.beforeFirstChunk)){var w=this._config.beforeFirstChunk(d);w!==void 0&&(d=w)}this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+d;this._partialLine="";var E=this._handle.parse(A,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var R=E.meta.cursor;this._finished||(this._partialLine=A.substring(R-this._baseIndex),this._baseIndex=R),E&&E.data&&(this._rowCount+=E.data.length);var v=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)r.postMessage({results:E,workerId:o.WORKER_ID,finished:v});else if(D(this._config.chunk)&&!x){if(this._config.chunk(E,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);E=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(E.data),this._completeResults.errors=this._completeResults.errors.concat(E.errors),this._completeResults.meta=E.meta),this._completed||!v||!D(this._config.complete)||E&&E.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||E&&E.meta.paused||this._nextChunk(),E}this._halted=!0},this._sendError=function(d){D(this._config.error)?this._config.error(d):s&&this._config.error&&r.postMessage({workerId:o.WORKER_ID,error:d,finished:!1})}}function c(p){var d;(p=p||{}).chunkSize||(p.chunkSize=o.RemoteChunkSize),h.call(this,p),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(d=new XMLHttpRequest,this._config.withCredentials&&(d.withCredentials=this._config.withCredentials),i||(d.onload=B(this._chunkLoaded,this),d.onerror=B(this._chunkError,this)),d.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x=this._config.downloadRequestHeaders;for(var w in x)d.setRequestHeader(w,x[w])}if(this._config.chunkSize){var A=this._start+this._config.chunkSize-1;d.setRequestHeader("Range","bytes="+this._start+"-"+A)}try{d.send(this._config.downloadRequestBody)}catch(E){this._chunkError(E.message)}i&&d.status===0&&this._chunkError()}},this._chunkLoaded=function(){d.readyState===4&&(d.status<200||400<=d.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:d.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(x){var w=x.getResponseHeader("Content-Range");return w===null?-1:parseInt(w.substring(w.lastIndexOf("/")+1))}(d),this.parseChunk(d.responseText)))},this._chunkError=function(x){var w=d.statusText||x;this._sendError(new Error(w))}}function f(p){var d,x;(p=p||{}).chunkSize||(p.chunkSize=o.LocalChunkSize),h.call(this,p);var w=typeof FileReader<"u";this.stream=function(A){this._input=A,x=A.slice||A.webkitSlice||A.mozSlice,w?((d=new FileReader).onload=B(this._chunkLoaded,this),d.onerror=B(this._chunkError,this)):d=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input;if(this._config.chunkSize){var E=Math.min(this._start+this._config.chunkSize,this._input.size);A=x.call(A,this._start,E)}var R=d.readAsText(A,this._config.encoding);w||this._chunkLoaded({target:{result:R}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(d.error)}}function _(p){var d;h.call(this,p=p||{}),this.stream=function(x){return d=x,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var x,w=this._config.chunkSize;return w?(x=d.substring(0,w),d=d.substring(w)):(x=d,d=""),this._finished=!d,this.parseChunk(x)}}}function g(p){h.call(this,p=p||{});var d=[],x=!0,w=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&d.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),d.length?this.parseChunk(d.shift()):x=!0},this._streamData=B(function(A){try{d.push(typeof A=="string"?A:A.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(d.shift()))}catch(E){this._streamError(E)}},this),this._streamError=B(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=B(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=B(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function P(p){var d,x,w,A=Math.pow(2,53),E=-A,R=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,v=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,k=this,y=0,M=0,m=!1,N=!1,L=[],S={data:[],errors:[],meta:{}};if(D(p.step)){var V=p.step;p.step=function(I){if(S=I,Z())W();else{if(W(),S.data.length===0)return;y+=I.data.length,p.preview&&y>p.preview?x.abort():(S.data=S.data[0],V(S,k))}}}function G(I){return p.skipEmptyLines==="greedy"?I.join("").trim()==="":I.length===1&&I[0].length===0}function W(){return S&&w&&(j("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),w=!1),p.skipEmptyLines&&(S.data=S.data.filter(function(I){return!G(I)})),Z()&&function(){if(!S)return;function I(J,nt){D(p.transformHeader)&&(J=p.transformHeader(J,nt)),L.push(J)}if(Array.isArray(S.data[0])){for(var U=0;Z()&&U<S.data.length;U++)S.data[U].forEach(I);S.data.splice(0,1)}else S.data.forEach(I)}(),function(){if(!S||!p.header&&!p.dynamicTyping&&!p.transform)return S;function I(J,nt){var X,it=p.header?{}:[];for(X=0;X<J.length;X++){var tt=X,K=J[X];p.header&&(tt=X>=L.length?"__parsed_extra":L[X]),p.transform&&(K=p.transform(K,tt)),K=H(tt,K),tt==="__parsed_extra"?(it[tt]=it[tt]||[],it[tt].push(K)):it[tt]=K}return p.header&&(X>L.length?j("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+X,M+nt):X<L.length&&j("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+X,M+nt)),it}var U=1;return!S.data.length||Array.isArray(S.data[0])?(S.data=S.data.map(I),U=S.data.length):S.data=I(S.data,0),p.header&&S.meta&&(S.meta.fields=L),M+=U,S}()}function Z(){return p.header&&L.length===0}function H(I,U){return J=I,p.dynamicTypingFunction&&p.dynamicTyping[J]===void 0&&(p.dynamicTyping[J]=p.dynamicTypingFunction(J)),(p.dynamicTyping[J]||p.dynamicTyping)===!0?U==="true"||U==="TRUE"||U!=="false"&&U!=="FALSE"&&(function(nt){if(R.test(nt)){var X=parseFloat(nt);if(E<X&&X<A)return!0}return!1}(U)?parseFloat(U):v.test(U)?new Date(U):U===""?null:U):U;var J}function j(I,U,J,nt){var X={type:I,code:U,message:J};nt!==void 0&&(X.row=nt),S.errors.push(X)}this.parse=function(I,U,J){var nt=p.quoteChar||'"';if(p.newline||(p.newline=function(tt,K){tt=tt.substring(0,1048576);var F=new RegExp(b(K)+"([^]*?)"+b(K),"gm"),Y=(tt=tt.replace(F,"")).split("\r"),at=tt.split(`
`),st=1<at.length&&at[0].length<Y[0].length;if(Y.length===1||st)return`
`;for(var ht=0,et=0;et<Y.length;et++)Y[et][0]===`
`&&ht++;return ht>=Y.length/2?`\r
`:"\r"}(I,nt)),w=!1,p.delimiter)D(p.delimiter)&&(p.delimiter=p.delimiter(I),S.meta.delimiter=p.delimiter);else{var X=function(tt,K,F,Y,at){var st,ht,et,rt;at=at||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var $t=0;$t<at.length;$t++){var Q=at[$t],Ft=0,wt=0,Ct=0;et=void 0;for(var Mt=new C({comments:Y,delimiter:Q,newline:K,preview:10}).parse(tt),St=0;St<Mt.data.length;St++)if(F&&G(Mt.data[St]))Ct++;else{var At=Mt.data[St].length;wt+=At,et!==void 0?0<At&&(Ft+=Math.abs(At-et),et=At):et=At}0<Mt.data.length&&(wt/=Mt.data.length-Ct),(ht===void 0||Ft<=ht)&&(rt===void 0||rt<wt)&&1.99<wt&&(ht=Ft,st=Q,rt=wt)}return{successful:!!(p.delimiter=st),bestDelimiter:st}}(I,p.newline,p.skipEmptyLines,p.comments,p.delimitersToGuess);X.successful?p.delimiter=X.bestDelimiter:(w=!0,p.delimiter=o.DefaultDelimiter),S.meta.delimiter=p.delimiter}var it=O(p);return p.preview&&p.header&&it.preview++,d=I,x=new C(it),S=x.parse(d,U,J),W(),m?{meta:{paused:!0}}:S||{meta:{paused:!1}}},this.paused=function(){return m},this.pause=function(){m=!0,x.abort(),d=D(p.chunk)?"":d.substring(x.getCharIndex())},this.resume=function(){k.streamer._halted?(m=!1,k.streamer.parseChunk(d,!0)):setTimeout(k.resume,3)},this.aborted=function(){return N},this.abort=function(){N=!0,x.abort(),S.meta.aborted=!0,D(p.complete)&&p.complete(S),d=""}}function b(p){return p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(p){var d,x=(p=p||{}).delimiter,w=p.newline,A=p.comments,E=p.step,R=p.preview,v=p.fastMode,k=d=p.quoteChar===void 0||p.quoteChar===null?'"':p.quoteChar;if(p.escapeChar!==void 0&&(k=p.escapeChar),(typeof x!="string"||-1<o.BAD_DELIMITERS.indexOf(x))&&(x=","),A===x)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<o.BAD_DELIMITERS.indexOf(A))&&(A=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var y=0,M=!1;this.parse=function(m,N,L){if(typeof m!="string")throw new Error("Input must be a string");var S=m.length,V=x.length,G=w.length,W=A.length,Z=D(E),H=[],j=[],I=[],U=y=0;if(!m)return ft();if(p.header&&!N){var J=m.split(w)[0].split(x),nt=[],X={},it=!1;for(var tt in J){var K=J[tt];D(p.transformHeader)&&(K=p.transformHeader(K,tt));var F=K,Y=X[K]||0;for(0<Y&&(it=!0,F=K+"_"+Y),X[K]=Y+1;nt.includes(F);)F=F+"_"+Y;nt.push(F)}if(it){var at=m.split(w);at[0]=nt.join(x),m=at.join(w)}}if(v||v!==!1&&m.indexOf(d)===-1){for(var st=m.split(w),ht=0;ht<st.length;ht++){if(I=st[ht],y+=I.length,ht!==st.length-1)y+=w.length;else if(L)return ft();if(!A||I.substring(0,W)!==A){if(Z){if(H=[],Ct(I.split(x)),se(),M)return ft()}else Ct(I.split(x));if(R&&R<=ht)return H=H.slice(0,R),ft(!0)}}return ft()}for(var et=m.indexOf(x,y),rt=m.indexOf(w,y),$t=new RegExp(b(k)+b(d),"g"),Q=m.indexOf(d,y);;)if(m[y]!==d)if(A&&I.length===0&&m.substring(y,y+W)===A){if(rt===-1)return ft();y=rt+G,rt=m.indexOf(w,y),et=m.indexOf(x,y)}else if(et!==-1&&(et<rt||rt===-1))I.push(m.substring(y,et)),y=et+V,et=m.indexOf(x,y);else{if(rt===-1)break;if(I.push(m.substring(y,rt)),At(rt+G),Z&&(se(),M))return ft();if(R&&H.length>=R)return ft(!0)}else for(Q=y,y++;;){if((Q=m.indexOf(d,Q+1))===-1)return L||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:H.length,index:y}),St();if(Q===S-1)return St(m.substring(y,Q).replace($t,d));if(d!==k||m[Q+1]!==k){if(d===k||Q===0||m[Q-1]!==k){et!==-1&&et<Q+1&&(et=m.indexOf(x,Q+1)),rt!==-1&&rt<Q+1&&(rt=m.indexOf(w,Q+1));var Ft=Mt(rt===-1?et:Math.min(et,rt));if(m.substr(Q+1+Ft,V)===x){I.push(m.substring(y,Q).replace($t,d)),m[y=Q+1+Ft+V]!==d&&(Q=m.indexOf(d,y)),et=m.indexOf(x,y),rt=m.indexOf(w,y);break}var wt=Mt(rt);if(m.substring(Q+1+wt,Q+1+wt+G)===w){if(I.push(m.substring(y,Q).replace($t,d)),At(Q+1+wt+G),et=m.indexOf(x,y),Q=m.indexOf(d,y),Z&&(se(),M))return ft();if(R&&H.length>=R)return ft(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:H.length,index:y}),Q++}}else Q++}return St();function Ct(dt){H.push(dt),U=y}function Mt(dt){var $n=0;if(dt!==-1){var ze=m.substring(Q+1,dt);ze&&ze.trim()===""&&($n=ze.length)}return $n}function St(dt){return L||(dt===void 0&&(dt=m.substring(y)),I.push(dt),y=S,Ct(I),Z&&se()),ft()}function At(dt){y=dt,Ct(I),I=[],rt=m.indexOf(w,y)}function ft(dt){return{data:H,errors:j,meta:{delimiter:x,linebreak:w,aborted:M,truncated:!!dt,cursor:U+(N||0)}}}function se(){E(ft()),H=[],j=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return y}}function T(p){var d=p.data,x=a[d.workerId],w=!1;if(d.error)x.userError(d.error,d.file);else if(d.results&&d.results.data){var A={abort:function(){w=!0,$(d.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:z,resume:z};if(D(x.userStep)){for(var E=0;E<d.results.data.length&&(x.userStep({data:d.results.data[E],errors:d.results.errors,meta:d.results.meta},A),!w);E++);delete d.results}else D(x.userChunk)&&(x.userChunk(d.results,A,d.file),delete d.results)}d.finished&&!w&&$(d.workerId,d.results)}function $(p,d){var x=a[p];D(x.userComplete)&&x.userComplete(d),x.terminate(),delete a[p]}function z(){throw new Error("Not implemented.")}function O(p){if(typeof p!="object"||p===null)return p;var d=Array.isArray(p)?[]:{};for(var x in p)d[x]=O(p[x]);return d}function B(p,d){return function(){p.apply(d,arguments)}}function D(p){return typeof p=="function"}return s&&(r.onmessage=function(p){var d=p.data;if(o.WORKER_ID===void 0&&d&&(o.WORKER_ID=d.workerId),typeof d.input=="string")r.postMessage({workerId:o.WORKER_ID,results:o.parse(d.input,d.config),finished:!0});else if(r.File&&d.input instanceof File||d.input instanceof Object){var x=o.parse(d.input,d.config);x&&r.postMessage({workerId:o.WORKER_ID,results:x,finished:!0})}}),(c.prototype=Object.create(h.prototype)).constructor=c,(f.prototype=Object.create(h.prototype)).constructor=f,(_.prototype=Object.create(_.prototype)).constructor=_,(g.prototype=Object.create(h.prototype)).constructor=g,o})})(dl);let Et,Lt,Oe,Wt,me,gn;Et={scatterplots:[],brushedSet:new Set,add(t,e,n,r,i,s){let a=new al(this.scatterplots.length,".scatterplot-section",285,285,t,e,this.brushedSet,s,Wt);return a.initialize().embedData(n,r,i).updateView("dualMode"),this.scatterplots.push(a),a},hoverEvent(t,e=[]){t=="mouseOver"?this.scatterplots.forEach(n=>{n.mouseOver(e)}):this.scatterplots.forEach(n=>{n.mouseOut()})},updateView(t){this.scatterplots.forEach(e=>{e.updateView(t)})},highlightFS(t){this.scatterplots.forEach(e=>{e.highlightFS(t)})},highlightClass(t){this.scatterplots.forEach(e=>{e.highlightClass(t)})},mouseOut(){this.scatterplots.forEach(t=>{t.mouseOut()})},length(){return this.scatterplots.length},reset(){this.scatterplots.forEach(t=>{t.div.remove()}),this.scatterplots=[],this.brushedSet.clear()}};Lt={sankey:new sl("#fsView",280,380),add(t,e,n){this.sankey.initialize(t,e,n,Wt).update()},updateView(){this.sankey.update()},highlightFS(t){this.sankey.highlightFS(t)},highlightClass(t){this.sankey.highlightClass(t)},mouseOut(){this.sankey.mouseOut()},reset(){this.sankey.div.remove()}};Oe={heatmap:new qu("#hpramView",240,190),add(t){this.heatmap.initialize(Wt).update(t).highlightCell()},updateView(){this.heatmap.highlightCell()},reset(){this.heatmap.div.remove()}};Wt={clickCell:function(t){q("#kRange").property("value",t.k),q("#msRange").property("value",t.ms),this.updateViews()},updateViews:function(t){Et.updateView(t),Lt.updateView(),Oe.updateView()},linkViews:function(t,e){t=="fsHover"?(Et.highlightFS(e),Lt.highlightFS(e)):t=="classHover"?(Et.highlightClass(e),Lt.highlightClass(e)):t=="mouseOut"&&(Et.mouseOut(),Lt.mouseOut())}};me={labelSet:[],labels:[],add(t){this.labels=t,this.labelSet=[...new Set(t)]}};gn={textures:[pt.paths().d("crosses").thicker(),pt.paths().d("waves").thicker(),pt.paths().d("caps").thicker(),pt.paths().d("squares").thicker(),pt.lines().thicker(),pt.lines().orientation("vertical").size(6).strokeWidth(1.5),pt.lines().orientation("horizontal").size(7).strokeWidth(2),pt.lines().orientation("4/8").size(8).strokeWidth(3),pt.lines().orientation("vertical").stroke("white").size(8).strokeWidth(2).background("rgb(160,160,160)"),pt.lines().orientation("horizontal").stroke("white").size(8).strokeWidth(2).background("rgb(120,120,120)")],reaminders:pt.lines().orientation("vertical","horizontal").size(4).strokeWidth(1).shapeRendering("crispEdges"),getTexture(t){return t==-1?this.remainders:this.textures[t]},length(){return this.textures.length},callTextures(t){this.textures.forEach(e=>t(e)),t(this.reaminders)}};async function pl(t,e){let n,r;gl(),await cu(`http://localhost:50008/v3/preset?title=${t}&method=${e}`).then(i=>{console.log(i),n=i.dr_results,r=i.fsm_results,me.add(n[0].embedding.map(s=>s.l)),n.forEach(s=>{Et.add(e,s.hprams,s.embedding,me,r,gn)}),Lt.add(r,me,gn),Oe.add(r)})}function gl(){Et.length()&&(Et.reset(),Lt.reset(),Oe.reset())}let dr,pr;async function ml(){gr(!0),dr=q("#dataTitle").property("value"),pr=q("#method").property("value"),await pl(dr,pr),gr(!1)}function yl(){let t=q(this).property("value");Nr("#modeBtns").each(function(){q(this).property("value")==t?q(this).classed("btn-outline-primary",!1).classed("btn-primary",!0):q(this).classed("btn-outline-primary",!0).classed("btn-primary",!1)}),Wt.updateViews(t)}function _l(){q(`#${q(this).property("id")}Value`).text(q(this).property("value")),Wt.updateViews()}function gr(t){q("#generateBtn").selectAll("span").remove(),t?q("#generateBtn").append("span").attr("class","spinner-border spinner-border-sm").attr("role","status").attr("aria-hidden","true"):q("#generateBtn").append("span").text("RUN")}function vl(){q("#generateBtn").on("click",ml),q('input[name="modeSelector"]').on("change",yl),Nr(".hpramRange").each(function(){q(this).on("change",_l)})}vl();
